
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Black 21.12b0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/_static/css/badge_only.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <link rel="canonical" href="https://black.readthedocs.io/en/stable/index.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="#">
    <img class="logo" src="_static/logo2.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">“Any color you like.”</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=psf&repo=black&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-the_black_code_style/index">The Black Code Style</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-getting_started">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-usage_and_configuration/index">Usage and Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-integrations/index">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-guides/index">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-faq">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-contributing/index">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-change_log">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-authors">Authors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/psf/black">GitHub ↪</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/black">PyPI ↪</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/RtVdv86PrH">Chat ↪</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="the-uncompromising-code-formatter">
<h1>The uncompromising code formatter<a class="headerlink" href="#the-uncompromising-code-formatter" title="Permalink to this headline">¶</a></h1>
<p>By using <em>Black</em>, you agree to cede control over minutiae of
hand-formatting. In return, <em>Black</em> gives you speed, determinism, and
freedom from <cite>pycodestyle</cite> nagging about formatting. You will save time
and mental energy for more important matters.</p>
<p><em>Black</em> makes code review faster by producing the smallest diffs
possible. Blackened code looks the same regardless of the project
you’re reading. Formatting becomes transparent after a while and you
can focus on the content instead.</p>
<p>Try it out now using the <a class="reference external" href="https://black.vercel.app">Black Playground</a>.</p>
<div class="admonition-note-this-is-a-beta-product admonition">
<p class="admonition-title">Note - this is a beta product</p>
<p><em>Black</em> is already <a class="reference external" href="https://github.com/psf/black#used-by">successfully used</a> by
many projects, small and big. <em>Black</em> has a comprehensive test suite, with efficient
parallel tests, our own auto  formatting and parallel Continuous Integration runner.
However, <em>Black</em> is still beta. Things will probably be wonky for a while. This is
made explicit by the “Beta” trove classifier, as well as by the “b” in the version
number. What this means for you is that <strong>until the formatter becomes stable, you
should expect some formatting to change in the future</strong>. That being said, no drastic
stylistic changes are planned, mostly responses to bug reports.</p>
<p>Also, as a safety measure which slows down processing, <em>Black</em> will check that the
reformatted code still produces a valid AST that is effectively equivalent to the
original (see the
<a class="reference external" href="./the_black_code_style/current_style.html#pragmatism">Pragmatism</a>
section for details). If you’re feeling confident, use <code class="docutils literal notranslate"><span class="pre">--fast</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="index.html#document-license"><span class="doc">Black is licensed under the MIT license</span></a>.</p>
</div>
<section id="testimonials">
<h2>Testimonials<a class="headerlink" href="#testimonials" title="Permalink to this headline">¶</a></h2>
<p><strong>Mike Bayer</strong>, author of <a class="reference external" href="https://www.sqlalchemy.org/">SQLAlchemy</a>:</p>
<blockquote>
<div><p><em>I can’t think of any single tool in my entire programming career that has given me a
bigger productivity increase by its introduction. I can now do refactorings in about
1% of the keystrokes that it would have taken me previously when we had no way for
code to format itself.</em></p>
</div></blockquote>
<p><strong>Dusty Phillips</strong>, <a class="reference external" href="https://smile.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&amp;field-keywords=dusty+phillips">writer</a>:</p>
<blockquote>
<div><p><em>Black is opinionated so you don’t have to be.</em></p>
</div></blockquote>
<p><strong>Hynek Schlawack</strong>, creator of <a class="reference external" href="https://www.attrs.org/">attrs</a>, core
developer of Twisted and CPython:</p>
<blockquote>
<div><p><em>An auto-formatter that doesn’t suck is all I want for Xmas!</em></p>
</div></blockquote>
<p><strong>Carl Meyer</strong>, <a class="reference external" href="https://www.djangoproject.com/">Django</a> core developer:</p>
<blockquote>
<div><p><em>At least the name is good.</em></p>
</div></blockquote>
<p><strong>Kenneth Reitz</strong>, creator of <a class="reference external" href="http://python-requests.org/">requests</a>
and <a class="reference external" href="https://docs.pipenv.org/">pipenv</a>:</p>
<blockquote>
<div><p><em>This vastly improves the formatting of our code. Thanks a ton!</em></p>
</div></blockquote>
</section>
<section id="show-your-style">
<h2>Show your style<a class="headerlink" href="#show-your-style" title="Permalink to this headline">¶</a></h2>
<p>Use the badge in your project’s README.md:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>[<span class="nt">![Code style: black</span>](<span class="na">https://img.shields.io/badge/code%20style-black-000000.svg</span>)](https://github.com/psf/black)
</pre></div>
</div>
<p>Using the badge in README.rst:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">image</span><span class="p">::</span> https://img.shields.io/badge/code%20style-black-000000.svg
   <span class="nc">:target:</span> https://github.com/psf/black
</pre></div>
</div>
<p>Looks like this:</p>
<a class="reference external image-reference" href="https://github.com/psf/black"><img alt="https://img.shields.io/badge/code%20style-black-000000.svg" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
</section>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-the_black_code_style/index"></span><section id="the-black-code-style">
<h3>The Black Code Style<a class="headerlink" href="#the-black-code-style" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-the_black_code_style/current_style"></span><section class="tex2jax_ignore mathjax_ignore" id="the-black-code-style">
<h4>The <em>Black</em> code style<a class="headerlink" href="#the-black-code-style" title="Permalink to this headline">¶</a></h4>
<section id="code-style">
<h5>Code style<a class="headerlink" href="#code-style" title="Permalink to this headline">¶</a></h5>
<p><em>Black</em> reformats entire files in place. Style configuration options are deliberately
limited and rarely added. It doesn’t take previous formatting into account, except for
the magic trailing comma and preserving newlines. It doesn’t reformat blocks that start
with <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> and end with <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code>, or lines that ends with <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">skip</span></code>.
<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on/off</span></code> have to be on the same level of indentation. It also recognizes
<a class="reference external" href="https://github.com/google/yapf">YAPF</a>’s block comments to the same effect, as a
courtesy for straddling code.</p>
<section id="how-black-wraps-lines">
<h6>How <em>Black</em> wraps lines<a class="headerlink" href="#how-black-wraps-lines" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> ignores previous formatting and applies uniform horizontal and vertical
whitespace to your code. The rules for horizontal whitespace can be summarized as: do
whatever makes <code class="docutils literal notranslate"><span class="pre">pycodestyle</span></code> happy. The coding style used by <em>Black</em> can be viewed as a
strict subset of PEP 8.</p>
<p>As for vertical whitespace, <em>Black</em> tries to render one full expression or simple
statement per line. If this fits the allotted line length, great.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># in:</span>

<span class="n">j</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>
     <span class="mi">2</span><span class="p">,</span>
     <span class="mi">3</span>
<span class="p">]</span>

<span class="c1"># out:</span>

<span class="n">j</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>If not, <em>Black</em> will look at the contents of the first outer matching brackets and put
that in a separate indented line.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># in:</span>

<span class="n">ImportantClass</span><span class="o">.</span><span class="n">important_method</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">lookup_lines</span><span class="p">,</span> <span class="n">capture_locals</span><span class="p">,</span> <span class="n">extra_argument</span><span class="p">)</span>

<span class="c1"># out:</span>

<span class="n">ImportantClass</span><span class="o">.</span><span class="n">important_method</span><span class="p">(</span>
    <span class="n">exc</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">lookup_lines</span><span class="p">,</span> <span class="n">capture_locals</span><span class="p">,</span> <span class="n">extra_argument</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If that still doesn’t fit the bill, it will decompose the internal expression further
using the same rule, indenting matching brackets every time. If the contents of the
matching brackets pair are comma-separated (like an argument list, or a dict literal,
and so on) then <em>Black</em> will first try to keep them on the same line with the matching
brackets. If that doesn’t work, it will put all of them in separate lines.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># in:</span>

<span class="k">def</span> <span class="nf">very_important_function</span><span class="p">(</span><span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">variables</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Applies `variables` to the `template` and writes to `file`.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="o">...</span>

<span class="c1"># out:</span>

<span class="k">def</span> <span class="nf">very_important_function</span><span class="p">(</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="n">variables</span><span class="p">,</span>
    <span class="n">file</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span>
    <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Applies `variables` to the `template` and writes to `file`.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p id="labels-why-no-backslashes"><em>Black</em> prefers parentheses over backslashes, and will remove backslashes if found.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># in:</span>

<span class="k">if</span> <span class="n">some_short_rule1</span> \
  <span class="ow">and</span> <span class="n">some_short_rule2</span><span class="p">:</span>
      <span class="o">...</span>

<span class="c1"># out:</span>

<span class="k">if</span> <span class="n">some_short_rule1</span> <span class="ow">and</span> <span class="n">some_short_rule2</span><span class="p">:</span>
  <span class="o">...</span>


<span class="c1"># in:</span>

<span class="k">if</span> <span class="n">some_long_rule1</span> \
  <span class="ow">and</span> <span class="n">some_long_rule2</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c1"># out:</span>

<span class="k">if</span> <span class="p">(</span>
    <span class="n">some_long_rule1</span>
    <span class="ow">and</span> <span class="n">some_long_rule2</span>
<span class="p">):</span>
    <span class="o">...</span>

</pre></div>
</div>
<p>Backslashes and multiline strings are one of the two places in the Python grammar that
break significant indentation. You never need backslashes, they are used to force the
grammar to accept breaks that would otherwise be parse errors. That makes them confusing
to look at and brittle to modify. This is why <em>Black</em> always gets rid of them.</p>
<p>If you’re reaching for backslashes, that’s a clear signal that you can do better if you
slightly refactor your code. I hope some of the examples above show you that there are
many ways in which you can do it.</p>
<p>You might have noticed that closing brackets are always dedented and that a trailing
comma is always added. Such formatting produces smaller diffs; when you add or remove an
element, it’s always just one line. Also, having the closing bracket dedented provides a
clear delimiter between two distinct sections of the code that otherwise share the same
indentation level (like the arguments list and the docstring in the example above).</p>
<p>If a data structure literal (tuple, list, set, dict) or a line of “from” imports cannot
fit in the allotted length, it’s always split into one element per line. This minimizes
diffs as well as enables readers of code to find which commit introduced a particular
entry. This also makes <em>Black</em> compatible with
<a class="reference internal" href="index.html#isort"><span class="std std-doc">isort</span></a> with the ready-made <code class="docutils literal notranslate"><span class="pre">black</span></code>
profile or manual configuration.</p>
</section>
<section id="line-length">
<h6>Line length<a class="headerlink" href="#line-length" title="Permalink to this headline">¶</a></h6>
<p>You probably noticed the peculiar default line length. <em>Black</em> defaults to 88 characters
per line, which happens to be 10% over 80. This number was found to produce
significantly shorter files than sticking with 80 (the most popular), or even 79 (used
by the standard library). In general,
<a class="reference external" href="https://youtu.be/wf-BqAjZb8M?t=260">90-ish seems like the wise choice</a>.</p>
<p>If you’re paid by the line of code you write, you can pass <code class="docutils literal notranslate"><span class="pre">--line-length</span></code> with a lower
number. <em>Black</em> will try to respect that. However, sometimes it won’t be able to without
breaking other rules. In those rare cases, auto-formatted code will exceed your allotted
limit.</p>
<p>You can also increase it, but remember that people with sight disabilities find it
harder to work with line lengths exceeding 100 characters. It also adversely affects
side-by-side diff review on typical screen resolutions. Long lines also make it harder
to present code neatly in documentation or talk slides.</p>
<p>If you’re using Flake8, you can bump <code class="docutils literal notranslate"><span class="pre">max-line-length</span></code> to 88 and mostly forget about it.
However, it’s better if you use <a class="reference external" href="https://github.com/PyCQA/flake8-bugbear">Bugbear</a>’s
B950 warning instead of E501, and bump the max line length to 88 (or the <code class="docutils literal notranslate"><span class="pre">--line-length</span></code>
you used for black), which will align more with black’s <em>“try to respect
<code class="docutils literal notranslate"><span class="pre">--line-length</span></code>, but don’t become crazy if you can’t”</em>. You’d do it like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">...</span>
<span class="na">select</span> <span class="o">=</span> <span class="s">C,E,F,W,B,B950</span>
<span class="na">extend-ignore</span> <span class="o">=</span> <span class="s">E203, E501</span>
</pre></div>
</div>
<p>Explanation of why E203 is disabled can be found further in this documentation. And if
you’re curious about the reasoning behind B950,
<a class="reference external" href="https://github.com/PyCQA/flake8-bugbear#opinionated-warnings">Bugbear’s documentation</a>
explains it. The tl;dr is “it’s like highway speed limits, we won’t bother you if you
overdo it by a few km/h”.</p>
<p><strong>If you’re looking for a minimal, black-compatible flake8 configuration:</strong></p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">extend-ignore</span> <span class="o">=</span> <span class="s">E203</span>
</pre></div>
</div>
</section>
<section id="empty-lines">
<h6>Empty lines<a class="headerlink" href="#empty-lines" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> avoids spurious vertical whitespace. This is in the spirit of PEP 8 which says
that in-function vertical whitespace should only be used sparingly.</p>
<p><em>Black</em> will allow single empty lines inside functions, and single and double empty
lines on module level left by the original editors, except when they’re within
parenthesized expressions. Since such expressions are always reformatted to fit minimal
space, this whitespace is lost.</p>
<p>It will also insert proper spacing before and after function definitions. It’s one line
before and after inner functions and two lines before and after module-level functions
and classes. <em>Black</em> will not put empty lines between function/class definitions and
standalone comments that immediately precede the given function/class.</p>
<p><em>Black</em> will enforce single empty lines between a class-level docstring and the first
following field or method. This conforms to
<a class="reference external" href="https://www.python.org/dev/peps/pep-0257/#multi-line-docstrings">PEP 257</a>.</p>
<p><em>Black</em> won’t insert empty lines after function docstrings unless that empty line is
required due to an inner function starting immediately after.</p>
</section>
<section id="comments">
<h6>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> does not format comment contents, but it enforces two spaces between code and a
comment on the same line, and a space before the comment text begins. Some types of
comments that require specific spacing rules are respected: doc comments (<code class="docutils literal notranslate"><span class="pre">#:</span> <span class="pre">comment</span></code>),
section comments with long runs of hashes, and Spyder cells. Non-breaking spaces after
hashes are also preserved. Comments may sometimes be moved because of formatting
changes, which can break tools that assign special meaning to them. See
<a class="reference internal" href="#ast-before-and-after-formatting"><span class="std std-doc">AST before and after formatting</span></a> for more discussion.</p>
</section>
<section id="trailing-commas">
<h6>Trailing commas<a class="headerlink" href="#trailing-commas" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> will add trailing commas to expressions that are split by comma where each
element is on its own line. This includes function signatures.</p>
<p>One exception to adding trailing commas is function signatures containing <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">*args</span></code>,
or <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>. In this case a trailing comma is only safe to use on Python 3.6. <em>Black</em>
will detect if your file is already 3.6+ only and use trailing commas in this situation.
If you wonder how it knows, it looks for f-strings and existing use of trailing commas
in function signatures that have stars in them. In other words, if you’d like a trailing
comma in this situation and <em>Black</em> didn’t recognize it was safe to do so, put it there
manually and <em>Black</em> will keep it.</p>
<p>A pre-existing trailing comma informs <em>Black</em> to always explode contents of the current
bracket pair into one item per line. Read more about this in the
<a class="reference internal" href="#pragmatism"><span class="std std-doc">Pragmatism</span></a> section below.</p>
</section>
<section id="strings">
<h6>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> prefers double quotes (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code>) over single quotes (<code class="docutils literal notranslate"><span class="pre">'</span></code> and <code class="docutils literal notranslate"><span class="pre">'''</span></code>). It
will replace the latter with the former as long as it does not result in more backslash
escapes than before.</p>
<p><em>Black</em> also standardizes string prefixes, making them always lowercase. On top of that,
if your code is already Python 3.6+ only or it’s using the <code class="docutils literal notranslate"><span class="pre">unicode_literals</span></code> future
import, <em>Black</em> will remove <code class="docutils literal notranslate"><span class="pre">u</span></code> from the string prefix as it is meaningless in those
scenarios.</p>
<p>The main reason to standardize on a single form of quotes is aesthetics. Having one kind
of quotes everywhere reduces reader distraction. It will also enable a future version of
<em>Black</em> to merge consecutive string literals that ended up on the same line (see
<a class="reference external" href="https://github.com/psf/black/issues/26">#26</a> for details).</p>
<p>Why settle on double quotes? They anticipate apostrophes in English text. They match the
docstring standard described in
<a class="reference external" href="https://www.python.org/dev/peps/pep-0257/#what-is-a-docstring">PEP 257</a>. An empty
string in double quotes (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) is impossible to confuse with a one double-quote
regardless of fonts and syntax highlighting used. On top of this, double quotes for
strings are consistent with C which Python interacts a lot with.</p>
<p>On certain keyboard layouts like US English, typing single quotes is a bit easier than
double quotes. The latter requires use of the Shift key. My recommendation here is to
keep using whatever is faster to type and let <em>Black</em> handle the transformation.</p>
<p>If you are adopting <em>Black</em> in a large project with pre-existing string conventions
(like the popular
<a class="reference external" href="https://stackoverflow.com/a/56190">“single quotes for data, double quotes for human-readable strings”</a>),
you can pass <code class="docutils literal notranslate"><span class="pre">--skip-string-normalization</span></code> on the command line. This is meant as an
adoption helper, avoid using this for new projects.</p>
<p id="labels-experimental-string">As an experimental option (can be enabled by <code class="docutils literal notranslate"><span class="pre">--experimental-string-processing</span></code>),
<em>Black</em> splits long strings (using parentheses where appropriate) and merges short ones.
When split, parts of f-strings that don’t need formatting are converted to plain
strings. User-made splits are respected when they do not exceed the line length limit.
Line continuation backslashes are converted into parenthesized strings. Unnecessary
parentheses are stripped. Because the functionality is experimental, feedback and issue
reports are highly encouraged!</p>
<p><em>Black</em> also processes docstrings. Firstly the indentation of docstrings is corrected
for both quotations and the text within, although relative indentation in the text is
preserved. Superfluous trailing whitespace on each line and unnecessary new lines at the
end of the docstring are removed. All leading tabs are converted to spaces, but tabs
inside text are preserved. Whitespace leading and trailing one-line docstrings is
removed.</p>
</section>
<section id="numeric-literals">
<h6>Numeric literals<a class="headerlink" href="#numeric-literals" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> standardizes most numeric literals to use lowercase letters for the syntactic
parts and uppercase letters for the digits themselves: <code class="docutils literal notranslate"><span class="pre">0xAB</span></code> instead of <code class="docutils literal notranslate"><span class="pre">0XAB</span></code> and
<code class="docutils literal notranslate"><span class="pre">1e10</span></code> instead of <code class="docutils literal notranslate"><span class="pre">1E10</span></code>. Python 2 long literals are styled as <code class="docutils literal notranslate"><span class="pre">2L</span></code> instead of <code class="docutils literal notranslate"><span class="pre">2l</span></code> to
avoid confusion between <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
<section id="line-breaks-binary-operators">
<h6>Line breaks &amp; binary operators<a class="headerlink" href="#line-breaks-binary-operators" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> will break a line before a binary operator when splitting a block of code over
multiple lines. This is so that <em>Black</em> is compliant with the recent changes in the
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#should-a-line-break-before-or-after-a-binary-operator">PEP 8</a>
style guide, which emphasizes that this approach improves readability.</p>
</section>
<section id="slices">
<h6>Slices<a class="headerlink" href="#slices" title="Permalink to this headline">¶</a></h6>
<p>PEP 8
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements">recommends</a>
to treat <code class="docutils literal notranslate"><span class="pre">:</span></code> in slices as a binary operator with the lowest priority, and to leave an
equal amount of space on either side, except if a parameter is omitted (e.g.
<code class="docutils literal notranslate"><span class="pre">ham[1</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">:]</span></code>). It recommends no spaces around <code class="docutils literal notranslate"><span class="pre">:</span></code> operators for “simple expressions”
(<code class="docutils literal notranslate"><span class="pre">ham[lower:upper]</span></code>), and extra space for “complex expressions”
(<code class="docutils literal notranslate"><span class="pre">ham[lower</span> <span class="pre">:</span> <span class="pre">upper</span> <span class="pre">+</span> <span class="pre">offset]</span></code>). <em>Black</em> treats anything more than variable names as
“complex” (<code class="docutils literal notranslate"><span class="pre">ham[lower</span> <span class="pre">:</span> <span class="pre">upper</span> <span class="pre">+</span> <span class="pre">1]</span></code>). It also states that for extended slices, both <code class="docutils literal notranslate"><span class="pre">:</span></code>
operators have to have the same amount of spacing, except if a parameter is omitted
(<code class="docutils literal notranslate"><span class="pre">ham[1</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">::]</span></code>). <em>Black</em> enforces these rules consistently.</p>
<p>This behaviour may raise <code class="docutils literal notranslate"><span class="pre">E203</span> <span class="pre">whitespace</span> <span class="pre">before</span> <span class="pre">':'</span></code> warnings in style guide
enforcement tools like Flake8. Since <code class="docutils literal notranslate"><span class="pre">E203</span></code> is not PEP 8 compliant, you should tell
Flake8 to ignore these warnings.</p>
</section>
<section id="parentheses">
<h6>Parentheses<a class="headerlink" href="#parentheses" title="Permalink to this headline">¶</a></h6>
<p>Some parentheses are optional in the Python grammar. Any expression can be wrapped in a
pair of parentheses to form an atom. There are a few interesting cases:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(...):</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(...):</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">(...)</span> <span class="pre">in</span> <span class="pre">(...):</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">(...),</span> <span class="pre">(...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">X</span> <span class="pre">import</span> <span class="pre">(...)</span></code></p></li>
<li><p>assignments like:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">=</span> <span class="pre">(...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target:</span> <span class="pre">type</span> <span class="pre">=</span> <span class="pre">(...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">some,</span> <span class="pre">*un,</span> <span class="pre">packing</span> <span class="pre">=</span> <span class="pre">(...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">augmented</span> <span class="pre">+=</span> <span class="pre">(...)</span></code></p></li>
</ul>
</li>
</ul>
<p>In those cases, parentheses are removed when the entire statement fits in one line, or
if the inner expression doesn’t have any delimiters to further split on. If there is
only a single delimiter and the expression starts or ends with a bracket, the
parentheses can also be successfully omitted since the existing bracket pair will
organize the expression neatly anyway. Otherwise, the parentheses are added.</p>
<p>Please note that <em>Black</em> does not add or remove any additional nested parentheses that
you might want to have for clarity or further code organization. For example those
parentheses are not going to be removed:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">this</span> <span class="ow">or</span> <span class="n">that</span><span class="p">)</span>
<span class="n">decision</span> <span class="o">=</span> <span class="p">(</span><span class="n">maybe</span><span class="o">.</span><span class="n">this</span><span class="p">()</span> <span class="ow">and</span> <span class="n">values</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">maybe</span><span class="o">.</span><span class="n">that</span><span class="p">()</span> <span class="ow">and</span> <span class="n">values</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="call-chains">
<h6>Call chains<a class="headerlink" href="#call-chains" title="Permalink to this headline">¶</a></h6>
<p>Some popular APIs, like ORMs, use call chaining. This API style is known as a
<a class="reference external" href="https://en.wikipedia.org/wiki/Fluent_interface">fluent interface</a>. <em>Black</em> formats
those by treating dots that follow a call or an indexing operation like a very low
priority delimiter. It’s easier to show the behavior than to explain it. Look at the
example:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">account_id</span> <span class="o">==</span> <span class="n">account_id</span><span class="p">,</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">email</span> <span class="o">==</span> <span class="n">email_address</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">asc</span><span class="p">())</span>
        <span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="typing-stub-files">
<h6>Typing stub files<a class="headerlink" href="#typing-stub-files" title="Permalink to this headline">¶</a></h6>
<p>PEP 484 describes the syntax for type hints in Python. One of the use cases for typing
is providing type annotations for modules which cannot contain them directly (they might
be written in C, or they might be third-party, or their implementation may be overly
dynamic, and so on).</p>
<p>To solve this,
<a class="reference external" href="https://www.python.org/dev/peps/pep-0484/#stub-files">stub files with the <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> file extension</a>
can be used to describe typing information for an external module. Those stub files omit
the implementation of classes and functions they describe, instead they only contain the
structure of the file (listing globals, functions, and classes with their members). The
recommended code style for those files is more terse than PEP 8:</p>
<ul class="simple">
<li><p>prefer <code class="docutils literal notranslate"><span class="pre">...</span></code> on the same line as the class/function signature;</p></li>
<li><p>avoid vertical whitespace between consecutive module-level functions, names, or
methods and fields within a single class;</p></li>
<li><p>use a single blank line between top-level class definitions, or none if the classes
are very small.</p></li>
</ul>
<p><em>Black</em> enforces the above rules. There are additional guidelines for formatting <code class="docutils literal notranslate"><span class="pre">.pyi</span></code>
file that are not enforced yet but might be in a future version of the formatter:</p>
<ul class="simple">
<li><p>all function bodies should be empty (contain <code class="docutils literal notranslate"><span class="pre">...</span></code> instead of the body);</p></li>
<li><p>do not use docstrings;</p></li>
<li><p>prefer <code class="docutils literal notranslate"><span class="pre">...</span></code> over <code class="docutils literal notranslate"><span class="pre">pass</span></code>;</p></li>
<li><p>for arguments with a default, use <code class="docutils literal notranslate"><span class="pre">...</span></code> instead of the actual default;</p></li>
<li><p>avoid using string literals in type annotations, stub files support forward references
natively (like Python 3.7 code with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code>);</p></li>
<li><p>use variable annotations instead of type comments, even for stubs that target older
versions of Python;</p></li>
<li><p>for arguments that default to <code class="docutils literal notranslate"><span class="pre">None</span></code>, use <code class="docutils literal notranslate"><span class="pre">Optional[]</span></code> explicitly;</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">float</span></code> instead of <code class="docutils literal notranslate"><span class="pre">Union[int,</span> <span class="pre">float]</span></code>.</p></li>
</ul>
</section>
</section>
<section id="pragmatism">
<h5>Pragmatism<a class="headerlink" href="#pragmatism" title="Permalink to this headline">¶</a></h5>
<p>Early versions of <em>Black</em> used to be absolutist in some respects. They took after its
initial author. This was fine at the time as it made the implementation simpler and
there were not many users anyway. Not many edge cases were reported. As a mature tool,
<em>Black</em> does make some exceptions to rules it otherwise holds. This section documents
what those exceptions are and why this is the case.</p>
<section id="the-magic-trailing-comma">
<h6>The magic trailing comma<a class="headerlink" href="#the-magic-trailing-comma" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> in general does not take existing formatting into account.</p>
<p>However, there are cases where you put a short collection or function call in your code
but you anticipate it will grow in the future.</p>
<p>For example:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSLATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;en_us&quot;</span><span class="p">:</span> <span class="s2">&quot;English (US)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pl_pl&quot;</span><span class="p">:</span> <span class="s2">&quot;polski&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Early versions of <em>Black</em> used to ruthlessly collapse those into one line (it fits!).
Now, you can communicate that you don’t want that by putting a trailing comma in the
collection yourself. When you do, <em>Black</em> will know to always explode your collection
into one item per line.</p>
<p>How do you make it stop? Just delete that trailing comma and <em>Black</em> will collapse your
collection into one line if it fits.</p>
<p>If you must, you can recover the behaviour of early versions of <em>Black</em> with the option
<code class="docutils literal notranslate"><span class="pre">--skip-magic-trailing-comma</span></code> / <code class="docutils literal notranslate"><span class="pre">-C</span></code>.</p>
</section>
<section id="r-strings-and-r-strings">
<h6>r”strings” and R”strings”<a class="headerlink" href="#r-strings-and-r-strings" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> normalizes string quotes as well as string prefixes, making them lowercase. One
exception to this rule is r-strings. It turns out that the very popular
<a class="reference external" href="https://github.com/MagicStack/MagicPython/">MagicPython</a> syntax highlighter, used by
default by (among others) GitHub and Visual Studio Code, differentiates between
r-strings and R-strings. The former are syntax highlighted as regular expressions while
the latter are treated as true raw strings with no special semantics.</p>
</section>
<section id="ast-before-and-after-formatting">
<h6>AST before and after formatting<a class="headerlink" href="#ast-before-and-after-formatting" title="Permalink to this headline">¶</a></h6>
<p>When run with <code class="docutils literal notranslate"><span class="pre">--safe</span></code>, <em>Black</em> checks that the code before and after is semantically
equivalent. This check is done by comparing the AST of the source with the AST of the
target. There are three limited cases in which the AST does differ:</p>
<ol class="simple">
<li><p><em>Black</em> cleans up leading and trailing whitespace of docstrings, re-indenting them if
needed. It’s been one of the most popular user-reported features for the formatter to
fix whitespace issues with docstrings. While the result is technically an AST
difference, due to the various possibilities of forming docstrings, all realtime use
of docstrings that we’re aware of sanitizes indentation and leading/trailing
whitespace anyway.</p></li>
<li><p><em>Black</em> manages optional parentheses for some statements. In the case of the <code class="docutils literal notranslate"><span class="pre">del</span></code>
statement, presence of wrapping parentheses or lack of thereof changes the resulting
AST but is semantically equivalent in the interpreter.</p></li>
<li><p><em>Black</em> might move comments around, which includes type comments. Those are part of
the AST as of Python 3.8. While the tool implements a number of special cases for
those comments, there is no guarantee they will remain where they were in the source.
Note that this doesn’t change runtime behavior of the source code.</p></li>
</ol>
<p>To put things in perspective, the code equivalence check is a feature of <em>Black</em> which
other formatters don’t implement at all. It is of crucial importance to us to ensure
code behaves the way it did before it got reformatted. We treat this as a feature and
there are no plans to relax this in the future. The exceptions enumerated above stem
from either user feedback or implementation details of the tool. In each case we made
due diligence to ensure that the AST divergence is of no practical consequence.</p>
</section>
</section>
</section>
<span id="document-the_black_code_style/future_style"></span><section class="tex2jax_ignore mathjax_ignore" id="the-future-of-the-black-code-style">
<h4>The (future of the) Black code style<a class="headerlink" href="#the-future-of-the-black-code-style" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changes to this document often aren’t tied and don’t relate to releases of
<em>Black</em>. It’s recommended that you read the latest version available.</p>
</div>
<section id="using-backslashes-for-with-statements">
<h5>Using backslashes for with statements<a class="headerlink" href="#using-backslashes-for-with-statements" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="index.html#labels-why-no-backslashes"><span class="std std-ref">Backslashes are bad and should be never be used</span></a> however
there is one exception: <code class="docutils literal notranslate"><span class="pre">with</span></code> statements using multiple context managers. Before Python
3.9 Python’s grammar does not allow organizing parentheses around the series of context
managers.</p>
<p>We don’t want formatting like:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">make_context_manager1</span><span class="p">()</span> <span class="k">as</span> <span class="n">cm1</span><span class="p">,</span> <span class="n">make_context_manager2</span><span class="p">()</span> <span class="k">as</span> <span class="n">cm2</span><span class="p">,</span> <span class="n">make_context_manager3</span><span class="p">()</span> <span class="k">as</span> <span class="n">cm3</span><span class="p">,</span> <span class="n">make_context_manager4</span><span class="p">()</span> <span class="k">as</span> <span class="n">cm4</span><span class="p">:</span>
    <span class="o">...</span>  <span class="c1"># nothing to split on - line too long</span>
</pre></div>
</div>
<p>So <em>Black</em> will eventually format it like this:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> \
     <span class="n">make_context_manager</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm1</span><span class="p">,</span> \
     <span class="n">make_context_manager</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm2</span><span class="p">,</span> \
     <span class="n">make_context_manager</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm3</span><span class="p">,</span> \
     <span class="n">make_context_manager</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm4</span> \
<span class="p">:</span>
    <span class="o">...</span>  <span class="c1"># backslashes and an ugly stranded colon</span>
</pre></div>
</div>
<p>Although when the target version is Python 3.9 or higher, <em>Black</em> will use parentheses
instead since they’re allowed in Python 3.9 and higher.</p>
</section>
<section id="improved-string-processing">
<h5>Improved string processing<a class="headerlink" href="#improved-string-processing" title="Permalink to this headline">¶</a></h5>
<p>Currently, <em>Black</em> does not split long strings to fit the line length limit. Currently,
there is <a class="reference internal" href="index.html#labels-experimental-string"><span class="std std-ref">an experimental option</span></a> to enable splitting
strings. We plan to enable this option by default once it is fully stable. This is
tracked in <a class="reference external" href="https://github.com/psf/black/issues/2188">this issue</a>.</p>
</section>
</section>
</div>
<p><em>Black</em> is a PEP 8 compliant opinionated formatter with its own style.</p>
<p>While keeping the style unchanged throughout releases has always been a goal,
the <em>Black</em> code style isn’t set in stone. It evolves to accommodate for new features
in the Python language and, occasionally, in response to user feedback.</p>
<section id="stability-policy">
<h4>Stability Policy<a class="headerlink" href="#stability-policy" title="Permalink to this headline">¶</a></h4>
<p>The following policy applies for the <em>Black</em> code style, in non pre-release
versions of <em>Black</em>:</p>
<ul>
<li><p>The same code, formatted with the same options, will produce the same
output for all releases in a given calendar year.</p>
<p>This means projects can safely use <cite>black ~= 22.0</cite> without worrying about
major formatting changes disrupting their project in 2022. We may still
fix bugs where <em>Black</em> crashes on some code, and make other improvements
that do not affect formatting.</p>
</li>
<li><p>The first release in a new calendar year <em>may</em> contain formatting changes,
although these will be minimised as much as possible. This is to allow for
improved formatting enabled by newer Python language syntax as well as due
to improvements in the formatting logic.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--future</span></code> flag is exempt from this policy. There are no guarantees
around the stability of the output with that flag passed into <em>Black</em>. This
flag is intended for allowing experimentation with the proposed changes to
the <em>Black</em> code style.</p></li>
</ul>
<p>Documentation for both the current and future styles can be found:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#document-the_black_code_style/current_style"><span class="doc">The Black code style</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-the_black_code_style/future_style"><span class="doc">The (future of the) Black code style</span></a></p></li>
</ul>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-getting_started"></span><section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<p>New to <em>Black</em>? Don’t worry, you’ve found the perfect place to get started!</p>
<section id="do-you-like-the-black-code-style">
<h4>Do you like the <em>Black</em> code style?<a class="headerlink" href="#do-you-like-the-black-code-style" title="Permalink to this headline">¶</a></h4>
<p>Before using <em>Black</em> on some of your code, it might be a good idea to first understand
how <em>Black</em> will format your code. <em>Black</em> isn’t for everyone and you may find something
that is a dealbreaker for you personally, which is okay! The current <em>Black</em> code style
<a class="reference internal" href="index.html#document-the_black_code_style/current_style"><span class="doc std std-doc">is described here</span></a>.</p>
</section>
<section id="try-it-out-online">
<h4>Try it out online<a class="headerlink" href="#try-it-out-online" title="Permalink to this headline">¶</a></h4>
<p>Also, you can try out <em>Black</em> online for minimal fuss on the
<a class="reference external" href="https://black.vercel.app">Black Playground</a> generously created by José Padilla.</p>
</section>
<section id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p><em>Black</em> can be installed by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black</span></code>. It requires Python 3.6.2+ to
run, but can format Python 2 code too. Python 2 support needs the <code class="docutils literal notranslate"><span class="pre">typed_ast</span></code>
dependency, which be installed with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black[python2]</span></code>. If you want to format
Jupyter Notebooks, install with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black[jupyter]</span></code>.</p>
<p>If you can’t wait for the latest <em>hotness</em> and want to install from GitHub, use:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+git://github.com/psf/black</span></code></p>
</section>
<section id="basic-usage">
<h4>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h4>
<p>To get started right away with sensible defaults:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>black <span class="o">{</span>source_file_or_directory<span class="o">}</span>...
</pre></div>
</div>
<p>You can run <em>Black</em> as a package if running it as a script doesn’t work:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m black <span class="o">{</span>source_file_or_directory<span class="o">}</span>...
</pre></div>
</div>
</section>
<section id="next-steps">
<h4>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h4>
<p>Took a look at <a class="reference internal" href="index.html#document-the_black_code_style/current_style"><span class="doc std std-doc">the <em>Black</em> code style</span></a> and
tried out <em>Black</em>? Fantastic, you’re ready for more. Why not explore some more on using
<em>Black</em> by reading
<a class="reference internal" href="index.html#document-usage_and_configuration/the_basics"><span class="doc std std-doc">Usage and Configuration: The basics</span></a>.
Alternatively, you can check out the
<a class="reference internal" href="index.html#document-guides/introducing_black_to_your_project"><span class="doc std std-doc">Introducing <em>Black</em> to your project</span></a>
guide.</p>
</section>
</section>
<span id="document-usage_and_configuration/index"></span><section id="usage-and-configuration">
<h3>Usage and Configuration<a class="headerlink" href="#usage-and-configuration" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-usage_and_configuration/the_basics"></span><section class="tex2jax_ignore mathjax_ignore" id="the-basics">
<h4>The basics<a class="headerlink" href="#the-basics" title="Permalink to this headline">¶</a></h4>
<p>Foundational knowledge on using and configuring Black.</p>
<p><em>Black</em> is a well-behaved Unix-style command-line tool:</p>
<ul class="simple">
<li><p>it does nothing if no sources are passed to it;</p></li>
<li><p>it will read from standard input and write to standard output if <code class="docutils literal notranslate"><span class="pre">-</span></code> is used as the
filename;</p></li>
<li><p>it only outputs messages to users on standard error;</p></li>
<li><p>exits with code 0 unless an internal error occurred (or <code class="docutils literal notranslate"><span class="pre">--check</span></code> was used).</p></li>
</ul>
<section id="usage">
<h5>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h5>
<p>To get started right away with sensible defaults:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>black <span class="o">{</span>source_file_or_directory<span class="o">}</span>
</pre></div>
</div>
<p>You can run <em>Black</em> as a package if running it as a script doesn’t work:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m black <span class="o">{</span>source_file_or_directory<span class="o">}</span>
</pre></div>
</div>
<section id="command-line-options">
<h6>Command line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> has quite a few knobs these days, although <em>Black</em> is opinionated so style
configuration options are deliberately limited and rarely added. You can list them by
running <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">--help</span></code>.</p>
<details>
<summary>Help output</summary>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage: black [OPTIONS] SRC ...

  The uncompromising code formatter.

Options:
  -c, --code TEXT                 Format the code passed in as a string.
  -l, --line-length INTEGER       How many characters per line to allow.
                                  [default: 88]
  -t, --target-version [py27|py33|py34|py35|py36|py37|py38|py39|py310]
                                  Python versions that should be supported by
                                  Black&#39;s output. [default: per-file auto-
                                  detection]
  --pyi                           Format all input files like typing stubs
                                  regardless of file extension (useful when
                                  piping source on standard input).
  --ipynb                         Format all input files like Jupyter
                                  Notebooks regardless of file extension
                                  (useful when piping source on standard
                                  input).
  -S, --skip-string-normalization
                                  Don&#39;t normalize string quotes or prefixes.
  -C, --skip-magic-trailing-comma
                                  Don&#39;t use trailing commas as a reason to
                                  split lines.
  --check                         Don&#39;t write the files back, just return the
                                  status. Return code 0 means nothing would
                                  change. Return code 1 means some files would
                                  be reformatted. Return code 123 means there
                                  was an internal error.
  --diff                          Don&#39;t write the files back, just output a
                                  diff for each file on stdout.
  --color / --no-color            Show colored diff. Only applies when
                                  `--diff` is given.
  --fast / --safe                 If --fast given, skip temporary sanity
                                  checks. [default: --safe]
  --required-version TEXT         Require a specific version of Black to be
                                  running (useful for unifying results across
                                  many environments e.g. with a pyproject.toml
                                  file).
  --include TEXT                  A regular expression that matches files and
                                  directories that should be included on
                                  recursive searches. An empty value means all
                                  files are included regardless of the name.
                                  Use forward slashes for directories on all
                                  platforms (Windows, too). Exclusions are
                                  calculated first, inclusions later.
                                  [default: \.pyi?$]
  --exclude TEXT                  A regular expression that matches files and
                                  directories that should be excluded on
                                  recursive searches. An empty value means no
                                  paths are excluded. Use forward slashes for
                                  directories on all platforms (Windows, too).
                                  Exclusions are calculated first, inclusions
                                  later. [default: /(\.direnv|\.eggs|\.git|\.h
                                  g|\.mypy_cache|\.nox|\.tox|\.venv|venv|\.svn
                                  |_build|buck-out|build|dist)/]
  --extend-exclude TEXT           Like --exclude, but adds additional files
                                  and directories on top of the excluded ones.
                                  (Useful if you simply want to add to the
                                  default)
  --force-exclude TEXT            Like --exclude, but files and directories
                                  matching this regex will be excluded even
                                  when they are passed explicitly as
                                  arguments.
  --stdin-filename TEXT           The name of the file when passing it through
                                  stdin. Useful to make sure Black will
                                  respect --force-exclude option on some
                                  editors that rely on using stdin.
  -W, --workers INTEGER RANGE     Number of parallel workers  [default: 2;
                                  x&gt;=1]
  -q, --quiet                     Don&#39;t emit non-error messages to stderr.
                                  Errors are still emitted; silence those with
                                  2&gt;/dev/null.
  -v, --verbose                   Also emit messages to stderr about files
                                  that were not changed or were ignored due to
                                  exclusion patterns.
  --version                       Show the version and exit.
  --config FILE                   Read configuration from FILE path.
  -h, --help                      Show this message and exit.
</pre></div>
</div>
</details>
</section>
<section id="code-input-alternatives">
<h6>Code input alternatives<a class="headerlink" href="#code-input-alternatives" title="Permalink to this headline">¶</a></h6>
<section id="standard-input">
<h7>Standard Input<a class="headerlink" href="#standard-input" title="Permalink to this headline">¶</a></h7>
<p><em>Black</em> supports formatting code via stdin, with the result being printed to stdout.
Just let <em>Black</em> know with <code class="docutils literal notranslate"><span class="pre">-</span></code> as the path.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span> <span class="s2">&quot;print ( &#39;hello, world&#39; )&quot;</span> <span class="p">|</span> black -
<span class="go">print(&quot;hello, world&quot;)</span>
<span class="go">reformatted -</span>
<span class="go">All done! ✨ 🍰 ✨</span>
<span class="go">1 file reformatted.</span>
</pre></div>
</div>
<p><strong>Tip:</strong> if you need <em>Black</em> to treat stdin input as a file passed directly via the CLI,
use <code class="docutils literal notranslate"><span class="pre">--stdin-filename</span></code>. Useful to make sure <em>Black</em> will respect the <code class="docutils literal notranslate"><span class="pre">--force-exclude</span></code>
option on some editors that rely on using stdin.</p>
</section>
<section id="as-a-string">
<h7>As a string<a class="headerlink" href="#as-a-string" title="Permalink to this headline">¶</a></h7>
<p>You can also pass code as a string using the <code class="docutils literal notranslate"><span class="pre">-c</span></code> / <code class="docutils literal notranslate"><span class="pre">--code</span></code> option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --code <span class="s2">&quot;print ( &#39;hello, world&#39; )&quot;</span>
<span class="go">print(&quot;hello, world&quot;)</span>
</pre></div>
</div>
</section>
</section>
<section id="writeback-and-reporting">
<h6>Writeback and reporting<a class="headerlink" href="#writeback-and-reporting" title="Permalink to this headline">¶</a></h6>
<p>By default <em>Black</em> reformats the files given and/or found in place. Sometimes you need
<em>Black</em> to just tell you what it <em>would</em> do without actually rewriting the Python files.</p>
<p>There’s two variations to this mode that are independently enabled by their respective
flags. Both variations can be enabled at once.</p>
<section id="exit-code">
<h7>Exit code<a class="headerlink" href="#exit-code" title="Permalink to this headline">¶</a></h7>
<p>Passing <code class="docutils literal notranslate"><span class="pre">--check</span></code> will make <em>Black</em> exit with:</p>
<ul class="simple">
<li><p>code 0 if nothing would change;</p></li>
<li><p>code 1 if some files would be reformatted; or</p></li>
<li><p>code 123 if there was an internal error</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black test.py --check
<span class="go">All done! ✨ 🍰 ✨</span>
<span class="go">1 file would be left unchanged.</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">0</span>

<span class="gp">$ </span>black test.py --check
<span class="go">would reformat test.py</span>
<span class="go">Oh no! 💥 💔 💥</span>
<span class="go">1 file would be reformatted.</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">1</span>

<span class="gp">$ </span>black test.py --check
<span class="go">error: cannot format test.py: INTERNAL ERROR: Black produced code that is not equivalent to the source.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /tmp/blk_kjdr1oog.log</span>
<span class="go">Oh no! 💥 💔 💥</span>
<span class="go">1 file would fail to reformat.</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">123</span>
</pre></div>
</div>
</section>
<section id="diffs">
<h7>Diffs<a class="headerlink" href="#diffs" title="Permalink to this headline">¶</a></h7>
<p>Passing <code class="docutils literal notranslate"><span class="pre">--diff</span></code> will make <em>Black</em> print out diffs that indicate what changes <em>Black</em>
would’ve made. They are printed to stdout so capturing them is simple.</p>
<p>If you’d like colored diffs, you can enable them with the <code class="docutils literal notranslate"><span class="pre">--color</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black test.py --diff
<span class="go">--- test.py     2021-03-08 22:23:40.848954 +0000</span>
<span class="go">+++ test.py     2021-03-08 22:23:47.126319 +0000</span>
<span class="go">@@ -1 +1 @@</span>
<span class="go">-print ( &#39;hello, world&#39; )</span>
<span class="go">+print(&quot;hello, world&quot;)</span>
<span class="go">would reformat test.py</span>
<span class="go">All done! ✨ 🍰 ✨</span>
<span class="go">1 file would be reformatted.</span>
</pre></div>
</div>
</section>
</section>
<section id="output-verbosity">
<h6>Output verbosity<a class="headerlink" href="#output-verbosity" title="Permalink to this headline">¶</a></h6>
<p><em>Black</em> in general tries to produce the right amount of output, balancing between
usefulness and conciseness. By default, <em>Black</em> emits files modified and error messages,
plus a short summary.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black src/
<span class="go">error: cannot format src/black_primer/cli.py: Cannot parse: 5:6: mport asyncio</span>
<span class="go">reformatted src/black_primer/lib.py</span>
<span class="go">reformatted src/blackd/__init__.py</span>
<span class="go">reformatted src/black/__init__.py</span>
<span class="go">Oh no! 💥 💔 💥</span>
<span class="go">3 files reformatted, 2 files left unchanged, 1 file failed to reformat.</span>
</pre></div>
</div>
<p>Passing <code class="docutils literal notranslate"><span class="pre">-v</span></code> / <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> will cause <em>Black</em> to also emit messages about files that
were not changed or were ignored due to exclusion patterns. If <em>Black</em> is using a
configuration file, a blue message detailing which one it is using will be emitted.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black src/ -v
<span class="go">Using configuration from /tmp/pyproject.toml.</span>
<span class="go">src/blib2to3 ignored: matches the --extend-exclude regular expression</span>
<span class="go">src/_black_version.py wasn&#39;t modified on disk since last run.</span>
<span class="go">src/black/__main__.py wasn&#39;t modified on disk since last run.</span>
<span class="go">error: cannot format src/black_primer/cli.py: Cannot parse: 5:6: mport asyncio</span>
<span class="go">reformatted src/black_primer/lib.py</span>
<span class="go">reformatted src/blackd/__init__.py</span>
<span class="go">reformatted src/black/__init__.py</span>
<span class="go">Oh no! 💥 💔 💥</span>
<span class="go">3 files reformatted, 2 files left unchanged, 1 file failed to reformat</span>
</pre></div>
</div>
<p>Passing <code class="docutils literal notranslate"><span class="pre">-q</span></code> / <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> will cause <em>Black</em> to stop emitting all non-critial output.
Error messages will still be emitted (which can silenced by <code class="docutils literal notranslate"><span class="pre">2&gt;/dev/null</span></code>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black src/ -q
<span class="go">error: cannot format src/black_primer/cli.py: Cannot parse: 5:6: mport asyncio</span>
</pre></div>
</div>
</section>
<section id="versions">
<h6>Versions<a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h6>
<p>You can check the version of <em>Black</em> you have installed using the <code class="docutils literal notranslate"><span class="pre">--version</span></code> flag.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --version
<span class="go">black, version 21.12b0</span>
</pre></div>
</div>
<p>An option to require a specific version to be running is also provided.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --required-version <span class="m">21</span>.9b0 -c <span class="s2">&quot;format = &#39;this&#39;&quot;</span>
<span class="go">format = &quot;this&quot;</span>
<span class="gp">$ </span>black --required-version <span class="m">31</span>.5b2 -c <span class="s2">&quot;still = &#39;beta?!&#39;&quot;</span>
<span class="go">Oh no! 💥 💔 💥 The required version does not match the running version!</span>
</pre></div>
</div>
<p>This is useful for example when running <em>Black</em> in multiple environments that haven’t
necessarily installed the correct version. This option can be set in a configuration
file for consistent results across environments.</p>
</section>
</section>
<section id="configuration-via-a-file">
<h5>Configuration via a file<a class="headerlink" href="#configuration-via-a-file" title="Permalink to this headline">¶</a></h5>
<p><em>Black</em> is able to read project-specific default values for its command line options
from a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. This is especially useful for specifying custom
<code class="docutils literal notranslate"><span class="pre">--include</span></code> and <code class="docutils literal notranslate"><span class="pre">--exclude</span></code>/<code class="docutils literal notranslate"><span class="pre">--force-exclude</span></code>/<code class="docutils literal notranslate"><span class="pre">--extend-exclude</span></code> patterns for your
project.</p>
<p><strong>Pro-tip</strong>: If you’re asking yourself “Do I need to configure anything?” the answer is
“No”. <em>Black</em> is all about sensible defaults. Applying those defaults will have your
code in compliance with many other <em>Black</em> formatted projects.</p>
<section id="what-on-earth-is-a-pyproject-toml-file">
<h6>What on Earth is a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file?<a class="headerlink" href="#what-on-earth-is-a-pyproject-toml-file" title="Permalink to this headline">¶</a></h6>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0518/">PEP 518</a> defines <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> as a
configuration file to store build system requirements for Python projects. With the help
of tools like <a class="reference external" href="https://python-poetry.org/">Poetry</a> or
<a class="reference external" href="https://flit.readthedocs.io/en/latest/">Flit</a> it can fully replace the need for
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> and <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files.</p>
</section>
<section id="where-black-looks-for-the-file">
<h6>Where <em>Black</em> looks for the file<a class="headerlink" href="#where-black-looks-for-the-file" title="Permalink to this headline">¶</a></h6>
<p>By default <em>Black</em> looks for <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> starting from the common base directory of
all files and directories passed on the command line. If it’s not there, it looks in
parent directories. It stops looking when it finds the file, or a <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory, or a
<code class="docutils literal notranslate"><span class="pre">.hg</span></code> directory, or the root of the file system, whichever comes first.</p>
<p>If you’re formatting standard input, <em>Black</em> will look for configuration starting from
the current working directory.</p>
<p>You can use a “global” configuration, stored in a specific location in your home
directory. This will be used as a fallback configuration, that is, it will be used if
and only if <em>Black</em> doesn’t find any configuration as mentioned above. Depending on your
operating system, this configuration file should be stored as:</p>
<ul class="simple">
<li><p>Windows: <code class="docutils literal notranslate"><span class="pre">~\.black</span></code></p></li>
<li><p>Unix-like (Linux, MacOS, etc.): <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/black</span></code> (<code class="docutils literal notranslate"><span class="pre">~/.config/black</span></code> if the
<code class="docutils literal notranslate"><span class="pre">XDG_CONFIG_HOME</span></code> environment variable is not set)</p></li>
</ul>
<p>Note that these are paths to the TOML file itself (meaning that they shouldn’t be named
as <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>), not directories where you store the configuration. Here, <code class="docutils literal notranslate"><span class="pre">~</span></code>
refers to the path to your home directory. On Windows, this will be something like
<code class="docutils literal notranslate"><span class="pre">C:\\Users\UserName</span></code>.</p>
<p>You can also explicitly specify the path to a particular file that you want with
<code class="docutils literal notranslate"><span class="pre">--config</span></code>. In this situation <em>Black</em> will not look for any other file.</p>
<p>If you’re running with <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>, you will see a blue message if a file was found and
used.</p>
<p>Please note <code class="docutils literal notranslate"><span class="pre">blackd</span></code> will not use <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> configuration.</p>
</section>
<section id="configuration-format">
<h6>Configuration format<a class="headerlink" href="#configuration-format" title="Permalink to this headline">¶</a></h6>
<p>As the file extension suggests, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a
<a class="reference external" href="https://github.com/toml-lang/toml">TOML</a> file. It contains separate sections for
different tools. <em>Black</em> is using the <code class="docutils literal notranslate"><span class="pre">[tool.black]</span></code> section. The option keys are the
same as long names of options on the command line.</p>
<p>Note that you have to use single-quoted strings in TOML for regular expressions. It’s
the equivalent of r-strings in Python. Multiline strings are treated as verbose regular
expressions by Black. Use <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> to denote a significant space character.</p>
<details>
<summary>Example <code>pyproject.toml</code></summary>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.black]</span>
<span class="n">line-length</span> <span class="o">=</span> <span class="mi">88</span>
<span class="n">target-version</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;py37&#39;</span><span class="p">]</span>
<span class="n">include</span> <span class="o">=</span> <span class="s">&#39;\.pyi?$&#39;</span>
<span class="n">extend-exclude</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span>
<span class="s"># A regex preceded with ^/ will apply only to files and directories</span>
<span class="s"># in the root of the project.</span>
<span class="s">^/foo.py  # exclude a file named foo.py in the root of the project (in addition to the defaults)</span>
<span class="s">&#39;&#39;&#39;</span>
</pre></div>
</div>
</details>
</section>
<section id="lookup-hierarchy">
<h6>Lookup hierarchy<a class="headerlink" href="#lookup-hierarchy" title="Permalink to this headline">¶</a></h6>
<p>Command-line options have defaults that you can see in <code class="docutils literal notranslate"><span class="pre">--help</span></code>. A <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> can
override those defaults. Finally, options provided by the user on the command line
override both.</p>
<p><em>Black</em> will only ever use one <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file during an entire run. It doesn’t
look for multiple files, and doesn’t compose configuration from different levels of the
file hierarchy.</p>
</section>
</section>
<section id="next-steps">
<h5>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h5>
<p>You’ve probably noted that not all of the options you can pass to <em>Black</em> have been
covered. Don’t worry, the rest will be covered in a later section.</p>
<p>A good next step would be configuring auto-discovery so <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">.</span></code> is all you need
instead of laborously listing every file or directory. You can get started by heading
over to <a class="reference internal" href="index.html#document-usage_and_configuration/file_collection_and_discovery"><span class="doc std std-doc">File collection and discovery</span></a>.</p>
<p>Another good choice would be setting up an
<a class="reference internal" href="index.html#document-integrations/editors"><span class="doc std std-doc">integration with your editor</span></a> of choice or with
<a class="reference internal" href="index.html#document-integrations/source_version_control"><span class="doc std std-doc">pre-commit for source version control</span></a>.</p>
</section>
</section>
<span id="document-usage_and_configuration/file_collection_and_discovery"></span><section class="tex2jax_ignore mathjax_ignore" id="file-collection-and-discovery">
<h4>File collection and discovery<a class="headerlink" href="#file-collection-and-discovery" title="Permalink to this headline">¶</a></h4>
<p>You can directly pass <em>Black</em> files, but you can also pass directories and <em>Black</em> will
walk them, collecting files to format. It determines what files to format or skip
automatically using the inclusion and exclusion regexes and as well their modification
time.</p>
<section id="ignoring-unmodified-files">
<h5>Ignoring unmodified files<a class="headerlink" href="#ignoring-unmodified-files" title="Permalink to this headline">¶</a></h5>
<p><em>Black</em> remembers files it has already formatted, unless the <code class="docutils literal notranslate"><span class="pre">--diff</span></code> flag is used or
code is passed via standard input. This information is stored per-user. The exact
location of the file depends on the <em>Black</em> version and the system on which <em>Black</em> is
run. The file is non-portable. The standard location on common operating systems is:</p>
<ul class="simple">
<li><p>Windows:
<code class="docutils literal notranslate"><span class="pre">C:\\Users\&lt;username&gt;\AppData\Local\black\black\Cache\&lt;version&gt;\cache.&lt;line-length&gt;.&lt;file-mode&gt;.pickle</span></code></p></li>
<li><p>macOS:
<code class="docutils literal notranslate"><span class="pre">/Users/&lt;username&gt;/Library/Caches/black/&lt;version&gt;/cache.&lt;line-length&gt;.&lt;file-mode&gt;.pickle</span></code></p></li>
<li><p>Linux:
<code class="docutils literal notranslate"><span class="pre">/home/&lt;username&gt;/.cache/black/&lt;version&gt;/cache.&lt;line-length&gt;.&lt;file-mode&gt;.pickle</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">file-mode</span></code> is an int flag that determines whether the file was formatted as 3.6+ only,
as .pyi, and whether string normalization was omitted.</p>
<p>To override the location of these files on macOS or Linux, set the environment variable
<code class="docutils literal notranslate"><span class="pre">XDG_CACHE_HOME</span></code> to your preferred location. For example, if you want to put the cache
in the directory you’re running <em>Black</em> from, set <code class="docutils literal notranslate"><span class="pre">XDG_CACHE_HOME=.cache</span></code>. <em>Black</em> will
then write the above files to <code class="docutils literal notranslate"><span class="pre">.cache/black/&lt;version&gt;/</span></code>.</p>
</section>
<section id="gitignore">
<h5>.gitignore<a class="headerlink" href="#gitignore" title="Permalink to this headline">¶</a></h5>
<p>If <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> is not set, <em>Black</em> will automatically ignore files and directories in
<code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file(s), if present.</p>
<p>If you want <em>Black</em> to continue using <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> while also configuring the exclusion
rules, please use <code class="docutils literal notranslate"><span class="pre">--extend-exclude</span></code>.</p>
</section>
</section>
<span id="document-usage_and_configuration/black_as_a_server"></span><section class="tex2jax_ignore mathjax_ignore" id="black-as-a-server-blackd">
<h4>Black as a server (blackd)<a class="headerlink" href="#black-as-a-server-blackd" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> is a small HTTP server that exposes <em>Black</em>’s functionality over a simple
protocol. The main benefit of using it is to avoid the cost of starting up a new <em>Black</em>
process every time you want to blacken a file.</p>
<section id="usage">
<h5>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> is not packaged alongside <em>Black</em> by default because it has additional
dependencies. You will need to execute <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black[d]</span></code> to install it.</p>
<p>You can start the server on the default port, binding only to the local interface by
running <code class="docutils literal notranslate"><span class="pre">blackd</span></code>. You will see a single line mentioning the server’s version, and the
host and port it’s listening on. <code class="docutils literal notranslate"><span class="pre">blackd</span></code> will then print an access log similar to most
web servers on standard output, merged with any exception traces caused by invalid
formatting requests.</p>
<p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> provides even less options than <em>Black</em>. You can see them by running
<code class="docutils literal notranslate"><span class="pre">blackd</span> <span class="pre">--help</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage: blackd [OPTIONS]

Options:
  --bind-host TEXT     Address to bind the server to.
  --bind-port INTEGER  Port to listen on
  --version            Show the version and exit.
  -h, --help           Show this message and exit.
</pre></div>
</div>
<p>There is no official <code class="docutils literal notranslate"><span class="pre">blackd</span></code> client tool (yet!). You can test that blackd is working
using <code class="docutils literal notranslate"><span class="pre">curl</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>blackd --bind-port <span class="m">9090</span> <span class="p">&amp;</span>  <span class="c1"># or let blackd choose a port</span>
curl -s -XPOST <span class="s2">&quot;localhost:9090&quot;</span> -d <span class="s2">&quot;print(&#39;valid&#39;)&quot;</span>
</pre></div>
</div>
</section>
<section id="protocol">
<h5>Protocol<a class="headerlink" href="#protocol" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> only accepts <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests at the <code class="docutils literal notranslate"><span class="pre">/</span></code> path. The body of the request should
contain the python source code to be formatted, encoded according to the <code class="docutils literal notranslate"><span class="pre">charset</span></code> field
in the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> request header. If no <code class="docutils literal notranslate"><span class="pre">charset</span></code> is specified, <code class="docutils literal notranslate"><span class="pre">blackd</span></code> assumes
<code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>.</p>
<p>There are a few HTTP headers that control how the source code is formatted. These
correspond to command line flags for <em>Black</em>. There is one exception to this:
<code class="docutils literal notranslate"><span class="pre">X-Protocol-Version</span></code> which if present, should have the value <code class="docutils literal notranslate"><span class="pre">1</span></code>, otherwise the request
is rejected with <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">501</span></code> (Not Implemented).</p>
<p>The headers controlling how source code is formatted are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">X-Line-Length</span></code>: corresponds to the <code class="docutils literal notranslate"><span class="pre">--line-length</span></code> command line flag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X-Skip-String-Normalization</span></code>: corresponds to the <code class="docutils literal notranslate"><span class="pre">--skip-string-normalization</span></code>
command line flag. If present and its value is not the empty string, no string
normalization will be performed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X-Skip-Magic-Trailing-Comma</span></code>: corresponds to the <code class="docutils literal notranslate"><span class="pre">--skip-magic-trailing-comma</span></code>
command line flag. If present and its value is not the empty string, trailing commas
will not be used as a reason to split lines.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X-Fast-Or-Safe</span></code>: if set to <code class="docutils literal notranslate"><span class="pre">fast</span></code>, <code class="docutils literal notranslate"><span class="pre">blackd</span></code> will act as <em>Black</em> does when passed the
<code class="docutils literal notranslate"><span class="pre">--fast</span></code> command line flag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X-Python-Variant</span></code>: if set to <code class="docutils literal notranslate"><span class="pre">pyi</span></code>, <code class="docutils literal notranslate"><span class="pre">blackd</span></code> will act as <em>Black</em> does when passed the
<code class="docutils literal notranslate"><span class="pre">--pyi</span></code> command line flag. Otherwise, its value must correspond to a Python version or
a set of comma-separated Python versions, optionally prefixed with <code class="docutils literal notranslate"><span class="pre">py</span></code>. For example,
to request code that is compatible with Python 3.5 and 3.6, set the header to
<code class="docutils literal notranslate"><span class="pre">py3.5,py3.6</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X-Diff</span></code>: corresponds to the <code class="docutils literal notranslate"><span class="pre">--diff</span></code> command line flag. If present, a diff of the
formats will be output.</p></li>
</ul>
<p>If any of these headers are set to invalid values, <code class="docutils literal notranslate"><span class="pre">blackd</span></code> returns a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">400</span></code> error
response, mentioning the name of the problematic header in the message body.</p>
<p>Apart from the above, <code class="docutils literal notranslate"><span class="pre">blackd</span></code> can produce the following response codes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">204</span></code>: If the input is already well-formatted. The response body is empty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">200</span></code>: If formatting was needed on the input. The response body contains the
blackened Python code, and the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header is set accordingly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">400</span></code>: If the input contains a syntax error. Details of the error are returned in
the response body.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">500</span></code>: If there was any other kind of error while trying to format the input. The
response body contains a textual representation of the error.</p></li>
</ul>
<p>The response headers include a <code class="docutils literal notranslate"><span class="pre">X-Black-Version</span></code> header containing the version of
<em>Black</em>.</p>
</section>
</section>
<span id="document-usage_and_configuration/black_docker_image"></span><section class="tex2jax_ignore mathjax_ignore" id="black-docker-image">
<h4>Black Docker image<a class="headerlink" href="#black-docker-image" title="Permalink to this headline">¶</a></h4>
<p>Official <em>Black</em> Docker images are available on Docker Hub:
https://hub.docker.com/r/pyfound/black</p>
<p><em>Black</em> images with the following tags are available:</p>
<ul class="simple">
<li><p>release numbers, e.g. <code class="docutils literal notranslate"><span class="pre">21.5b2</span></code>, <code class="docutils literal notranslate"><span class="pre">21.6b0</span></code>, <code class="docutils literal notranslate"><span class="pre">21.7b0</span></code> etc.<br />
ℹ Recommended for users who want to use a particular version of <em>Black</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest_release</span></code> - tag created when a new version of <em>Black</em> is released.<br />
ℹ Recommended for users who want to use released versions of <em>Black</em>. It maps to <a class="reference external" href="https://github.com/psf/black/releases/latest">the latest release</a>
of <em>Black</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest</span></code> - tag used for the newest image of <em>Black</em>.<br />
ℹ Recommended for users who always want to use the latest version of <em>Black</em>, even before
it is released.</p></li>
</ul>
<p>There is one more tag used for <em>Black</em> Docker images - <code class="docutils literal notranslate"><span class="pre">latest_non_release</span></code>. It is
created for all unreleased
<a class="reference external" href="https://github.com/psf/black/commits/main">commits on the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch</a>. This tag is
not meant to be used by external users.</p>
<section id="usage">
<h5>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h5>
<p>A permanent container doesn’t have to be created to use <em>Black</em> as a Docker image. It’s
enough to run <em>Black</em> commands for the chosen image denoted as <code class="docutils literal notranslate"><span class="pre">:tag</span></code>. In the below
examples, the <code class="docutils literal notranslate"><span class="pre">latest_release</span></code> tag is used. If <code class="docutils literal notranslate"><span class="pre">:tag</span></code> is omitted, the <code class="docutils literal notranslate"><span class="pre">latest</span></code> tag will
be used.</p>
<p>More about <em>Black</em> usage can be found in
<a class="reference internal" href="index.html#document-usage_and_configuration/the_basics"><span class="doc std std-doc">Usage and Configuration: The basics</span></a>.</p>
<section id="check-black-version">
<h6>Check Black version<a class="headerlink" href="#check-black-version" title="Permalink to this headline">¶</a></h6>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm pyfound/black:latest_release black --version
</pre></div>
</div>
</section>
<section id="check-code">
<h6>Check code<a class="headerlink" href="#check-code" title="Permalink to this headline">¶</a></h6>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --volume <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/src --workdir /src pyfound/black:latest_release black --check .
</pre></div>
</div>
<p><em>Remark</em>: besides <a class="reference internal" href="index.html#document-usage_and_configuration/the_basics"><span class="doc std std-doc">regular <em>Black</em> exit codes</span></a> returned by <code class="docutils literal notranslate"><span class="pre">--check</span></code>
option, <a class="reference external" href="https://docs.docker.com/engine/reference/run/#exit-status">Docker exit codes</a>
should also be considered.</p>
</section>
</section>
</section>
</div>
<p>Sometimes, running <em>Black</em> with its defaults and passing filepaths to it just won’t cut
it. Passing each file using paths will become burdensome, and maybe you would like
<em>Black</em> to not touch your files and just output diffs. And yes, you <em>can</em> tweak certain
parts of <em>Black</em>’s style, but please know that configurability in this area is
purposefully limited.</p>
<p>Using many of these more advanced features of <em>Black</em> will require some configuration.
Configuration that will either live on the command line or in a TOML configuration file.</p>
<p>This section covers features of <em>Black</em> and configuring <em>Black</em> in detail:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#document-usage_and_configuration/the_basics"><span class="doc">The basics</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-usage_and_configuration/file_collection_and_discovery"><span class="doc">File collection and discovery</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-usage_and_configuration/black_as_a_server"><span class="doc">Black as a server (blackd)</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-usage_and_configuration/black_docker_image"><span class="doc">Black Docker image</span></a></p></li>
</ul>
</section>
<span id="document-integrations/index"></span><section id="integrations">
<h3>Integrations<a class="headerlink" href="#integrations" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-integrations/editors"></span><section class="tex2jax_ignore mathjax_ignore" id="editor-integration">
<h4>Editor integration<a class="headerlink" href="#editor-integration" title="Permalink to this headline">¶</a></h4>
<section id="emacs">
<h5>Emacs<a class="headerlink" href="#emacs" title="Permalink to this headline">¶</a></h5>
<p>Options include the following:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/wbolster/emacs-python-black">wbolster/emacs-python-black</a></p></li>
<li><p><a class="reference external" href="https://github.com/pythonic-emacs/blacken">proofit404/blacken</a></p></li>
<li><p><a class="reference external" href="https://github.com/jorgenschaefer/elpy">Elpy</a>.</p></li>
</ul>
</section>
<section id="pycharm-intellij-idea">
<h5>PyCharm/IntelliJ IDEA<a class="headerlink" href="#pycharm-intellij-idea" title="Permalink to this headline">¶</a></h5>
<ol>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">black</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install black
</pre></div>
</div>
</li>
<li><p>Locate your <code class="docutils literal notranslate"><span class="pre">black</span></code> installation folder.</p>
<p>On macOS / Linux / BSD:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>which black
<span class="go">/usr/local/bin/black  # possible location</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>where black
<span class="gp">%</span>LocalAppData%<span class="se">\P</span>rograms<span class="se">\P</span>ython<span class="se">\P</span>ython36-32<span class="se">\S</span>cripts<span class="se">\b</span>lack.exe  <span class="c1"># possible location</span>
</pre></div>
</div>
<p>Note that if you are using a virtual environment detected by PyCharm, this is an
unneeded step. In this case the path to <code class="docutils literal notranslate"><span class="pre">black</span></code> is <code class="docutils literal notranslate"><span class="pre">$PyInterpreterDirectory$/black</span></code>.</p>
</li>
<li><p>Open External tools in PyCharm/IntelliJ IDEA</p>
<p>On macOS:</p>
<p><code class="docutils literal notranslate"><span class="pre">PyCharm</span> <span class="pre">-&gt;</span> <span class="pre">Preferences</span> <span class="pre">-&gt;</span> <span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span></code></p>
<p>On Windows / Linux / BSD:</p>
<p><code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">Settings</span> <span class="pre">-&gt;</span> <span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span></code></p>
</li>
<li><p>Click the + icon to add a new external tool with the following values:</p>
<ul class="simple">
<li><p>Name: Black</p></li>
<li><p>Description: Black is the uncompromising Python code formatter.</p></li>
<li><p>Program: &lt;install_location_from_step_2&gt;</p></li>
<li><p>Arguments: <code class="docutils literal notranslate"><span class="pre">&quot;$FilePath$&quot;</span></code></p></li>
</ul>
</li>
<li><p>Format the currently opened file by selecting <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">black</span></code>.</p>
<ul class="simple">
<li><p>Alternatively, you can set a keyboard shortcut by navigating to
<code class="docutils literal notranslate"><span class="pre">Preferences</span> <span class="pre">or</span> <span class="pre">Settings</span> <span class="pre">-&gt;</span> <span class="pre">Keymap</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span> <span class="pre">-</span> <span class="pre">Black</span></code>.</p></li>
</ul>
</li>
<li><p>Optionally, run <em>Black</em> on every file save:</p>
<ol class="simple">
<li><p>Make sure you have the
<a class="reference external" href="https://plugins.jetbrains.com/plugin/7177-file-watchers">File Watchers</a> plugin
installed.</p></li>
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">Preferences</span> <span class="pre">or</span> <span class="pre">Settings</span> <span class="pre">-&gt;</span> <span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">File</span> <span class="pre">Watchers</span></code> and click <code class="docutils literal notranslate"><span class="pre">+</span></code> to add a
new watcher:</p>
<ul class="simple">
<li><p>Name: Black</p></li>
<li><p>File type: Python</p></li>
<li><p>Scope: Project Files</p></li>
<li><p>Program: &lt;install_location_from_step_2&gt;</p></li>
<li><p>Arguments: <code class="docutils literal notranslate"><span class="pre">$FilePath$</span></code></p></li>
<li><p>Output paths to refresh: <code class="docutils literal notranslate"><span class="pre">$FilePath$</span></code></p></li>
<li><p>Working directory: <code class="docutils literal notranslate"><span class="pre">$ProjectFileDir$</span></code></p></li>
</ul>
</li>
</ol>
<ul class="simple">
<li><p>In Advanced Options</p>
<ul>
<li><p>Uncheck “Auto-save edited files to trigger the watcher”</p></li>
<li><p>Uncheck “Trigger the watcher on external changes”</p></li>
</ul>
</li>
</ul>
</li>
</ol>
</section>
<section id="wing-ide">
<h5>Wing IDE<a class="headerlink" href="#wing-ide" title="Permalink to this headline">¶</a></h5>
<p>Wing supports black via the OS Commands tool, as explained in the Wing documentation on
<a class="reference external" href="https://wingware.com/doc/edit/pep8">pep8 formatting</a>. The detailed procedure is:</p>
<ol>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">black</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install black
</pre></div>
</div>
</li>
<li><p>Make sure it runs from the command line, e.g.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --help
</pre></div>
</div>
</li>
<li><p>In Wing IDE, activate the <strong>OS Commands</strong> panel and define the command <strong>black</strong> to
execute black on the currently selected file:</p>
<ul class="simple">
<li><p>Use the Tools -&gt; OS Commands menu selection</p></li>
<li><p>click on <strong>+</strong> in <strong>OS Commands</strong> -&gt; New: Command line..</p>
<ul>
<li><p>Title: black</p></li>
<li><p>Command Line: black %s</p></li>
<li><p>I/O Encoding: Use Default</p></li>
<li><p>Key Binding: F1</p></li>
<li><p>[x] Raise OS Commands when executed</p></li>
<li><p>[x] Auto-save files before execution</p></li>
<li><p>[x] Line mode</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Select a file in the editor and press <strong>F1</strong> , or whatever key binding you selected
in step 3, to reformat the file.</p></li>
</ol>
</section>
<section id="vim">
<h5>Vim<a class="headerlink" href="#vim" title="Permalink to this headline">¶</a></h5>
<section id="official-plugin">
<h6>Official plugin<a class="headerlink" href="#official-plugin" title="Permalink to this headline">¶</a></h6>
<p>Commands and shortcuts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:Black</span></code> to format the entire file (ranges not supported);</p>
<ul>
<li><p>you can optionally pass <code class="docutils literal notranslate"><span class="pre">target_version=&lt;version&gt;</span></code> with the same values as in the
command line.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">:BlackUpgrade</span></code> to upgrade <em>Black</em> inside the virtualenv;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:BlackVersion</span></code> to get the current version of <em>Black</em> inside the virtualenv.</p></li>
</ul>
<p>Configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">g:black_fast</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g:black_linelength</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">88</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g:black_skip_string_normalization</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g:black_virtualenv</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">~/.vim/black</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.local/share/nvim/black</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g:black_quiet</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
</ul>
<p>To install with <a class="reference external" href="https://github.com/junegunn/vim-plug">vim-plug</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Plug</span> <span class="s1">&#39;psf/black&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;branch&#39;</span><span class="p">:</span> <span class="s1">&#39;stable&#39;</span> <span class="p">}</span>
</pre></div>
</div>
<p>or with <a class="reference external" href="https://github.com/VundleVim/Vundle.vim">Vundle</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Plugin</span> <span class="s1">&#39;psf/black&#39;</span>
</pre></div>
</div>
<p>and execute the following in a terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> ~/.vim/bundle/black
<span class="gp">$ </span>git checkout origin/stable -b stable
</pre></div>
</div>
<p>or you can copy the plugin files from
<a class="reference external" href="https://github.com/psf/black/blob/stable/plugin/black.vim">plugin/black.vim</a> and
<a class="reference external" href="https://github.com/psf/black/blob/stable/autoload/black.vim">autoload/black.vim</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~/.</span><span class="n">vim</span><span class="o">/</span><span class="n">pack</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">start</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">plugin</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~/.</span><span class="n">vim</span><span class="o">/</span><span class="n">pack</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">start</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">autoload</span>
<span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">psf</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">stable</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">black</span><span class="o">.</span><span class="n">vim</span> <span class="o">-</span><span class="n">o</span> <span class="o">~/.</span><span class="n">vim</span><span class="o">/</span><span class="n">pack</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">start</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">black</span><span class="o">.</span><span class="n">vim</span>
<span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">psf</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">stable</span><span class="o">/</span><span class="n">autoload</span><span class="o">/</span><span class="n">black</span><span class="o">.</span><span class="n">vim</span> <span class="o">-</span><span class="n">o</span> <span class="o">~/.</span><span class="n">vim</span><span class="o">/</span><span class="n">pack</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">start</span><span class="o">/</span><span class="n">black</span><span class="o">/</span><span class="n">autoload</span><span class="o">/</span><span class="n">black</span><span class="o">.</span><span class="n">vim</span>
</pre></div>
</div>
<p>Let me know if this requires any changes to work with Vim 8’s builtin <code class="docutils literal notranslate"><span class="pre">packadd</span></code>, or
Pathogen, and so on.</p>
<p>This plugin <strong>requires Vim 7.0+ built with Python 3.6+ support</strong>. It needs Python 3.6 to
be able to run <em>Black</em> inside the Vim process which is much faster than calling an
external command.</p>
<p>On first run, the plugin creates its own virtualenv using the right Python version and
automatically installs <em>Black</em>. You can upgrade it later by calling <code class="docutils literal notranslate"><span class="pre">:BlackUpgrade</span></code> and
restarting Vim.</p>
<p>If you need to do anything special to make your virtualenv work and install <em>Black</em> (for
example you want to run a version from main), create a virtualenv manually and point
<code class="docutils literal notranslate"><span class="pre">g:black_virtualenv</span></code> to it. The plugin will use it.</p>
<p>To run <em>Black</em> on save, add the following line to <code class="docutils literal notranslate"><span class="pre">.vimrc</span></code> or <code class="docutils literal notranslate"><span class="pre">init.vim</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">autocmd</span> <span class="n">BufWritePre</span> <span class="o">*.</span><span class="n">py</span> <span class="n">execute</span> <span class="s1">&#39;:Black&#39;</span>
</pre></div>
</div>
<p>To run <em>Black</em> on a key press (e.g. F9 below), add this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nnoremap</span> <span class="o">&lt;</span><span class="n">F9</span><span class="o">&gt;</span> <span class="p">:</span><span class="n">Black</span><span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>How to get Vim with Python 3.6?</strong> On Ubuntu 17.10 Vim comes with Python 3.6 by
default. On macOS with Homebrew run: <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">vim</span></code>. When building Vim from source,
use: <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--enable-python3interp=yes</span></code>. There’s many guides online how to do
this.</p>
<p><strong>I get an import error when using <em>Black</em> from a virtual environment</strong>: If you get an
error message like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 63, in &lt;module&gt;
  File &quot;/home/gui/.vim/black/lib/python3.7/site-packages/black.py&quot;, line 45, in &lt;module&gt;
    from typed_ast import ast3, ast27
  File &quot;/home/gui/.vim/black/lib/python3.7/site-packages/typed_ast/ast3.py&quot;, line 40, in &lt;module&gt;
    from typed_ast import _ast3
ImportError: /home/gui/.vim/black/lib/python3.7/site-packages/typed_ast/_ast3.cpython-37m-x86_64-linux-gnu.so: undefined symbool: PyExc_KeyboardInterrupt
</pre></div>
</div>
<p>Then you need to install <code class="docutils literal notranslate"><span class="pre">typed_ast</span></code> directly from the source code. The error happens
because <code class="docutils literal notranslate"><span class="pre">pip</span></code> will download <a class="reference external" href="https://pythonwheels.com/">Python wheels</a> if they are
available. Python wheels are a new standard of distributing Python packages and packages
that have Cython and extensions written in C are already compiled, so the installation
is much more faster. The problem here is that somehow the Python environment inside Vim
does not match with those already compiled C extensions and these kind of errors are the
result. Luckily there is an easy fix: installing the packages from the source code.</p>
<p>The package that causes problems is:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/typed-ast/">typed-ast</a></p></li>
</ul>
<p>Now remove those two packages:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip uninstall typed-ast -y
</pre></div>
</div>
<p>And now you can install them with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install --no-binary :all: typed-ast
</pre></div>
</div>
<p>The C extensions will be compiled and now Vim’s Python environment will match. Note that
you need to have the GCC compiler and the Python development files installed (on
Ubuntu/Debian do <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">build-essential</span> <span class="pre">python3-dev</span></code>).</p>
<p>If you later want to update <em>Black</em>, you should do it like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -U black --no-binary typed-ast
</pre></div>
</div>
</section>
<section id="with-ale">
<h6>With ALE<a class="headerlink" href="#with-ale" title="Permalink to this headline">¶</a></h6>
<ol>
<li><p>Install <a class="reference external" href="https://github.com/dense-analysis/ale"><code class="docutils literal notranslate"><span class="pre">ale</span></code></a></p></li>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">black</span></code></p></li>
<li><p>Add this to your vimrc:</p>
<div class="highlight-vim notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">g</span>:ale_fixers <span class="p">=</span> {}
<span class="k">let</span> <span class="k">g</span>:ale_fixers.python <span class="p">=</span> [<span class="s1">&#39;black&#39;</span>]
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="gedit">
<h5>Gedit<a class="headerlink" href="#gedit" title="Permalink to this headline">¶</a></h5>
<p>gedit is the default text editor of the GNOME, Unix like Operating Systems. Open gedit
as</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>gedit &lt;file_name&gt;
</pre></div>
</div>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Go</span> <span class="pre">to</span> <span class="pre">edit</span> <span class="pre">&gt;</span> <span class="pre">preferences</span> <span class="pre">&gt;</span> <span class="pre">plugins</span></code></p></li>
<li><p>Search for <code class="docutils literal notranslate"><span class="pre">external</span> <span class="pre">tools</span></code> and activate it.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">menu</span> <span class="pre">-&gt;</span> <span class="pre">Manage</span> <span class="pre">external</span> <span class="pre">tools</span></code></p></li>
<li><p>Add a new tool using <code class="docutils literal notranslate"><span class="pre">+</span></code> button.</p></li>
<li><p>Copy the below content to the code window.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span>!/bin/bash
<span class="go">Name=$GEDIT_CURRENT_DOCUMENT_NAME</span>
<span class="go">black $Name</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set a keyboard shortcut if you like, Ex. <code class="docutils literal notranslate"><span class="pre">ctrl-B</span></code></p></li>
<li><p>Save: <code class="docutils literal notranslate"><span class="pre">Nothing</span></code></p></li>
<li><p>Input: <code class="docutils literal notranslate"><span class="pre">Nothing</span></code></p></li>
<li><p>Output: <code class="docutils literal notranslate"><span class="pre">Display</span> <span class="pre">in</span> <span class="pre">bottom</span> <span class="pre">pane</span></code> if you like.</p></li>
<li><p>Change the name of the tool if you like.</p></li>
</ul>
<p>Use your keyboard shortcut or <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">External</span> <span class="pre">Tools</span></code> to use your new tool. When you
close and reopen your File, <em>Black</em> will be done with its job.</p>
</section>
<section id="visual-studio-code">
<h5>Visual Studio Code<a class="headerlink" href="#visual-studio-code" title="Permalink to this headline">¶</a></h5>
<p>Use the
<a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python extension</a>
(<a class="reference external" href="https://code.visualstudio.com/docs/python/editing#_formatting">instructions</a>).</p>
</section>
<section id="sublimetext-3">
<h5>SublimeText 3<a class="headerlink" href="#sublimetext-3" title="Permalink to this headline">¶</a></h5>
<p>Use <a class="reference external" href="https://github.com/jgirardet/sublack">sublack plugin</a>.</p>
</section>
<section id="python-lsp-server">
<h5>Python LSP Server<a class="headerlink" href="#python-lsp-server" title="Permalink to this headline">¶</a></h5>
<p>If your editor supports the <a class="reference external" href="https://langserver.org/">Language Server Protocol</a> (Atom,
Sublime Text, Visual Studio Code and many more), you can use the
<a class="reference external" href="https://github.com/python-lsp/python-lsp-server">Python LSP Server</a> with the
<a class="reference external" href="https://github.com/python-lsp/python-lsp-black">python-lsp-black</a> plugin.</p>
</section>
<section id="atom-nuclide">
<h5>Atom/Nuclide<a class="headerlink" href="#atom-nuclide" title="Permalink to this headline">¶</a></h5>
<p>Use <a class="reference external" href="https://atom.io/packages/python-black">python-black</a> or
<a class="reference external" href="https://atom.io/packages/formatters-python">formatters-python</a>.</p>
</section>
<section id="gradle-the-build-tool">
<h5>Gradle (the build tool)<a class="headerlink" href="#gradle-the-build-tool" title="Permalink to this headline">¶</a></h5>
<p>Use the <a class="reference external" href="https://github.com/diffplug/spotless/tree/main/plugin-gradle">Spotless</a> plugin.</p>
</section>
<section id="kakoune">
<h5>Kakoune<a class="headerlink" href="#kakoune" title="Permalink to this headline">¶</a></h5>
<p>Add the following hook to your kakrc, then run <em>Black</em> with <code class="docutils literal notranslate"><span class="pre">:format</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hook</span> <span class="k">global</span> <span class="n">WinSetOption</span> <span class="n">filetype</span><span class="o">=</span><span class="n">python</span> <span class="o">%</span><span class="p">{</span>
    <span class="nb">set</span><span class="o">-</span><span class="n">option</span> <span class="n">window</span> <span class="n">formatcmd</span> <span class="s1">&#39;black -q  -&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="thonny">
<h5>Thonny<a class="headerlink" href="#thonny" title="Permalink to this headline">¶</a></h5>
<p>Use <a class="reference external" href="https://github.com/Franccisco/thonny-black-code-format">Thonny-black-code-format</a>.</p>
</section>
</section>
<span id="document-integrations/github_actions"></span><section class="tex2jax_ignore mathjax_ignore" id="github-actions-integration">
<h4>GitHub Actions integration<a class="headerlink" href="#github-actions-integration" title="Permalink to this headline">¶</a></h4>
<p>You can use <em>Black</em> within a GitHub Actions workflow without setting your own Python
environment. Great for enforcing that your code matches the <em>Black</em> code style.</p>
<section id="compatibility">
<h5>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h5>
<p>This action is known to support all GitHub-hosted runner OSes. In addition, only
published versions of <em>Black</em> are supported (i.e. whatever is available on PyPI).</p>
<p>Finally, this action installs <em>Black</em> with both the <code class="docutils literal notranslate"><span class="pre">colorama</span></code> and <code class="docutils literal notranslate"><span class="pre">python2</span></code> extras so
the <code class="docutils literal notranslate"><span class="pre">--color</span></code> flag and formatting Python 2 code are supported.</p>
</section>
<section id="usage">
<h5>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h5>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">.github/workflows/black.yml</span></code> inside your repository with:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Lint</span>

<span class="nt">on</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">,</span> <span class="nv">pull_request</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
  <span class="nt">lint</span><span class="p">:</span>
    <span class="nt">runs-on</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class="nt">steps</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span>
      <span class="p p-Indicator">-</span> <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">psf/black@stable</span>
</pre></div>
</div>
<p>We recommend the use of the <code class="docutils literal notranslate"><span class="pre">&#64;stable</span></code> tag, but per version tags also exist if you prefer
that. Note that the action’s version you select is independent of the version of <em>Black</em>
the action will use.</p>
<p>The version of <em>Black</em> the action will use can be configured via <code class="docutils literal notranslate"><span class="pre">version</span></code>. The action
defaults to the latest release available on PyPI. Only versions available from PyPI are
supported, so no commit SHAs or branch names.</p>
<p>You can also configure the arguments passed to <em>Black</em> via <code class="docutils literal notranslate"><span class="pre">options</span></code> (defaults to
<code class="docutils literal notranslate"><span class="pre">'--check</span> <span class="pre">--diff'</span></code>) and <code class="docutils literal notranslate"><span class="pre">src</span></code> (default is <code class="docutils literal notranslate"><span class="pre">'.'</span></code>)</p>
<p>Here’s an example configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">uses</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">psf/black@stable</span>
  <span class="nt">with</span><span class="p">:</span>
    <span class="nt">options</span><span class="p">:</span> <span class="s">&quot;--check</span><span class="nv"> </span><span class="s">--verbose&quot;</span>
    <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;./src&quot;</span>
    <span class="nt">version</span><span class="p">:</span> <span class="s">&quot;21.5b1&quot;</span>
</pre></div>
</div>
</section>
</section>
<span id="document-integrations/source_version_control"></span><section class="tex2jax_ignore mathjax_ignore" id="version-control-integration">
<h4>Version control integration<a class="headerlink" href="#version-control-integration" title="Permalink to this headline">¶</a></h4>
<p>Use <a class="reference external" href="https://pre-commit.com/">pre-commit</a>. Once you
<a class="reference external" href="https://pre-commit.com/#install">have it installed</a>, add this to the
<code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> in your repository:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">repos</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">repo</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/psf/black</span>
    <span class="nt">rev</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">21.12b0</span>
    <span class="nt">hooks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">black</span>
        <span class="c1"># It is recommended to specify the latest version of Python</span>
        <span class="c1"># supported by your project here, or alternatively use</span>
        <span class="c1"># pre-commit&#39;s default_language_version, see</span>
        <span class="c1"># https://pre-commit.com/#top_level-default_language_version</span>
        <span class="nt">language_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python3.9</span>
</pre></div>
</div>
<p>Feel free to switch out the <code class="docutils literal notranslate"><span class="pre">rev</span></code> value to something else, like another
<a class="reference external" href="https://github.com/psf/black/tags">tag/version</a> or even a specific commit. Although we discourage the use of
branches or other mutable refs since the hook <a class="reference external" href="https://pre-commit.com/#using-the-latest-version-for-a-repository">won’t auto update as you may
expect</a>.</p>
<p>If you want support for Jupyter Notebooks as well, then replace <code class="docutils literal notranslate"><span class="pre">id:</span> <span class="pre">black</span></code> with
<code class="docutils literal notranslate"><span class="pre">id:</span> <span class="pre">black-jupyter</span></code> (though note that it’s only available from version <code class="docutils literal notranslate"><span class="pre">21.8b0</span></code>
onwards).</p>
</section>
</div>
<p><em>Black</em> can be integrated into many environments, providing a better and smoother experience. Documentation for integrating <em>Black</em> with a tool can be found for the
following areas:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#document-integrations/editors"><span class="doc">Editor / IDE</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-integrations/github_actions"><span class="doc">GitHub Actions</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-integrations/source_version_control"><span class="doc">Source version control</span></a></p></li>
</ul>
<p>Editors and tools not listed will require external contributions.</p>
<p>Patches welcome! ✨ 🍰 ✨</p>
<p>Any tool can pipe code through <em>Black</em> using its stdio mode (just
<a class="reference external" href="https://www.tldp.org/LDP/abs/html/special-chars.html#DASHREF2">use `-` as the file name</a>).
The formatted code will be returned on stdout (unless <code class="docutils literal notranslate"><span class="pre">--check</span></code> was passed). <em>Black</em>
will still emit messages on stderr but that shouldn’t affect your use case.</p>
<p>This can be used for example with PyCharm’s or IntelliJ’s
<a class="reference external" href="https://www.jetbrains.com/help/pycharm/file-watchers.html">File Watchers</a>.</p>
</section>
<span id="document-guides/index"></span><section id="guides">
<h3>Guides<a class="headerlink" href="#guides" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-guides/introducing_black_to_your_project"></span><section class="tex2jax_ignore mathjax_ignore" id="introducing-black-to-your-project">
<h4>Introducing <em>Black</em> to your project<a class="headerlink" href="#introducing-black-to-your-project" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide is incomplete. Contributions are welcomed and would be deeply
appreciated!</p>
</div>
<section id="avoiding-ruining-git-blame">
<h5>Avoiding ruining git blame<a class="headerlink" href="#avoiding-ruining-git-blame" title="Permalink to this headline">¶</a></h5>
<p>A long-standing argument against moving to automated code formatters like <em>Black</em> is
that the migration will clutter up the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code>. This was a valid argument,
but since Git version 2.23, Git natively supports
<a class="reference external" href="https://git-scm.com/docs/git-blame#Documentation/git-blame.txt---ignore-revltrevgt">ignoring revisions in blame</a>
with the <code class="docutils literal notranslate"><span class="pre">--ignore-rev</span></code> option. You can also pass a file listing the revisions to ignore
using the <code class="docutils literal notranslate"><span class="pre">--ignore-revs-file</span></code> option. The changes made by the revision will be ignored
when assigning blame. Lines modified by an ignored revision will be blamed on the
previous revision that modified those lines.</p>
<p>So when migrating your project’s code style to <em>Black</em>, reformat everything and commit
the changes (preferably in one massive commit). Then put the full 40 characters commit
identifier(s) into a file.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Migrate code style to Black
5b4ab991dede475d393e9d69ec388fd6bd949699
</pre></div>
</div>
<p>Afterwards, you can pass that file to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code> and see clean and meaningful blame
information.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git blame important.py --ignore-revs-file .git-blame-ignore-revs
<span class="go">7a1ae265 (John Smith 2019-04-15 15:55:13 -0400 1) def very_important_function(text, file):</span>
<span class="go">abdfd8b0 (Alice Doe  2019-09-23 11:39:32 -0400 2)     text = text.lstrip()</span>
<span class="go">7a1ae265 (John Smith 2019-04-15 15:55:13 -0400 3)     with open(file, &quot;r+&quot;) as f:</span>
<span class="go">7a1ae265 (John Smith 2019-04-15 15:55:13 -0400 4)         f.write(formatted)</span>
</pre></div>
</div>
<p>You can even configure <code class="docutils literal notranslate"><span class="pre">git</span></code> to automatically ignore revisions listed in a file on every
call to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git config blame.ignoreRevsFile .git-blame-ignore-revs
</pre></div>
</div>
<p><strong>The one caveat is that GitHub and GitLab do not yet support ignoring revisions using
their native UI of blame.</strong> So blame information will be cluttered with a reformatting
commit on those platforms. (If you’d like this feature, there’s an open issue for
<a class="reference external" href="https://gitlab.com/gitlab-org/gitlab/-/issues/31423">GitLab</a> and please let GitHub
know!)</p>
</section>
</section>
<span id="document-guides/using_black_with_other_tools"></span><section class="tex2jax_ignore mathjax_ignore" id="using-black-with-other-tools">
<h4>Using <em>Black</em> with other tools<a class="headerlink" href="#using-black-with-other-tools" title="Permalink to this headline">¶</a></h4>
<section id="black-compatible-configurations">
<h5>Black compatible configurations<a class="headerlink" href="#black-compatible-configurations" title="Permalink to this headline">¶</a></h5>
<p>All of Black’s changes are harmless (or at least, they should be), but a few do conflict
against other tools. It is not uncommon to be using other tools alongside <em>Black</em> like
linters and type checkers. Some of them need a bit of tweaking to resolve the conflicts.
Listed below are <em>Black</em> compatible configurations in various formats for the common
tools out there.</p>
<p><strong>Please note</strong> that <em>Black</em> only supports the TOML file format for its configuration
(e.g. <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>). The provided examples are to only configure their corresponding
tools, using <strong>their</strong> supported file formats.</p>
<p>Compatible configuration files can be
<a class="reference external" href="https://github.com/psf/black/blob/main/docs/compatible_configs/">found here</a>.</p>
<section id="isort">
<h6>isort<a class="headerlink" href="#isort" title="Permalink to this headline">¶</a></h6>
<p><a class="reference external" href="https://pypi.org/p/isort/">isort</a> helps to sort and format imports in your Python code.
<em>Black</em> also formats imports, but in a different way from isort’s defaults which leads
to conflicting changes.</p>
<section id="profile">
<h7>Profile<a class="headerlink" href="#profile" title="Permalink to this headline">¶</a></h7>
<p>Since version 5.0.0, isort supports
<a class="reference external" href="https://pycqa.github.io/isort/docs/configuration/profiles.html">profiles</a> to allow easy
interoperability with common code styles. You can set the black profile in any of the
<a class="reference external" href="https://pycqa.github.io/isort/docs/configuration/config_files.html">config files</a>
supported by isort. Below, an example for <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.isort]</span>
<span class="n">profile</span> <span class="o">=</span> <span class="s">&quot;black&quot;</span>
</pre></div>
</div>
</section>
<section id="custom-configuration">
<h7>Custom Configuration<a class="headerlink" href="#custom-configuration" title="Permalink to this headline">¶</a></h7>
<p>If you’re using an isort version that is older than 5.0.0 or you have some custom
configuration for <em>Black</em>, you can tweak your isort configuration to make it compatible
with <em>Black</em>. Below, an example for <code class="docutils literal notranslate"><span class="pre">.isort.cfg</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multi_line_output</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">include_trailing_comma</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">force_grid_wrap</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">use_parentheses</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">ensure_newline_before_comments</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">line_length</span> <span class="o">=</span> <span class="mi">88</span>
</pre></div>
</div>
</section>
<section id="why-those-options-above">
<h7>Why those options above?<a class="headerlink" href="#why-those-options-above" title="Permalink to this headline">¶</a></h7>
<p><em>Black</em> wraps imports that surpass <code class="docutils literal notranslate"><span class="pre">line-length</span></code> by moving identifiers into their own
indented line. If that still doesn’t fit the bill, it will put all of them in separate
lines and put a trailing comma. A more detailed explanation of this behaviour can be
<a class="reference internal" href="index.html#how-black-wraps-lines"><span class="std std-doc">found here</span></a>.</p>
<p>isort’s default mode of wrapping imports that extend past the <code class="docutils literal notranslate"><span class="pre">line_length</span></code> limit is
“Grid”.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">third_party</span> <span class="kn">import</span> <span class="p">(</span><span class="n">lib1</span><span class="p">,</span> <span class="n">lib2</span><span class="p">,</span> <span class="n">lib3</span><span class="p">,</span>
                         <span class="n">lib4</span><span class="p">,</span> <span class="n">lib5</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>This style is incompatible with <em>Black</em>, but isort can be configured to use a different
wrapping mode called “Vertical Hanging Indent” which looks like this:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">third_party</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">lib1</span><span class="p">,</span>
    <span class="n">lib2</span><span class="p">,</span>
    <span class="n">lib3</span><span class="p">,</span>
    <span class="n">lib4</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This style is <em>Black</em> compatible and can be achieved by <code class="docutils literal notranslate"><span class="pre">multi-line-output</span> <span class="pre">=</span> <span class="pre">3</span></code>. Also,
as mentioned above, when wrapping long imports <em>Black</em> puts a trailing comma and uses
parentheses. isort should follow the same behaviour and passing the options
<code class="docutils literal notranslate"><span class="pre">include_trailing_comma</span> <span class="pre">=</span> <span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">use_parentheses</span> <span class="pre">=</span> <span class="pre">True</span></code> configures that.</p>
<p>The option <code class="docutils literal notranslate"><span class="pre">force_grid_wrap</span> <span class="pre">=</span> <span class="pre">0</span></code> is just to tell isort to only wrap imports that surpass
the <code class="docutils literal notranslate"><span class="pre">line_length</span></code> limit.</p>
<p>Finally, isort should be told to wrap imports when they surpass <em>Black</em>’s default limit
of 88 characters via <code class="docutils literal notranslate"><span class="pre">line_length</span> <span class="pre">=</span> <span class="pre">88</span></code> as well as
<code class="docutils literal notranslate"><span class="pre">ensure_newline_before_comments</span> <span class="pre">=</span> <span class="pre">True</span></code> to ensure spacing import sections with comments
works the same as with <em>Black</em>.</p>
<p><strong>Please note</strong> <code class="docutils literal notranslate"><span class="pre">ensure_newline_before_comments</span> <span class="pre">=</span> <span class="pre">True</span></code> only works since isort &gt;= 5 but
does not break older versions so you can keep it if you are running previous versions.</p>
</section>
<section id="formats">
<h7>Formats<a class="headerlink" href="#formats" title="Permalink to this headline">¶</a></h7>
<details>
<summary>.isort.cfg</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[settings]</span>
<span class="na">profile</span> <span class="o">=</span> <span class="s">black</span>
</pre></div>
</div>
</details>
<details>
<summary>setup.cfg</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[isort]</span>
<span class="na">profile</span> <span class="o">=</span> <span class="s">black</span>
</pre></div>
</div>
</details>
<details>
<summary>pyproject.toml</summary>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.isort]</span>
<span class="n">profile</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span>
</pre></div>
</div>
</details>
<details>
<summary>.editorconfig</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[*.py]</span>
<span class="na">profile</span> <span class="o">=</span> <span class="s">black</span>
</pre></div>
</div>
</details>
</section>
</section>
<section id="flake8">
<h6>Flake8<a class="headerlink" href="#flake8" title="Permalink to this headline">¶</a></h6>
<p><a class="reference external" href="https://pypi.org/p/flake8/">Flake8</a> is a code linter. It warns you of syntax errors,
possible bugs, stylistic errors, etc. For the most part, Flake8 follows
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> when warning about stylistic errors.
There are a few deviations that cause incompatibilities with <em>Black</em>.</p>
<section id="configuration">
<h7>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h7>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">88</span>
<span class="n">extend</span><span class="o">-</span><span class="n">ignore</span> <span class="o">=</span> <span class="n">E203</span>
</pre></div>
</div>
</section>
<section id="id1">
<h7>Why those options above?<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h7>
<p>In some cases, as determined by PEP 8, <em>Black</em> will enforce an equal amount of
whitespace around slice operators. Due to this, Flake8 will raise
<code class="docutils literal notranslate"><span class="pre">E203</span> <span class="pre">whitespace</span> <span class="pre">before</span> <span class="pre">':'</span></code> warnings. Since this warning is not PEP 8 compliant, Flake8
should be configured to ignore it via <code class="docutils literal notranslate"><span class="pre">extend-ignore</span> <span class="pre">=</span> <span class="pre">E203</span></code>.</p>
<p>When breaking a line, <em>Black</em> will break it before a binary operator. This is compliant
with PEP 8 as of
<a class="reference external" href="https://github.com/python/peps/commit/c59c4376ad233a62ca4b3a6060c81368bd21e85b#diff-64ec08cc46db7540f18f2af46037f599">April 2016</a>.
There’s a disabled-by-default warning in Flake8 which goes against this PEP 8
recommendation called <code class="docutils literal notranslate"><span class="pre">W503</span> <span class="pre">line</span> <span class="pre">break</span> <span class="pre">before</span> <span class="pre">binary</span> <span class="pre">operator</span></code>. It should not be enabled
in your configuration.</p>
<p>Also, as like with isort, flake8 should be configured to allow lines up to the length
limit of <code class="docutils literal notranslate"><span class="pre">88</span></code>, <em>Black</em>’s default. This explains <code class="docutils literal notranslate"><span class="pre">max-line-length</span> <span class="pre">=</span> <span class="pre">88</span></code>.</p>
</section>
<section id="id2">
<h7>Formats<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h7>
<details>
<summary>.flake8</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">extend-ignore</span> <span class="o">=</span> <span class="s">E203</span>
</pre></div>
</div>
</details>
<details>
<summary>setup.cfg</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">extend-ignore</span> <span class="o">=</span> <span class="s">E203</span>
</pre></div>
</div>
</details>
<details>
<summary>tox.ini</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
<span class="na">extend-ignore</span> <span class="o">=</span> <span class="s">E203</span>
</pre></div>
</div>
</details>
</section>
</section>
<section id="pylint">
<h6>Pylint<a class="headerlink" href="#pylint" title="Permalink to this headline">¶</a></h6>
<p><a class="reference external" href="https://pypi.org/p/pylint/">Pylint</a> is also a code linter like Flake8. It has the same
checks as flake8 and more. In particular, it has more formatting checks regarding style
conventions like variable naming. With so many checks, Pylint is bound to have some
mixed feelings about <em>Black</em>’s formatting style.</p>
<section id="id3">
<h7>Configuration<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h7>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">disable</span> <span class="o">=</span> <span class="n">C0330</span><span class="p">,</span> <span class="n">C0326</span>
<span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">88</span>
</pre></div>
</div>
</section>
<section id="id4">
<h7>Why those options above?<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h7>
<p>When <em>Black</em> is folding very long expressions, the closing brackets will
<a class="reference internal" href="index.html#how-black-wraps-lines"><span class="std std-doc">be dedented</span></a>.</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="n">ImportantClass</span><span class="o">.</span><span class="n">important_method</span><span class="p">(</span>
    <span class="n">exc</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">lookup_lines</span><span class="p">,</span> <span class="n">capture_locals</span><span class="p">,</span> <span class="n">callback</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Although this style is PEP 8 compliant, Pylint will raise
<code class="docutils literal notranslate"><span class="pre">C0330:</span> <span class="pre">Wrong</span> <span class="pre">hanging</span> <span class="pre">indentation</span> <span class="pre">before</span> <span class="pre">block</span> <span class="pre">(add</span> <span class="pre">4</span> <span class="pre">spaces)</span></code> warnings. Since <em>Black</em>
isn’t configurable on this style, Pylint should be told to ignore these warnings via
<code class="docutils literal notranslate"><span class="pre">disable</span> <span class="pre">=</span> <span class="pre">C0330</span></code>.</p>
<p>Also, since <em>Black</em> deals with whitespace around operators and brackets, Pylint’s
warning <code class="docutils literal notranslate"><span class="pre">C0326:</span> <span class="pre">Bad</span> <span class="pre">whitespace</span></code> should be disabled using <code class="docutils literal notranslate"><span class="pre">disable</span> <span class="pre">=</span> <span class="pre">C0326</span></code>.</p>
<p>And as usual, Pylint should be configured to only complain about lines that surpass <code class="docutils literal notranslate"><span class="pre">88</span></code>
characters via <code class="docutils literal notranslate"><span class="pre">max-line-length</span> <span class="pre">=</span> <span class="pre">88</span></code>.</p>
</section>
<section id="id5">
<h7>Formats<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h7>
<details>
<summary>pylintrc</summary>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[MESSAGES CONTROL]</span>
<span class="na">disable</span> <span class="o">=</span> <span class="s">C0330, C0326</span>

<span class="k">[format]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>
</pre></div>
</div>
</details>
<details>
<summary>setup.cfg</summary>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="k">[pylint]</span>
<span class="na">max-line-length</span> <span class="o">=</span> <span class="s">88</span>

<span class="k">[pylint.messages_control]</span>
<span class="na">disable</span> <span class="o">=</span> <span class="s">C0330, C0326</span>
</pre></div>
</div>
</details>
<details>
<summary>pyproject.toml</summary>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pylint.messages_control]</span>
<span class="n">disable</span> <span class="o">=</span> <span class="s">&quot;C0330, C0326&quot;</span>

<span class="k">[tool.pylint.format]</span>
<span class="n">max-line-length</span> <span class="o">=</span> <span class="s">&quot;88&quot;</span>
</pre></div>
</div>
</details>
</section>
</section>
</section>
</section>
</div>
<p>Wondering how to do something specific? You’ve found the right place! Listed below
are topic specific guides available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#document-guides/introducing_black_to_your_project"><span class="doc">Introducing Black to your project</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-guides/using_black_with_other_tools"><span class="doc">Using Black with other tools</span></a></p></li>
</ul>
</section>
<span id="document-faq"></span><section class="tex2jax_ignore mathjax_ignore" id="frequently-asked-questions">
<h3>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h3>
<p>The most common questions and issues users face are aggregated to this FAQ.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#does-black-have-an-api" id="id1">Does Black have an API?</a></p></li>
<li><p><a class="reference internal" href="#is-black-safe-to-use" id="id2">Is Black safe to use?</a></p></li>
<li><p><a class="reference internal" href="#how-stable-is-black-s-style" id="id3">How stable is Black’s style?</a></p></li>
<li><p><a class="reference internal" href="#why-is-my-file-not-formatted" id="id4">Why is my file not formatted?</a></p></li>
<li><p><a class="reference internal" href="#why-is-my-jupyter-notebook-cell-not-formatted" id="id5">Why is my Jupyter Notebook cell not formatted?</a></p></li>
<li><p><a class="reference internal" href="#why-are-flake8-s-e203-and-w503-violated" id="id6">Why are Flake8’s E203 and W503 violated?</a></p></li>
<li><p><a class="reference internal" href="#does-black-support-python-2" id="id7">Does Black support Python 2?</a></p></li>
<li><p><a class="reference internal" href="#why-does-my-linter-or-typechecker-complain-after-i-format-my-code" id="id8">Why does my linter or typechecker complain after I format my code?</a></p></li>
<li><p><a class="reference internal" href="#can-i-run-black-with-pypy" id="id9">Can I run Black with PyPy?</a></p></li>
<li><p><a class="reference internal" href="#why-does-black-not-detect-syntax-errors-in-my-code" id="id10">Why does Black not detect syntax errors in my code?</a></p></li>
</ul>
</div>
<section id="does-black-have-an-api">
<h4>Does Black have an API?<a class="headerlink" href="#does-black-have-an-api" title="Permalink to this headline">¶</a></h4>
<p>Not yet. <em>Black</em> is fundamentally a command line tool. Many
<a class="reference internal" href="index.html#document-integrations/index"><span class="doc std std-doc">integrations</span></a> are provided, but a Python interface is not one
of them. A simple API is being <a class="reference external" href="https://github.com/psf/black/issues/779">planned</a>
though.</p>
</section>
<section id="is-black-safe-to-use">
<h4>Is Black safe to use?<a class="headerlink" href="#is-black-safe-to-use" title="Permalink to this headline">¶</a></h4>
<p>Yes, for the most part. <em>Black</em> is strictly about formatting, nothing else. But because
<em>Black</em> is still in <a class="reference internal" href="index.html#document-index"><span class="doc std std-doc">beta</span></a>, some edges are still a bit rough. To combat
issues, the equivalence of code after formatting is
<a class="reference internal" href="index.html#ast-before-and-after-formatting"><span class="std std-doc">checked</span></a> with
limited special cases where the code is allowed to differ. If issues are found, an error
is raised and the file is left untouched. Magical comments that influence linters and
other tools, such as <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">noqa</span></code>, may be moved by <em>Black</em>. See below for more details.</p>
</section>
<section id="how-stable-is-black-s-style">
<h4>How stable is Black’s style?<a class="headerlink" href="#how-stable-is-black-s-style" title="Permalink to this headline">¶</a></h4>
<p>Quite stable. <em>Black</em> aims to enforce one style and one style only, with some room for
pragmatism. However, <em>Black</em> is still in beta so style changes are both planned and
still proposed on the issue tracker. See
<a class="reference internal" href="index.html#document-the_black_code_style/index"><span class="doc std std-doc">The Black Code Style</span></a> for more details.</p>
<p>Starting in 2022, the formatting output will be stable for the releases made in the same
year (other than unintentional bugs). It is possible to opt-in to the latest formatting
styles, using the <code class="docutils literal notranslate"><span class="pre">--future</span></code> flag.</p>
</section>
<section id="why-is-my-file-not-formatted">
<h4>Why is my file not formatted?<a class="headerlink" href="#why-is-my-file-not-formatted" title="Permalink to this headline">¶</a></h4>
<p>Most likely because it is ignored in <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> or excluded with configuration. See
<a class="reference internal" href="index.html#document-usage_and_configuration/file_collection_and_discovery"><span class="doc std std-doc">file collection and discovery</span></a>
for details.</p>
</section>
<section id="why-is-my-jupyter-notebook-cell-not-formatted">
<h4>Why is my Jupyter Notebook cell not formatted?<a class="headerlink" href="#why-is-my-jupyter-notebook-cell-not-formatted" title="Permalink to this headline">¶</a></h4>
<p><em>Black</em> is timid about formatting Jupyter Notebooks. Cells containing any of the
following will not be formatted:</p>
<ul>
<li><p>automagics (e.g. <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black</span></code>)</p></li>
<li><p>non-Python cell magics (e.g. <code class="docutils literal notranslate"><span class="pre">%%writeline</span></code>)</p></li>
<li><p>multiline magics, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> \
        <span class="mi">2</span><span class="p">,</span> \
        <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>code which <code class="docutils literal notranslate"><span class="pre">IPython</span></code>’s <code class="docutils literal notranslate"><span class="pre">TransformerManager</span></code> would transform magics into, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;ls&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>invalid syntax, as it can’t be safely distinguished from automagics in the absence of
a running <code class="docutils literal notranslate"><span class="pre">IPython</span></code> kernel.</p></li>
</ul>
</section>
<section id="why-are-flake8-s-e203-and-w503-violated">
<h4>Why are Flake8’s E203 and W503 violated?<a class="headerlink" href="#why-are-flake8-s-e203-and-w503-violated" title="Permalink to this headline">¶</a></h4>
<p>Because they go against PEP 8. E203 falsely triggers on list
<a class="reference internal" href="index.html#slices"><span class="std std-doc">slices</span></a>, and adhering to W503 hinders
readability because operators are misaligned. Disable W503 and enable the
disabled-by-default counterpart W504. E203 should be disabled while changes are still
<a class="reference external" href="https://github.com/PyCQA/pycodestyle/issues/373">discussed</a>.</p>
</section>
<section id="does-black-support-python-2">
<h4>Does Black support Python 2?<a class="headerlink" href="#does-black-support-python-2" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Python 2 support has been deprecated since 21.10b0.</p>
<p>This support will be dropped in the first stable release, expected for January 2022.
See <a class="reference internal" href="index.html#document-the_black_code_style/index"><span class="doc std std-doc">The Black Code Style</span></a> for details.</p>
</div>
<p>For formatting, yes! <a class="reference internal" href="index.html#installation"><span class="std std-doc">Install</span></a> with the <code class="docutils literal notranslate"><span class="pre">python2</span></code> extra
to format Python 2 files too! In terms of running <em>Black</em> though, Python 3.6 or newer is
required.</p>
</section>
<section id="why-does-my-linter-or-typechecker-complain-after-i-format-my-code">
<h4>Why does my linter or typechecker complain after I format my code?<a class="headerlink" href="#why-does-my-linter-or-typechecker-complain-after-i-format-my-code" title="Permalink to this headline">¶</a></h4>
<p>Some linters and other tools use magical comments (e.g., <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">noqa</span></code>, <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore</span></code>) to
influence their behavior. While Black does its best to recognize such comments and leave
them in the right place, this detection is not and cannot be perfect. Therefore, you’ll
sometimes have to manually move these comments to the right place after you format your
codebase with <em>Black</em>.</p>
</section>
<section id="can-i-run-black-with-pypy">
<h4>Can I run Black with PyPy?<a class="headerlink" href="#can-i-run-black-with-pypy" title="Permalink to this headline">¶</a></h4>
<p>Yes, there is support for PyPy 3.7 and higher. You cannot format Python 2 files under
PyPy, because PyPy’s inbuilt ast module does not support this.</p>
</section>
<section id="why-does-black-not-detect-syntax-errors-in-my-code">
<h4>Why does Black not detect syntax errors in my code?<a class="headerlink" href="#why-does-black-not-detect-syntax-errors-in-my-code" title="Permalink to this headline">¶</a></h4>
<p><em>Black</em> is an autoformatter, not a Python linter or interpreter. Detecting all syntax
errors is not a goal. It can format all code accepted by CPython (if you find an example
where that doesn’t hold, please report a bug!), but it may also format some code that
CPython doesn’t accept.</p>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-contributing/index"></span><section id="contributing">
<h3>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-contributing/the_basics"></span><section class="tex2jax_ignore mathjax_ignore" id="the-basics">
<h4>The basics<a class="headerlink" href="#the-basics" title="Permalink to this headline">¶</a></h4>
<p>An overview on contributing to the <em>Black</em> project.</p>
<section id="technicalities">
<h5>Technicalities<a class="headerlink" href="#technicalities" title="Permalink to this headline">¶</a></h5>
<p>Development on the latest version of Python is preferred. As of this writing it’s 3.9.
You can use any operating system.</p>
<p>Install all development dependencies using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pipenv install --dev
<span class="gp">$ </span>pipenv shell
<span class="gp">$ </span>pre-commit install
</pre></div>
</div>
<p>If you haven’t used <code class="docutils literal notranslate"><span class="pre">pipenv</span></code> before but are comfortable with virtualenvs, just run
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pipenv</span></code> in the virtualenv you’re already using and invoke the command above
from the cloned <em>Black</em> repo. It will do the correct thing.</p>
<p>Non pipenv install works too:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -r test_requirements.txt
<span class="gp">$ </span>pip install -e .<span class="o">[</span>d<span class="o">]</span>
</pre></div>
</div>
<p>Before submitting pull requests, run lints and tests with the following commands from
the root of the black repo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Linting
<span class="gp">$ </span>pre-commit run -a

<span class="gp"># </span>Unit tests
<span class="gp">$ </span>tox -e py

<span class="gp"># </span>Optional Fuzz testing
<span class="gp">$ </span>tox -e fuzz

<span class="gp"># </span>Optional CI run to <span class="nb">test</span> your changes on many popular python projects
<span class="gp">$ </span>black-primer <span class="o">[</span>-k -w /tmp/black_test_repos<span class="o">]</span>
</pre></div>
</div>
<section id="news-changelog-requirement">
<h6>News / Changelog Requirement<a class="headerlink" href="#news-changelog-requirement" title="Permalink to this headline">¶</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">Black</span></code> has CI that will check for an entry corresponding to your PR in <code class="docutils literal notranslate"><span class="pre">CHANGES.md</span></code>. If
you feel this PR does not require a changelog entry please state that in a comment and a
maintainer can add a <code class="docutils literal notranslate"><span class="pre">skip</span> <span class="pre">news</span></code> label to make the CI pass. Otherwise, please ensure you
have a line in the following format:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="k">-</span> <span class="sb">`Black`</span> is now more awesome (#X)
</pre></div>
</div>
<p>Note that X should be your PR number, not issue number! To workout X, please use
<a class="reference external" href="https://ichard26.github.io/next-pr-number/?owner=psf&amp;name=black">Next PR Number</a>. This
is not perfect but saves a lot of release overhead as now the releaser does not need to
go back and workout what to add to the <code class="docutils literal notranslate"><span class="pre">CHANGES.md</span></code> for each release.</p>
</section>
<section id="style-changes">
<h6>Style Changes<a class="headerlink" href="#style-changes" title="Permalink to this headline">¶</a></h6>
<p>If a change would affect the advertised code style, please modify the documentation (The
<em>Black</em> code style) to reflect that change. Patches that fix unintended bugs in
formatting don’t need to be mentioned separately though.</p>
</section>
<section id="docs-testing">
<h6>Docs Testing<a class="headerlink" href="#docs-testing" title="Permalink to this headline">¶</a></h6>
<p>If you make changes to docs, you can test they still build locally too.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -r docs/requirements.txt
<span class="gp">$ </span>pip install <span class="o">[</span>-e<span class="o">]</span> .<span class="o">[</span>d<span class="o">]</span>
<span class="gp">$ </span>sphinx-build -a -b html -W docs/ docs/_build/
</pre></div>
</div>
</section>
</section>
<section id="black-primer">
<h5>black-primer<a class="headerlink" href="#black-primer" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">black-primer</span></code> is used by CI to pull down well-known <em>Black</em> formatted projects and see
if we get source code changes. It will error on formatting changes or errors. Please run
before pushing your PR to see if you get the actions you would expect from <em>Black</em> with
your PR. You may need to change
<a class="reference external" href="https://github.com/psf/black/blob/main/src/black_primer/primer.json">primer.json</a>
configuration for it to pass.</p>
<p>For more <code class="docutils literal notranslate"><span class="pre">black-primer</span></code> information visit the
<a class="reference internal" href="index.html#black-primer"><span class="std std-doc">documentation</span></a>.</p>
</section>
<section id="hygiene">
<h5>Hygiene<a class="headerlink" href="#hygiene" title="Permalink to this headline">¶</a></h5>
<p>If you’re fixing a bug, add a test. Run it first to confirm it fails, then fix the bug,
run it again to confirm it’s really fixed.</p>
<p>If adding a new feature, add a test. In fact, always add a test. But wait, before adding
any large feature, first open an issue for us to discuss the idea first.</p>
</section>
<section id="finally">
<h5>Finally<a class="headerlink" href="#finally" title="Permalink to this headline">¶</a></h5>
<p>Thanks again for your interest in improving the project! You’re taking action when most
people decide to sit and watch.</p>
</section>
</section>
<span id="document-contributing/gauging_changes"></span><section class="tex2jax_ignore mathjax_ignore" id="gauging-changes">
<h4>Gauging changes<a class="headerlink" href="#gauging-changes" title="Permalink to this headline">¶</a></h4>
<p>A lot of the time, your change will affect formatting and/or performance. Quantifying
these changes is hard, so we have tooling to help make it easier.</p>
<p>It’s recommended you evaluate the quantifiable changes your <em>Black</em> formatting
modification causes before submitting a PR. Think about if the change seems disruptive
enough to cause frustration to projects that are already “black formatted”.</p>
<section id="black-primer">
<h5>black-primer<a class="headerlink" href="#black-primer" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">black-primer</span></code> is a tool built for CI (and humans) to have <em>Black</em> <code class="docutils literal notranslate"><span class="pre">--check</span></code> a number of
Git accessible projects in parallel. (configured in <code class="docutils literal notranslate"><span class="pre">primer.json</span></code>) <em>(A PR will be
accepted to add Mercurial support.)</em></p>
<section id="run-flow">
<h6>Run flow<a class="headerlink" href="#run-flow" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>Ensure we have a <code class="docutils literal notranslate"><span class="pre">black</span></code> + <code class="docutils literal notranslate"><span class="pre">git</span></code> in PATH</p></li>
<li><p>Load projects from <code class="docutils literal notranslate"><span class="pre">primer.json</span></code></p></li>
<li><p>Run projects in parallel with <code class="docutils literal notranslate"><span class="pre">--worker</span></code> workers (defaults to CPU count / 2)</p>
<ul>
<li><p>Checkout projects</p></li>
<li><p>Run black and record result</p></li>
<li><p>Clean up repository checkout <em>(can optionally be disabled via <code class="docutils literal notranslate"><span class="pre">--keep</span></code>)</em></p></li>
</ul>
</li>
<li><p>Display results summary to screen</p></li>
<li><p>Default to cleaning up <code class="docutils literal notranslate"><span class="pre">--work-dir</span></code> (which defaults to tempfile schemantics)</p></li>
<li><p>Return</p>
<ul>
<li><p>0 for successful run</p></li>
<li><p>&lt; 0 for environment / internal error</p></li>
<li><p>&gt; 0 for each project with an error</p></li>
</ul>
</li>
</ul>
</section>
<section id="speed-up-runs">
<h6>Speed up runs 🏎<a class="headerlink" href="#speed-up-runs" title="Permalink to this headline">¶</a></h6>
<p>If you’re running locally yourself to test black on lots of code try:</p>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">-k</span></code> / <code class="docutils literal notranslate"><span class="pre">--keep</span></code> + <code class="docutils literal notranslate"><span class="pre">-w</span></code> / <code class="docutils literal notranslate"><span class="pre">--work-dir</span></code> so you don’t have to re-checkout the repo
each run</p></li>
</ul>
</section>
<section id="cli-arguments">
<h6>CLI arguments<a class="headerlink" href="#cli-arguments" title="Permalink to this headline">¶</a></h6>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage: black-primer [OPTIONS]

  primer - prime projects for blackening... 🏴

Options:
  -c, --config PATH      JSON config file path  [default: /home/docs/checkouts
                         /readthedocs.org/user_builds/black/envs/stable/lib/py
                         thon3.8/site-packages/black_primer/primer.json]
  --debug                Turn on debug logging  [default: False]
  -k, --keep             Keep workdir + repos post run  [default: False]
  -L, --long-checkouts   Pull big projects to test  [default: False]
  --no-diff              Disable showing source file changes in black output
                         [default: False]
  --projects TEXT        Comma separated list of projects to run  [default: ST
                         DIN,aioexabgp,attrs,bandersnatch,channels,cpython,dja
                         ngo,flake8-bugbear,hypothesis,pandas,pillow,poetry,pt
                         r,pyanalyze,pyramid,pytest,scikit-
                         lego,sqlalchemy,tox,typeshed,virtualenv,warehouse]
  -R, --rebase           Rebase project if already checked out  [default:
                         False]
  -w, --workdir PATH     Directory path for repo checkouts  [default:
                         /tmp/primer.20211206231437]
  -W, --workers INTEGER  Number of parallel worker coroutines  [default: 2]
  -h, --help             Show this message and exit.
</pre></div>
</div>
</section>
</section>
</section>
<span id="document-contributing/issue_triage"></span><section class="tex2jax_ignore mathjax_ignore" id="issue-triage">
<h4>Issue triage<a class="headerlink" href="#issue-triage" title="Permalink to this headline">¶</a></h4>
<p>Currently, <em>Black</em> uses the issue tracker for bugs, feature requests, proposed design
modifications, and general user support. Each of these issues have to be triaged so they
can be eventually be resolved somehow. This document outlines the triaging process and
also the current guidelines and recommendations.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you’re looking for a way to contribute without submitting patches, this might be
the area for you. Since <em>Black</em> is a popular project, its issue tracker is quite busy
and always needs more attention than is available. While triage isn’t the most
glamorous or technically challenging form of contribution, it’s still important.
For example, we would love to know whether that old bug report is still reproducible!</p>
<p>You can get easily started by reading over this document and then responding to issues.</p>
<p>If you contribute enough and have stayed for a long enough time, you may even be
given Triage permissions!</p>
</div>
<section id="the-basics">
<h5>The basics<a class="headerlink" href="#the-basics" title="Permalink to this headline">¶</a></h5>
<p><em>Black</em> gets a whole bunch of different issues, they range from bug reports to user
support issues. To triage is to identify, organize, and kickstart the issue’s journey
through its lifecycle to resolution.</p>
<p>More specifically, to triage an issue means to:</p>
<ul class="simple">
<li><p>identify what type and categories the issue falls under</p></li>
<li><p>confirm bugs</p></li>
<li><p>ask questions / for further information if necessary</p></li>
<li><p>link related issues</p></li>
<li><p>provide the first initial feedback / support</p></li>
</ul>
<p>Note that triage is typically the first response to an issue, so don’t fret if the issue
doesn’t make much progress after initial triage. The main goal of triaging to prepare
the issue for future more specific development or discussion, so <em>eventually</em> it will be
resolved.</p>
<p>The lifecycle of a bug report or user support issue typically goes something like this:</p>
<ol class="simple">
<li><p><em>the issue is waiting for triage</em></p></li>
<li><p><strong>identified</strong> - has been marked with a type label and other relevant labels, more
details or a functional reproduction may be still needed (and therefore should be
marked with <code class="docutils literal notranslate"><span class="pre">S:</span> <span class="pre">needs</span> <span class="pre">repro</span></code> or <code class="docutils literal notranslate"><span class="pre">S:</span> <span class="pre">awaiting</span> <span class="pre">reponse</span></code>)</p></li>
<li><p><strong>confirmed</strong> - the issue can reproduced and necessary details have been provided</p></li>
<li><p><strong>discussion</strong> - initial triage has been done and now the general details on how the
issue should be best resolved are being hashed out</p></li>
<li><p><strong>awaiting fix</strong> - no further discussion on the issue is necessary and a resolving PR
is the next step</p></li>
<li><p><strong>closed</strong> - the issue has been resolved, reasons include:</p>
<ul class="simple">
<li><p>the issue couldn’t be reproduced</p></li>
<li><p>the issue has been fixed</p></li>
<li><p>duplicate of another pre-existing issue or is invalid</p></li>
</ul>
</li>
</ol>
<p>For enhancement, documentation, and design issues, the lifecycle looks very similar but
the details are different:</p>
<ol class="simple">
<li><p><em>the issue is waiting for triage</em></p></li>
<li><p><strong>identified</strong> - has been marked with a type label and other relevant labels</p></li>
<li><p><strong>discussion</strong> - the merits of the suggested changes are currently being discussed, a
PR would be acceptable but would be at sigificant risk of being rejected</p></li>
<li><p><strong>accepted &amp; awaiting PR</strong> - it’s been determined the suggested changes are OK and a
PR would be welcomed (<code class="docutils literal notranslate"><span class="pre">S:</span> <span class="pre">accepted</span></code>)</p></li>
<li><p><strong>closed</strong>: - the issue has been resolved, reasons include:</p>
<ul class="simple">
<li><p>the suggested changes were implemented</p></li>
<li><p>it was rejected (due to technical concerns, ethos conflicts, etc.)</p></li>
<li><p>duplicate of a pre-existing issue or is invalid</p></li>
</ul>
</li>
</ol>
<p><strong>Note</strong>: documentation issues don’t use the <code class="docutils literal notranslate"><span class="pre">S:</span> <span class="pre">accepted</span></code> label currently since they’re
less likely to be rejected.</p>
</section>
<section id="labelling">
<h5>Labelling<a class="headerlink" href="#labelling" title="Permalink to this headline">¶</a></h5>
<p>We use labels to organize, track progress, and help effectively divvy up work.</p>
<p>Our labels are divided up into several groups identified by their prefix:</p>
<ul class="simple">
<li><p><strong>T - Type</strong>: the general flavor of issue / PR</p></li>
<li><p><strong>C - Category</strong>: areas of concerns, ranges from bug types to project maintenance</p></li>
<li><p><strong>F - Formatting Area</strong>: like C but for formatting specifically</p></li>
<li><p><strong>S - Status</strong>: what stage of resolution is this issue currently in?</p></li>
<li><p><strong>R - Resolution</strong>: how / why was the issue / PR resolved?</p></li>
</ul>
<p>We also have a few standalone labels:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">good</span> <span class="pre">first</span> <span class="pre">issue</span></code></strong>: issues that are beginner-friendly (and will show up in GitHub
banners for first-time visitors to the repository)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">wanted</span></code></strong>: complex issues that need and are looking for a fair bit of work as
to progress (will also show up in various GitHub pages)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">skip</span> <span class="pre">news</span></code></strong>: for PRs that are trivial and don’t need a CHANGELOG entry (and skips
the CHANGELOG entry check)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We do use labels for PRs, in particular the <code class="docutils literal notranslate"><span class="pre">skip</span> <span class="pre">news</span></code> label, but we aren’t that
rigorous about it. Just follow your judgement on what labels make sense for the
specific PR (if any even make sense).</p>
</div>
</section>
<section id="projects">
<h5>Projects<a class="headerlink" href="#projects" title="Permalink to this headline">¶</a></h5>
<p>For more general and broad goals we use projects to track work. Some may be longterm
projects with no true end (e.g. the “Amazing documentation” project) while others may be
more focused and have a definite end (like the “Getting to beta” project).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To modify GitHub Projects you need the <a class="reference external" href="https://docs.github.com/en/organizations/managing-access-to-your-organizations-repositories/repository-permission-levels-for-an-organization#repository-access-for-each-permission-level">Write repository permission level or higher</a>.</p>
</div>
</section>
<section id="closing-issues">
<h5>Closing issues<a class="headerlink" href="#closing-issues" title="Permalink to this headline">¶</a></h5>
<p>Closing an issue signifies the issue has reached the end of its life, so closing issues
should be taken with care. The following is the general recommendation for each type of
issue. Note that these are only guidelines and if your judgement says something else
it’s totally cool to go with it instead.</p>
<p>For most issues, closing the issue manually or automatically after a resolving PR is
ideal. For bug reports specifically, if the bug has already been fixed, try to check in
with the issue opener that their specific case has been resolved before closing. Note
that we close issues as soon as they’re fixed in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. This doesn’t
necessarily mean they’ve been released yet.</p>
<p>Design and enhancement issues should be also closed when it’s clear the proposed change
won’t be implemented, whether that has been determined after a lot of discussion or just
simply goes against <em>Black</em>’s ethos. If such an issue turns heated, closing and locking
is acceptable if it’s severe enough (although checking in with the core team is probably
a good idea).</p>
<p>User support issues are best closed by the author or when it’s clear the issue has been
resolved in some sort of manner.</p>
<p>Duplicates and invalid issues should always be closed since they serve no purpose and
add noise to an already busy issue tracker. Although be careful to make sure it’s truly
a duplicate and not just very similar before labelling and closing an issue as
duplicate.</p>
</section>
<section id="common-reports">
<h5>Common reports<a class="headerlink" href="#common-reports" title="Permalink to this headline">¶</a></h5>
<p>Some issues are frequently opened, like issues about <em>Black</em> formatted code causing E203
messages. Even though these issues are probably heavily duplicated, they still require
triage sucking up valuable time from other things (although they usually skip most of
their lifecycle since they’re closed on triage).</p>
<p>Here’s some of the most common issues and also pre-made responses you can use:</p>
<section id="the-trailing-comma-isn-t-being-removed-by-black">
<h6>“The trailing comma isn’t being removed by Black!”<a class="headerlink" href="#the-trailing-comma-isn-t-being-removed-by-black" title="Permalink to this headline">¶</a></h6>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Black used to remove the trailing comma if the expression fits in a single line, but this was changed by #826 and #1288. Now a trailing comma tells Black to always explode the expression. This change was made mostly for the cases where you _know_ a collection or whatever will grow in the future. Having it always exploded as one element per line reduces diff noise when adding elements. Before the &quot;magic trailing comma&quot; feature, you couldn&#39;t anticipate a collection&#39;s growth reliably since collections that fitted in one line were ruthlessly collapsed regardless of your intentions. One of Black&#39;s goals is reducing diff noise, so this was a good pragmatic change.

So no, this is not a bug, but an intended feature. Anyway, [here&#39;s the documentation](https://github.com/psf/black/blob/master/docs/the_black_code_style.md#the-magic-trailing-comma) on the &quot;magic trailing comma&quot;, including the ability to skip this functionality with the `--skip-magic-trailing-comma` option. Hopefully that helps solve the possible confusion.
</pre></div>
</div>
</section>
<section id="black-formatted-code-is-violating-flake8-s-e203">
<h6>“Black formatted code is violating Flake8’s E203!”<a class="headerlink" href="#black-formatted-code-is-violating-flake8-s-e203" title="Permalink to this headline">¶</a></h6>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Hi,

This is expected behaviour, please see the documentation regarding this case (emphasis
mine):

&gt; PEP 8 recommends to treat : in slices as a binary operator with the lowest priority, and to leave an equal amount of space on either side, **except if a parameter is omitted (e.g. ham[1 + 1 :])**. It recommends no spaces around : operators for “simple expressions” (ham[lower:upper]), and **extra space for “complex expressions” (ham[lower : upper + offset])**. **Black treats anything more than variable names as “complex” (ham[lower : upper + 1]).** It also states that for extended slices, both : operators have to have the same amount of spacing, except if a parameter is omitted (ham[1 + 1 ::]). Black enforces these rules consistently.

&gt; This behaviour may raise E203 whitespace before &#39;:&#39; warnings in style guide enforcement tools like Flake8. **Since E203 is not PEP 8 compliant, you should tell Flake8 to ignore these warnings**.

https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html#slices

Have a good day!
</pre></div>
</div>
</section>
</section>
</section>
<span id="document-contributing/release_process"></span><section class="tex2jax_ignore mathjax_ignore" id="release-process">
<h4>Release process<a class="headerlink" href="#release-process" title="Permalink to this headline">¶</a></h4>
<p><em>Black</em> has had a lot of work automating its release process. This document sets out to
explain what everything does and how to release <em>Black</em> using said automation.</p>
<section id="cutting-a-release">
<h5>Cutting a Release<a class="headerlink" href="#cutting-a-release" title="Permalink to this headline">¶</a></h5>
<p>To cut a release, you must be a <em>Black</em> maintainer with <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Release</span></code> creation
access. Using this access, the release process is:</p>
<ol class="simple">
<li><p>Cut a new PR editing <code class="docutils literal notranslate"><span class="pre">CHANGES.md</span></code> and the docs to version the latest changes</p>
<ol class="simple">
<li><p>Example PR: <a class="reference external" href="https://github.com/psf/black/pull/2616">#2616</a></p></li>
<li><p>Example title: <code class="docutils literal notranslate"><span class="pre">Update</span> <span class="pre">CHANGES.md</span> <span class="pre">for</span> <span class="pre">XX.X</span> <span class="pre">release</span></code></p></li>
</ol>
</li>
<li><p>Once the release PR is merged ensure all CI passes</p>
<ol class="simple">
<li><p>If not, ensure there is an Issue open for the cause of failing CI (generally we’d
want this fixed before cutting a release)</p></li>
</ol>
</li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">CHANGES.md</span></code> and copy the <em>raw markdown</em> of the latest changes to use in the
description of the GitHub Release.</p></li>
<li><p>Go and <a class="reference external" href="https://github.com/psf/black/releases">cut a release</a> using the GitHub UI so
that all workflows noted below are triggered.</p>
<ol class="simple">
<li><p>The release version and tag should be the <a class="reference external" href="https://calver.org">CalVer</a> version
<em>Black</em> used for the current release e.g. <code class="docutils literal notranslate"><span class="pre">21.6</span></code> / <code class="docutils literal notranslate"><span class="pre">21.5b1</span></code></p></li>
<li><p><em>Black</em> uses <a class="reference external" href="https://pypi.org/project/setuptools-scm/">setuptools scm</a> to pull
the current version for the package builds and release.</p></li>
</ol>
</li>
<li><p>Once the release is cut, you’re basically done. It’s a good practice to go and watch
to make sure all the <a class="reference external" href="https://github.com/psf/black/actions">GitHub Actions</a> pass,
although you should receive an email to your registered GitHub email address should
one fail.</p>
<ol class="simple">
<li><p>You should see all the release workflows and lint/unittests workflows running on
the new tag in the Actions UI</p></li>
</ol>
</li>
</ol>
<p>If anything fails, please go read the respective action’s log output and configuration
file to reverse engineer your way to a fix/soluton.</p>
</section>
<section id="release-workflows">
<h5>Release workflows<a class="headerlink" href="#release-workflows" title="Permalink to this headline">¶</a></h5>
<p>All <em>Blacks</em>’s automation workflows use GitHub Actions. All workflows are therefore
configured using <code class="docutils literal notranslate"><span class="pre">.yml</span></code> files in the <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code> directory of the <em>Black</em>
repository.</p>
<p>Below are descriptions of our release workflows.</p>
<section id="docker">
<h6>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h6>
<p>This workflow uses the QEMU powered <code class="docutils literal notranslate"><span class="pre">buildx</span></code> feature of docker to upload a <code class="docutils literal notranslate"><span class="pre">arm64</span></code> and
<code class="docutils literal notranslate"><span class="pre">amd64</span></code>/<code class="docutils literal notranslate"><span class="pre">x86_64</span></code> build of the official <em>Black</em> docker image™.</p>
<ul class="simple">
<li><p>Currently this workflow uses an API Token associated with &#64;cooperlees account</p></li>
</ul>
</section>
<section id="pypi-upload">
<h6>pypi_upload<a class="headerlink" href="#pypi-upload" title="Permalink to this headline">¶</a></h6>
<p>This workflow builds a Python
<a class="reference external" href="https://docs.python.org/3/distutils/sourcedist.html">sdist</a> and
<a class="reference external" href="https://pythonwheels.com">wheel</a> using the latest
<a class="reference external" href="https://pypi.org/project/setuptools/">setuptools</a> and
<a class="reference external" href="https://pypi.org/project/wheel/">wheel</a> modules.</p>
<p>It will then use <a class="reference external" href="https://pypi.org/project/twine/">twine</a> to upload both release formats
to PyPI for general downloading of the <em>Black</em> Python package. This is where
<a class="reference external" href="https://pypi.org/project/pip/">pip</a> looks by default.</p>
<ul class="simple">
<li><p>Currently this workflow uses an API token associated with &#64;ambv’s PyPI account</p></li>
</ul>
</section>
<section id="upload-self-contained-binaries">
<h6>Upload self-contained binaries<a class="headerlink" href="#upload-self-contained-binaries" title="Permalink to this headline">¶</a></h6>
<p>This workflow builds self-contained binaries for multiple platforms. This allows people
to download the executable for their platform and run <em>Black</em> without a
<a class="reference external" href="https://wiki.python.org/moin/PythonImplementations">Python Runtime</a> installed.</p>
<p>The created binaries are attached/stored on the associated
<a class="reference external" href="https://github.com/psf/black/releases">GitHub Release</a> for download over <em>IPv4 only</em>
(GitHub still does not have IPv6 access 😢).</p>
</section>
</section>
<section id="moving-the-stable-tag">
<h5>Moving the <code class="docutils literal notranslate"><span class="pre">stable</span></code> tag<a class="headerlink" href="#moving-the-stable-tag" title="Permalink to this headline">¶</a></h5>
<p><em>Black</em> provides a stable tag for people who want to move along as <em>Black</em> developers
deem the newest version reliable. Here the <em>Black</em> developers will move once the release
has been problem free for at least ~24 hours from release. Given the large <em>Black</em>
userbase we hear about bad bugs quickly. We do strive to continually improve our CI too.</p>
<section id="tag-moving-process">
<h6>Tag moving process<a class="headerlink" href="#tag-moving-process" title="Permalink to this headline">¶</a></h6>
<section id="stable">
<h7>stable<a class="headerlink" href="#stable" title="Permalink to this headline">¶</a></h7>
<p>From a rebased <code class="docutils literal notranslate"><span class="pre">main</span></code> checkout:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">-f</span> <span class="pre">stable</span> <span class="pre">VERSION_TAG</span></code></p>
<ol class="simple">
<li><p>e.g. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">-f</span> <span class="pre">stable</span> <span class="pre">21.5b1</span></code></p></li>
</ol>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">--tags</span> <span class="pre">-f</span></code></p></li>
</ol>
</section>
</section>
</section>
</section>
<span id="document-contributing/reference/reference_summary"></span><section id="developer-reference">
<h4>Developer reference<a class="headerlink" href="#developer-reference" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The documentation here is quite outdated and has been neglected. Many objects worthy
of inclusion aren’t documented. Contributions are appreciated!</p>
</div>
<p><em>Contents are subject to change.</em></p>
<div class="toctree-wrapper compound">
<span id="document-contributing/reference/reference_classes"></span><section id="black-classes">
<h5><em>Black</em> classes<a class="headerlink" href="#black-classes" title="Permalink to this headline">¶</a></h5>
<p><em>Contents are subject to change.</em></p>
<section id="brackettracker">
<h6><code class="xref py py-class docutils literal notranslate"><span class="pre">BracketTracker</span></code><a class="headerlink" href="#brackettracker" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.brackets.BracketTracker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.brackets.</span></span><span class="sig-name descname"><span class="pre">BracketTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">depth:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">bracket_match:</span> <span class="pre">Dict[Tuple[int,</span> <span class="pre">int],</span> <span class="pre">blib2to3.pytree.Leaf]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;,</span> <span class="pre">delimiters:</span> <span class="pre">Dict[int,</span> <span class="pre">int]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;,</span> <span class="pre">previous:</span> <span class="pre">Optional[blib2to3.pytree.Leaf]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">_for_loop_depths:</span> <span class="pre">List[int]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;,</span> <span class="pre">_lambda_argument_depths:</span> <span class="pre">List[int]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;,</span> <span class="pre">invisible:</span> <span class="pre">List[blib2to3.pytree.Leaf]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.brackets.BracketTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps track of brackets on a line.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.mark">
<span class="sig-name descname"><span class="pre">mark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.mark" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark <cite>leaf</cite> with bracket-related metadata. Keep track of delimiters.</p>
<p>All leaves receive an int <cite>bracket_depth</cite> field that stores how deep
within brackets a given leaf is. 0 means there are no enclosing brackets
that started on this line.</p>
<p>If a leaf is itself a closing bracket, it receives an <cite>opening_bracket</cite>
field that it forms a pair with. This is a one-directional link to
avoid reference cycles.</p>
<p>If a leaf is a delimiter (a token on which Black can split the line if
needed) and it’s on depth 0, its <cite>id()</cite> is stored in the tracker’s
<cite>delimiters</cite> field.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.any_open_brackets">
<span class="sig-name descname"><span class="pre">any_open_brackets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.any_open_brackets" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if there is an yet unmatched open bracket on the line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.max_delimiter_priority">
<span class="sig-name descname"><span class="pre">max_delimiter_priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.max_delimiter_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the highest priority of a delimiter found on the line.</p>
<p>Values are consistent with what <cite>is_split_*_delimiter()</cite> return.
Raises ValueError on no delimiters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.delimiter_count_with_priority">
<span class="sig-name descname"><span class="pre">delimiter_count_with_priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.delimiter_count_with_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of delimiters with the given <cite>priority</cite>.</p>
<p>If no <cite>priority</cite> is passed, defaults to max priority on the line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.maybe_increment_for_loop_variable">
<span class="sig-name descname"><span class="pre">maybe_increment_for_loop_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.maybe_increment_for_loop_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>In a for loop, or comprehension, the variables are often unpacks.</p>
<p>To avoid splitting on the comma in this situation, increase the depth of
tokens between <cite>for</cite> and <cite>in</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.maybe_decrement_after_for_loop_variable">
<span class="sig-name descname"><span class="pre">maybe_decrement_after_for_loop_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.maybe_decrement_after_for_loop_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>maybe_increment_for_loop_variable</cite> above for explanation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.maybe_increment_lambda_arguments">
<span class="sig-name descname"><span class="pre">maybe_increment_lambda_arguments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.maybe_increment_lambda_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>In a lambda expression, there might be more than one argument.</p>
<p>To avoid splitting on the comma in this situation, increase the depth of
tokens between <cite>lambda</cite> and <cite>:</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.maybe_decrement_after_lambda_arguments">
<span class="sig-name descname"><span class="pre">maybe_decrement_after_lambda_arguments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.brackets.BracketTracker.maybe_decrement_after_lambda_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>See <cite>maybe_increment_lambda_arguments</cite> above for explanation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.brackets.BracketTracker.get_open_lsqb">
<span class="sig-name descname"><span class="pre">get_open_lsqb</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.brackets.BracketTracker.get_open_lsqb" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the most recent opening square bracket (if any).</p>
</dd></dl>

</dd></dl>

</section>
<section id="emptylinetracker">
<h6><a class="reference internal" href="#black.EmptyLineTracker" title="black.EmptyLineTracker"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmptyLineTracker</span></code></a><a class="headerlink" href="#emptylinetracker" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.EmptyLineTracker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">EmptyLineTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">is_pyi:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">previous_line:</span> <span class="pre">Optional[black.lines.Line]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">previous_after:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em>, <em class="sig-param"><span class="pre">previous_defs:</span> <span class="pre">List[int]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.EmptyLineTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a stateful method that returns the number of potential extra
empty lines needed before and after the currently processed line.</p>
<p>Note: this tracker works on lines that haven’t been split yet.  It assumes
the prefix of the first leaf consists of optional newlines.  Those newlines
are consumed by <cite>maybe_empty_lines()</cite> and included in the computation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.EmptyLineTracker.maybe_empty_lines">
<span class="sig-name descname"><span class="pre">maybe_empty_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.EmptyLineTracker.maybe_empty_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of extra empty lines before and after the <cite>current_line</cite>.</p>
<p>This is for separating <cite>def</cite>, <cite>async def</cite> and <cite>class</cite> with extra empty
lines (two on module-level).</p>
</dd></dl>

</dd></dl>

</section>
<section id="line">
<h6><a class="reference internal" href="#black.Line" title="black.Line"><code class="xref py py-class docutils literal notranslate"><span class="pre">Line</span></code></a><a class="headerlink" href="#line" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.Line">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">Line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">mode:</span> <span class="pre">black.mode.Mode</span></em>, <em class="sig-param"><span class="pre">depth:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em>, <em class="sig-param"><span class="pre">leaves:</span> <span class="pre">List[blib2to3.pytree.Leaf]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">comments:</span> <span class="pre">Dict[int</span></em>, <em class="sig-param"><span class="pre">List[blib2to3.pytree.Leaf]]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">bracket_tracker:</span> <span class="pre">black.brackets.BracketTracker</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">inside_brackets:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">should_split_rhs:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">magic_trailing_comma:</span> <span class="pre">Optional[blib2to3.pytree.Leaf]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.Line" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds leaves and comments. Can be printed with <cite>str(line)</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.Line.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preformatted</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.Line.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <cite>leaf</cite> to the end of the line.</p>
<p>Unless <cite>preformatted</cite> is True, the <cite>leaf</cite> will receive a new consistent
whitespace prefix and metadata applied by <code class="xref py py-class docutils literal notranslate"><span class="pre">BracketTracker</span></code>.
Trailing commas are maybe removed, unpacked for loop variables are
demoted from being delimiters.</p>
<p>Inline comments are put aside.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.append_safe">
<span class="sig-name descname"><span class="pre">append_safe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preformatted</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.Line.append_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#black.Line.append" title="black.Line.append"><code class="xref py py-func docutils literal notranslate"><span class="pre">append()</span></code></a> but disallow invalid standalone comment structure.</p>
<p>Raises ValueError when any <cite>leaf</cite> is appended after a standalone comment
or when a standalone comment is not the first leaf on the line.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_comment">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_comment</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this line a standalone comment?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_decorator">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_decorator</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this line a decorator?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_import">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_import</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this an import line?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_class">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_class</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this line a class definition?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_stub_class">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_stub_class</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_stub_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this line a class definition with a body consisting only of “…”?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_def">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_def</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_def" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this a function definition? (Also returns True for async defs.)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_class_paren_empty">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_class_paren_empty</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_class_paren_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this a class with no base classes but using parentheses?</p>
<p>Those are unnecessary and should be removed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Line.is_triple_quoted_string">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">is_triple_quoted_string</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#black.Line.is_triple_quoted_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the line a triple quoted string?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.contains_standalone_comments">
<span class="sig-name descname"><span class="pre">contains_standalone_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth_limit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">9223372036854775807</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.Line.contains_standalone_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>If so, needs to be split before emitting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.has_magic_trailing_comma">
<span class="sig-name descname"><span class="pre">has_magic_trailing_comma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">closing</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensure_removable</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.Line.has_magic_trailing_comma" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if we have a magic trailing comma, that is when:
- there’s a trailing comma here
- it’s not a one-tuple
Additionally, if ensure_removable:
- it’s not from square bracket indexing</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.append_comment">
<span class="sig-name descname"><span class="pre">append_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.Line.append_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an inline or standalone comment to the line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.comments_after">
<span class="sig-name descname"><span class="pre">comments_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.Line.comments_after" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate comments that should appear directly after <cite>leaf</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.remove_trailing_comma">
<span class="sig-name descname"><span class="pre">remove_trailing_comma</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.Line.remove_trailing_comma" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the trailing comma and moves the comments attached to it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.is_complex_subscript">
<span class="sig-name descname"><span class="pre">is_complex_subscript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.Line.is_complex_subscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True iff <cite>leaf</cite> is part of a slice with non-trivial exprs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.enumerate_with_length">
<span class="sig-name descname"><span class="pre">enumerate_with_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reversed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.Line.enumerate_with_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an enumeration of leaves with their length.</p>
<p>Stops prematurely on multiline strings and standalone comments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.Line.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Line.__bool__">
<span class="sig-name descname"><span class="pre">__bool__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.Line.__bool__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the line has leaves or comments.</p>
</dd></dl>

</dd></dl>

</section>
<section id="linegenerator">
<h6><a class="reference internal" href="#black.LineGenerator" title="black.LineGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineGenerator</span></code></a><a class="headerlink" href="#linegenerator" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.LineGenerator">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">LineGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_u_prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.LineGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#black.nodes.Visitor" title="black.nodes.Visitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">black.nodes.Visitor</span></code></a>[<a class="reference internal" href="#black.Line" title="black.lines.Line"><code class="xref py py-class docutils literal notranslate"><span class="pre">black.lines.Line</span></code></a>]</p>
<p>Generates reformatted Line objects.  Empty lines are not emitted.</p>
<p>Note: destroys the tree it’s visiting by mutating prefixes of its leaves
in ways that will no longer stringify to valid Python code on the tree.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.line">
<span class="sig-name descname"><span class="pre">line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.line" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a line.</p>
<p>If the line is empty, only emit if it makes sense.
If the line is too long, split it first and then generate.</p>
<p>If any lines were generated, set up a new current_line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_default">
<span class="sig-name descname"><span class="pre">visit_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default <cite>visit_*()</cite> implementation. Recurses to children of <cite>node</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_INDENT">
<span class="sig-name descname"><span class="pre">visit_INDENT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_INDENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase indentation level, maybe yield a line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_DEDENT">
<span class="sig-name descname"><span class="pre">visit_DEDENT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_DEDENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrease indentation level, maybe yield a line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_stmt">
<span class="sig-name descname"><span class="pre">visit_stmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keywords</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parens</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_stmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a statement.</p>
<p>This implementation is shared for <cite>if</cite>, <cite>while</cite>, <cite>for</cite>, <cite>try</cite>, <cite>except</cite>,
<cite>def</cite>, <cite>with</cite>, <cite>class</cite>, <cite>assert</cite>, and assignments.</p>
<p>The relevant Python language <cite>keywords</cite> for a given statement will be
NAME leaves within it. This methods puts those on a separate line.</p>
<p><cite>parens</cite> holds a set of string leaf values immediately after which
invisible parens should be put.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_match_case">
<span class="sig-name descname"><span class="pre">visit_match_case</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_match_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit either a match or case statement.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_suite">
<span class="sig-name descname"><span class="pre">visit_suite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_suite" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a suite.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_simple_stmt">
<span class="sig-name descname"><span class="pre">visit_simple_stmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_simple_stmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a statement without nested statements.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_async_stmt">
<span class="sig-name descname"><span class="pre">visit_async_stmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_async_stmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit <cite>async def</cite>, <cite>async for</cite>, <cite>async with</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_decorators">
<span class="sig-name descname"><span class="pre">visit_decorators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_decorators" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit decorators.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_SEMI">
<span class="sig-name descname"><span class="pre">visit_SEMI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_SEMI" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a semicolon and put the other statement on a separate line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_ENDMARKER">
<span class="sig-name descname"><span class="pre">visit_ENDMARKER</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_ENDMARKER" title="Permalink to this definition">¶</a></dt>
<dd><p>End of file. Process outstanding comments and end with a newline.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.LineGenerator.visit_factor">
<span class="sig-name descname"><span class="pre">visit_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.LineGenerator.visit_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Force parentheses between a unary op and a binary power:</p>
<p>-2 ** 8 -&gt; -(2 ** 8)</p>
</dd></dl>

</dd></dl>

</section>
<section id="protocomment">
<h6><code class="xref py py-class docutils literal notranslate"><span class="pre">ProtoComment</span></code><a class="headerlink" href="#protocomment" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.comments.ProtoComment">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">ProtoComment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">newlines</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.comments.ProtoComment" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes a piece of syntax that is a comment.</p>
<p>It’s not a <code class="xref py py-class docutils literal notranslate"><span class="pre">blib2to3.pytree.Leaf</span></code> so that:</p>
<ul class="simple">
<li><p>it can be cached (<cite>Leaf</cite> objects should not be reused more than once as
they store their lineno, column, prefix, and parent information);</p></li>
<li><p><cite>newlines</cite> and <cite>consumed</cite> fields are kept separate from the <cite>value</cite>. This
simplifies handling of special marker comments like <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off/on</span></code>.</p></li>
</ul>
</dd></dl>

</section>
<section id="report">
<h6><a class="reference internal" href="#black.Report" title="black.Report"><code class="xref py py-class docutils literal notranslate"><span class="pre">Report</span></code></a><a class="headerlink" href="#report" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.Report">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">Report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failure_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.Report" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a reformatting counter. Can be rendered with <cite>str(report)</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.Report.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">changed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Changed" title="black.report.Changed"><span class="pre">black.report.Changed</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.Report.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the counter for successful reformatting. Write out a message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Report.failed">
<span class="sig-name descname"><span class="pre">failed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.Report.failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the counter for failed reformatting. Write out a message.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="black.Report.return_code">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">return_code</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#black.Report.return_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the exit code that the app should use.</p>
<p>This considers the current state of changed files and failures:
- if there were any failures, return 123;
- if any files were changed and –check is being used, return 1;
- otherwise return 0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.Report.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.Report.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a color report of the current state.</p>
<p>Use <cite>click.unstyle</cite> to remove colors.</p>
</dd></dl>

</dd></dl>

</section>
<section id="visitor">
<h6><code class="xref py py-class docutils literal notranslate"><span class="pre">Visitor</span></code><a class="headerlink" href="#visitor" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.nodes.Visitor">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">Visitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.nodes.Visitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">black.nodes.T</span></code>]</p>
<p>Basic lib2to3 visitor that yields things of type <cite>T</cite> on <cite>visit()</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="black.nodes.Visitor.visit">
<span class="sig-name descname"><span class="pre">visit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">black.nodes.T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.Visitor.visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Main method to visit <cite>node</cite> and its children.</p>
<p>It tries to find a <cite>visit_*()</cite> method for the given <cite>node.type</cite>, like
<cite>visit_simple_stmt</cite> for Node objects or <cite>visit_INDENT</cite> for Leaf objects.
If no dedicated <cite>visit_*()</cite> method is found, chooses <cite>visit_default()</cite>
instead.</p>
<p>Then yields objects of type <cite>T</cite> from the selected visitor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="black.nodes.Visitor.visit_default">
<span class="sig-name descname"><span class="pre">visit_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">black.nodes.T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.Visitor.visit_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default <cite>visit_*()</cite> implementation. Recurses to children of <cite>node</cite>.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="enums">
<h5>Enums<a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h5>
<section id="changed">
<h6><a class="reference internal" href="#black.Changed" title="black.Changed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Changed</span></code></a><a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.Changed">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">Changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.Changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>An enumeration.</p>
</dd></dl>

</section>
<section id="mode">
<h6><a class="reference internal" href="#black.Mode" title="black.Mode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mode</span></code></a><a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.Mode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">Mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">target_versions:</span> <span class="pre">Set[black.mode.TargetVersion]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">line_length:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">88</span></em>, <em class="sig-param"><span class="pre">string_normalization:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em>, <em class="sig-param"><span class="pre">is_pyi:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">is_ipynb:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">magic_trailing_comma:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em>, <em class="sig-param"><span class="pre">experimental_string_processing:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.Mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

</section>
<section id="writeback">
<h6><a class="reference internal" href="#black.WriteBack" title="black.WriteBack"><code class="xref py py-class docutils literal notranslate"><span class="pre">WriteBack</span></code></a><a class="headerlink" href="#writeback" title="Permalink to this headline">¶</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="black.WriteBack">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">WriteBack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#black.WriteBack" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>An enumeration.</p>
</dd></dl>

</section>
</section>
<span id="document-contributing/reference/reference_functions"></span><section id="black-functions">
<h5><em>Black</em> functions<a class="headerlink" href="#black-functions" title="Permalink to this headline">¶</a></h5>
<p><em>Contents are subject to change.</em></p>
<section id="assertions-and-checks">
<h6>Assertions and checks<a class="headerlink" href="#assertions-and-checks" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.assert_equivalent">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">assert_equivalent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pass_num</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.assert_equivalent" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise AssertionError if <cite>src</cite> and <cite>dst</cite> aren’t equivalent.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.assert_stable">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">assert_stable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.assert_stable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise AssertionError if <cite>dst</cite> reformats differently the second time.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.lines.can_be_split">
<span class="sig-prename descclassname"><span class="pre">black.lines.</span></span><span class="sig-name descname"><span class="pre">can_be_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.lines.can_be_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Return False if the line cannot be split <em>for sure</em>.</p>
<p>This is not an exhaustive search but a cheap heuristic that we can use to
avoid some unfortunate formattings (mostly around wrapping unsplittable code
in unnecessary parentheses).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.lines.can_omit_invisible_parens">
<span class="sig-prename descclassname"><span class="pre">black.lines.</span></span><span class="sig-name descname"><span class="pre">can_omit_invisible_parens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_on_explode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.lines.can_omit_invisible_parens" title="Permalink to this definition">¶</a></dt>
<dd><p>Does <cite>line</cite> have a shape safe to reformat without optional parens around it?</p>
<p>Returns True for only a subset of potentially nice looking formattings but
the point is to not return false positives that end up producing lines that
are too long.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_empty_tuple">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_empty_tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_empty_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>node</cite> holds an empty tuple.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_import">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_import</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the given leaf starts an import statement.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.lines.is_line_short_enough">
<span class="sig-prename descclassname"><span class="pre">black.lines.</span></span><span class="sig-name descname"><span class="pre">is_line_short_enough</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_str</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.lines.is_line_short_enough" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>line</cite> is no longer than <cite>line_length</cite>.</p>
<p>Uses the provided <cite>line_str</cite> rendering, if any, otherwise computes a new one.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_multiline_string">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_multiline_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_multiline_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>leaf</cite> is a multiline string that actually spans many lines.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_one_tuple">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_one_tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_one_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>node</cite> holds a tuple with one element, with or without parens.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.brackets.is_split_after_delimiter">
<span class="sig-prename descclassname"><span class="pre">black.brackets.</span></span><span class="sig-name descname"><span class="pre">is_split_after_delimiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#black.brackets.is_split_after_delimiter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the priority of the <cite>leaf</cite> delimiter, given a line break after it.</p>
<p>The delimiter priorities returned here are from those delimiters that would
cause a line break after themselves.</p>
<p>Higher numbers are higher priority.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.brackets.is_split_before_delimiter">
<span class="sig-prename descclassname"><span class="pre">black.brackets.</span></span><span class="sig-name descname"><span class="pre">is_split_before_delimiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#black.brackets.is_split_before_delimiter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the priority of the <cite>leaf</cite> delimiter, given a line break before it.</p>
<p>The delimiter priorities returned here are from those delimiters that would
cause a line break before themselves.</p>
<p>Higher numbers are higher priority.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_stub_body">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_stub_body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_stub_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>node</cite> is a simple statement containing an ellipsis.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_stub_suite">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_stub_suite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_stub_suite" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>node</cite> is a suite with a stub body.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_vararg">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_vararg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">within</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_vararg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>leaf</cite> is a star or double star in a vararg or kwarg.</p>
<p>If <cite>within</cite> includes VARARGS_PARENTS, this applies to function signatures.
If <cite>within</cite> includes UNPACKING_PARENTS, it applies to right hand-side
extended iterable unpacking (PEP 3132) and additional unpacking
generalizations (PEP 448).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.is_yield">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">is_yield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.nodes.is_yield" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>node</cite> holds a <cite>yield</cite> or <cite>yield from</cite> expression.</p>
</dd></dl>

</section>
<section id="formatting">
<h6>Formatting<a class="headerlink" href="#formatting" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.format_file_contents">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">format_file_contents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_contents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.format_file_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformat contents of a file and return new contents.</p>
<p>If <cite>fast</cite> is False, additionally confirm that the reformatted code is
valid by calling <a class="reference internal" href="#black.assert_equivalent" title="black.assert_equivalent"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_equivalent()</span></code></a> and <a class="reference internal" href="#black.assert_stable" title="black.assert_stable"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_stable()</span></code></a> on it.
<cite>mode</cite> is passed to <a class="reference internal" href="#black.format_str" title="black.format_str"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_str()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.format_file_in_place">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">format_file_in_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_back</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.WriteBack" title="black.WriteBack"><span class="pre">black.WriteBack</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">WriteBack.NO</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.format_file_in_place" title="Permalink to this definition">¶</a></dt>
<dd><p>Format file under <cite>src</cite> path. Return True if changed.</p>
<p>If <cite>write_back</cite> is DIFF, write a diff to stdout. If it is YES, write reformatted
code to the file.
<cite>mode</cite> and <cite>fast</cite> options are passed to <a class="reference internal" href="#black.format_file_contents" title="black.format_file_contents"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_file_contents()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.format_stdin_to_stdout">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">format_stdin_to_stdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_back</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.WriteBack" title="black.WriteBack"><span class="pre">black.WriteBack</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">WriteBack.NO</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.format_stdin_to_stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Format file on stdin. Return True if changed.</p>
<p>If content is None, it’s read from sys.stdin.</p>
<p>If <cite>write_back</cite> is YES, write reformatted code back to stdout. If it is DIFF,
write a diff to stdout. The <cite>mode</cite> argument is passed to
<a class="reference internal" href="#black.format_file_contents" title="black.format_file_contents"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_file_contents()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.format_str">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">format_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_contents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.format_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformat a string and return new contents.</p>
<p><cite>mode</cite> determines formatting options, such as how many characters per line are
allowed.  Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">black</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">black</span><span class="o">.</span><span class="n">format_str</span><span class="p">(</span><span class="s2">&quot;def f(arg:str=&#39;&#39;)-&gt;None:...&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">black</span><span class="o">.</span><span class="n">Mode</span><span class="p">()))</span>
<span class="go">def f(arg: str = &quot;&quot;) -&gt; None:</span>
<span class="go">    ...</span>
</pre></div>
</div>
<p>A more complex example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span>
<span class="gp">... </span>  <span class="n">black</span><span class="o">.</span><span class="n">format_str</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;def f(arg:str=&#39;&#39;)-&gt;None: hey&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">mode</span><span class="o">=</span><span class="n">black</span><span class="o">.</span><span class="n">Mode</span><span class="p">(</span>
<span class="gp">... </span>      <span class="n">target_versions</span><span class="o">=</span><span class="p">{</span><span class="n">black</span><span class="o">.</span><span class="n">TargetVersion</span><span class="o">.</span><span class="n">PY36</span><span class="p">},</span>
<span class="gp">... </span>      <span class="n">line_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">string_normalization</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">is_pyi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>  <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">def f(</span>
<span class="go">    arg: str = &#39;&#39;,</span>
<span class="go">) -&gt; None:</span>
<span class="go">    hey</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.reformat_one">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">reformat_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_back</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.WriteBack" title="black.WriteBack"><span class="pre">black.WriteBack</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Report" title="black.report.Report"><span class="pre">black.report.Report</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.reformat_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformat a single file under <cite>src</cite> without spawning child processes.</p>
<p><cite>fast</cite>, <cite>write_back</cite>, and <cite>mode</cite> options are passed to
<a class="reference internal" href="#black.format_file_in_place" title="black.format_file_in_place"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_file_in_place()</span></code></a> or <a class="reference internal" href="#black.format_stdin_to_stdout" title="black.format_stdin_to_stdout"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_stdin_to_stdout()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.schedule_formatting">
<em class="property"><span class="pre">async</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">schedule_formatting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_back</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.WriteBack" title="black.WriteBack"><span class="pre">black.WriteBack</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Report" title="black.report.Report"><span class="pre">black.report.Report</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">loop</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">asyncio.events.AbstractEventLoop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">concurrent.futures._base.Executor</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.schedule_formatting" title="Permalink to this definition">¶</a></dt>
<dd><p>Run formatting of <cite>sources</cite> in parallel using the provided <cite>executor</cite>.</p>
<p>(Use ProcessPoolExecutors for actual parallelism.)</p>
<p><cite>write_back</cite>, <cite>fast</cite>, and <cite>mode</cite> options are passed to
<a class="reference internal" href="#black.format_file_in_place" title="black.format_file_in_place"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_file_in_place()</span></code></a>.</p>
</dd></dl>

</section>
<section id="file-operations">
<h6>File operations<a class="headerlink" href="#file-operations" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.dump_to_file">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">dump_to_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">output</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensure_final_newline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.dump_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump <cite>output</cite> to a temporary file. Return path to the file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.find_project_root">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">find_project_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></span><a class="headerlink" href="#black.find_project_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a directory containing .git, .hg, or pyproject.toml.</p>
<p>That directory will be a common parent of all files and directories
passed in <cite>srcs</cite>.</p>
<p>If no directory in the tree contains a marker that would specify it’s the
project root, the root of the file system is returned.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.gen_python_files">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">gen_python_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend_exclude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_exclude</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Report" title="black.report.Report"><span class="pre">black.report.Report</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">gitignore</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pathspec.pathspec.PathSpec</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.gen_python_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate all files under <cite>path</cite> whose paths are not excluded by the
<cite>exclude_regex</cite>, <cite>extend_exclude</cite>, or <cite>force_exclude</cite> regexes,
but are included by the <cite>include</cite> regex.</p>
<p>Symbolic links pointing outside of the <cite>root</cite> directory are ignored.</p>
<p><cite>report</cite> is where output about exclusions goes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.read_pyproject_toml">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">read_pyproject_toml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">click.core.Context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">click.core.Parameter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.read_pyproject_toml" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject Black configuration from “pyproject.toml” into defaults in <cite>ctx</cite>.</p>
<p>Returns the path to a successfully found and read configuration file, None
otherwise.</p>
</dd></dl>

</section>
<section id="parsing">
<h6>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.decode_bytes">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">decode_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.decode_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of (decoded_contents, encoding, newline).</p>
<p><cite>newline</cite> is either CRLF or LF but <cite>decoded_contents</cite> is decoded with
universal newlines (i.e. only contains LF).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.parsing.lib2to3_parse">
<span class="sig-prename descclassname"><span class="pre">black.parsing.</span></span><span class="sig-name descname"><span class="pre">lib2to3_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_txt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_versions</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.TargetVersion</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">blib2to3.pytree.Node</span></span></span><a class="headerlink" href="#black.parsing.lib2to3_parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string with source, return the lib2to3 Node.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.parsing.lib2to3_unparse">
<span class="sig-prename descclassname"><span class="pre">black.parsing.</span></span><span class="sig-name descname"><span class="pre">lib2to3_unparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.parsing.lib2to3_unparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a lib2to3 node, return its string representation.</p>
</dd></dl>

</section>
<section id="split-functions">
<h6>Split functions<a class="headerlink" href="#split-functions" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.bracket_split_build_line">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">bracket_split_build_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaves</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">opening_bracket</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_body</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></span><a class="headerlink" href="#black.linegen.bracket_split_build_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new line with given <cite>leaves</cite> and respective comments from <cite>original</cite>.</p>
<p>If <cite>is_body</cite> is True, the result line is one-indented inside brackets and as such
has its first leaf’s prefix normalized and a trailing comma added when expected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.bracket_split_succeeded_or_raise">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">bracket_split_succeeded_or_raise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">head</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.linegen.bracket_split_succeeded_or_raise" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise <a class="reference internal" href="index.html#black.linegen.CannotSplit" title="black.linegen.CannotSplit"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CannotSplit</span></code></a> if the last left- or right-hand split failed.</p>
<p>Do nothing otherwise.</p>
<p>A left- or right-hand split is based on a pair of brackets. Content before
(and including) the opening bracket is left on one line, content inside the
brackets is put on a separate line, and finally content starting with and
following the closing bracket is put on a separate line.</p>
<p>Those are called <cite>head</cite>, <cite>body</cite>, and <cite>tail</cite>, respectively. If the split
produced the same line (all content in <cite>head</cite>) or ended up with an empty <cite>body</cite>
and the <cite>tail</cite> is just the closing bracket, then it’s considered failed.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.delimiter_split">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">delimiter_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.delimiter_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split according to delimiters of the highest priority.</p>
<p>If the appropriate Features are given, the split will add trailing commas
also in function signatures and calls that contain <cite>*</cite> and <cite>**</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.left_hand_split">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">left_hand_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">_features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.left_hand_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split line into many lines, starting with the first matching bracket pair.</p>
<p>Note: this usually looks weird, only use this for function definitions.
Prefer RHS otherwise.  This is why this function is not symmetrical with
<a class="reference internal" href="#black.linegen.right_hand_split" title="black.linegen.right_hand_split"><code class="xref py py-func docutils literal notranslate"><span class="pre">right_hand_split()</span></code></a> which also handles optional parentheses.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.right_hand_split">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">right_hand_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.right_hand_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split line into many lines, starting with the last matching bracket pair.</p>
<p>If the split was by optional parentheses, attempt splitting without them, too.
<cite>omit</cite> is a collection of closing bracket IDs that shouldn’t be considered for
this split.</p>
<p>Note: running this function modifies <cite>bracket_depth</cite> on the leaves of <cite>line</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.standalone_comment_split">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">standalone_comment_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.standalone_comment_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split standalone comments from the rest of the line.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.transform_line">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">transform_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.transform_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform a <cite>line</cite>, potentially splitting it into many lines.</p>
<p>They should fit in the allotted <cite>line_length</cite> but might not be able to.</p>
<p><cite>features</cite> are syntactical features that may be used in the output.</p>
</dd></dl>

</section>
<section id="caching">
<h6>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.cache.filter_cached">
<span class="sig-prename descclassname"><span class="pre">black.cache.</span></span><span class="sig-name descname"><span class="pre">filter_cached</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.cache.filter_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Split an iterable of paths in <cite>sources</cite> into two sets.</p>
<p>The first contains paths of files that modified on disk or are not in the
cache. The other contains paths to non-modified files.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.cache.get_cache_file">
<span class="sig-prename descclassname"><span class="pre">black.cache.</span></span><span class="sig-name descname"><span class="pre">get_cache_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></span><a class="headerlink" href="#black.cache.get_cache_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.cache.get_cache_info">
<span class="sig-prename descclassname"><span class="pre">black.cache.</span></span><span class="sig-name descname"><span class="pre">get_cache_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.cache.get_cache_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the information used to check if a file is already formatted or not.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.cache.read_cache">
<span class="sig-prename descclassname"><span class="pre">black.cache.</span></span><span class="sig-name descname"><span class="pre">read_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.cache.read_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the cache if it exists and is well formed.</p>
<p>If it is not well formed, the call to write_cache later should resolve the issue.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.cache.write_cache">
<span class="sig-prename descclassname"><span class="pre">black.cache.</span></span><span class="sig-name descname"><span class="pre">write_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Mode" title="black.mode.Mode"><span class="pre">black.mode.Mode</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.cache.write_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the cache file.</p>
</dd></dl>

</section>
<section id="utilities">
<h6>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h6>
<dl class="py function">
<dt class="sig sig-object py" id="black.black.debug.DebugVisitor.show">
<span class="sig-prename descclassname"><span class="pre">black.debug.DebugVisitor.</span></span><span class="sig-name descname"><span class="pre">show</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.black.debug.DebugVisitor.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-print the lib2to3 AST of a given string of <cite>code</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.concurrency.cancel">
<span class="sig-prename descclassname"><span class="pre">black.concurrency.</span></span><span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.10)"><span class="pre">asyncio.Task</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.concurrency.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>asyncio signal handler that cancels all <cite>tasks</cite> and reports to stderr.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.child_towards">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">child_towards</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ancestor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descendant</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.child_towards" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the child of <cite>ancestor</cite> that contains <cite>descendant</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.container_of">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">container_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.container_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>leaf</cite> or one of its ancestors that is the topmost container of it.</p>
<p>By “container” we mean a node where <cite>leaf</cite> is the very first child.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.convert_one_fmt_off_pair">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">convert_one_fmt_off_pair</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.comments.convert_one_fmt_off_pair" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert content of a single <cite># fmt: off</cite>/<cite># fmt: on</cite> into a standalone comment.</p>
<p>Returns True if a pair was converted.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.diff">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">b_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a unified diff string between strings <cite>a</cite> and <cite>b</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.dont_increase_indentation">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">dont_increase_indentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_func</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">black.mode.Feature</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.dont_increase_indentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize prefix of the first leaf in every line returned by <cite>split_func</cite>.</p>
<p>This is a decorator over relevant split functions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.numerics.format_float_or_int_string">
<span class="sig-prename descclassname"><span class="pre">black.numerics.</span></span><span class="sig-name descname"><span class="pre">format_float_or_int_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.numerics.format_float_or_int_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a float string like “1.0”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.ensure_visible">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">ensure_visible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.nodes.ensure_visible" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure parentheses are visible.</p>
<p>They could be invisible as part of some statements (see
<code class="xref py py-func docutils literal notranslate"><span class="pre">normalize_invisible_parens()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">visit_import_from()</span></code>).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.lines.enumerate_reversed">
<span class="sig-prename descclassname"><span class="pre">black.lines.</span></span><span class="sig-name descname"><span class="pre">enumerate_reversed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">black.lines.T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">black.lines.T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.lines.enumerate_reversed" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <cite>reversed(enumerate(sequence))</cite> if that were possible.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.generate_comments">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">generate_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.comments.generate_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the prefix of the <cite>leaf</cite> and generate comments from it, if any.</p>
<p>Comments in lib2to3 are shoved into the whitespace prefix.  This happens
in <cite>pgen2/driver.py:Driver.parse_tokens()</cite>.  This was a brilliant implementation
move because it does away with modifying the grammar to include all the
possible places in which comments can be placed.</p>
<p>The sad consequence for us though is that comments don’t “belong” anywhere.
This is why this function generates simple parentless Leaf objects for
comments.  We simply don’t know what the correct parent should be.</p>
<p>No matter though, we can live without this.  We really only need to
differentiate between inline and standalone comments.  The latter don’t
share the line with any code.</p>
<p>Inline comments are emitted as regular token.COMMENT leaves.  Standalone
are emitted with a fake STANDALONE_COMMENT token identifier.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.generate_ignored_nodes">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">generate_ignored_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.comments.ProtoComment" title="black.comments.ProtoComment"><span class="pre">black.comments.ProtoComment</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.comments.generate_ignored_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting from the container of <cite>leaf</cite>, generate all leaves until <cite># fmt: on</cite>.</p>
<p>If comment is skip, returns leaf only.
Stops at the end of the block.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.is_fmt_on">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">is_fmt_on</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.comments.is_fmt_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether formatting is switched on within a container.
Determined by whether the last <cite># fmt:</cite> comment is <cite>on</cite> or <cite>off</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.contains_fmt_on_at_column">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">contains_fmt_on_at_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.comments.contains_fmt_on_at_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if children at a given column have formatting switched on.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.first_leaf_column">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">first_leaf_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.first_leaf_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the column of the first leaf child of a node.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.generate_trailers_to_omit">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">generate_trailers_to_omit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.linegen.generate_trailers_to_omit" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate sets of closing bracket IDs that should be omitted in a RHS.</p>
<p>Brackets can be omitted if the entire trailer up to and including
a preceding closing bracket fits in one line.</p>
<p>Yielded sets are cumulative (contain results of previous yields, too).  First
set is empty, unless the line should explode, in which case bracket pairs until
the one that needs to explode are omitted.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.get_future_imports">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">get_future_imports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.get_future_imports" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of __future__ imports in the file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.list_comments">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">list_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_endmarker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#black.comments.ProtoComment" title="black.comments.ProtoComment"><span class="pre">black.comments.ProtoComment</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.comments.list_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of <a class="reference internal" href="index.html#black.comments.ProtoComment" title="black.comments.ProtoComment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProtoComment</span></code></a> objects parsed from the given <cite>prefix</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.comments.make_comment">
<span class="sig-prename descclassname"><span class="pre">black.comments.</span></span><span class="sig-name descname"><span class="pre">make_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.comments.make_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a consistently formatted comment from the given <cite>content</cite> string.</p>
<p>All comments (except for “##”, “#!”, “#:”, ‘#’”, “#%%”) should have a single
space between the hash sign and the content.</p>
<p>If <cite>content</cite> didn’t start with a hash sign, one is provided.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.maybe_make_parens_invisible_in_atom">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">maybe_make_parens_invisible_in_atom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.linegen.maybe_make_parens_invisible_in_atom" title="Permalink to this definition">¶</a></dt>
<dd><p>If it’s safe, make the parens in the atom <cite>node</cite> invisible, recursively.
Additionally, remove repeated, adjacent invisible parens from the atom <cite>node</cite>
as they are redundant.</p>
<p>Returns whether the node should itself be wrapped in invisible parentheses.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.brackets.max_delimiter_priority_in_atom">
<span class="sig-prename descclassname"><span class="pre">black.brackets.</span></span><span class="sig-name descname"><span class="pre">max_delimiter_priority_in_atom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#black.brackets.max_delimiter_priority_in_atom" title="Permalink to this definition">¶</a></dt>
<dd><p>Return maximum delimiter priority inside <cite>node</cite>.</p>
<p>This is specific to atoms with contents contained in a pair of parentheses.
If <cite>node</cite> isn’t an atom or there are no enclosing parentheses, returns 0.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.normalize_fmt_off">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">normalize_fmt_off</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.normalize_fmt_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert content between <cite># fmt: off</cite>/<cite># fmt: on</cite> into standalone comments.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.numerics.normalize_numeric_literal">
<span class="sig-prename descclassname"><span class="pre">black.numerics.</span></span><span class="sig-name descname"><span class="pre">normalize_numeric_literal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.numerics.normalize_numeric_literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes numeric (float, int, and complex) literals.</p>
<p>All letters used in the representation are normalized to lowercase (except
in Python 2 long literals).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.normalize_prefix">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">normalize_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inside_brackets</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.linegen.normalize_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave existing extra newlines if not <cite>inside_brackets</cite>. Remove everything
else.</p>
<p>Note: don’t use backslashes for formatting or you’ll lose your voting rights.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.strings.normalize_string_prefix">
<span class="sig-prename descclassname"><span class="pre">black.strings.</span></span><span class="sig-name descname"><span class="pre">normalize_string_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_u_prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.strings.normalize_string_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Make all string prefixes lowercase.</p>
<p>If remove_u_prefix is given, also removes any u prefix from the string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.strings.normalize_string_quotes">
<span class="sig-prename descclassname"><span class="pre">black.strings.</span></span><span class="sig-name descname"><span class="pre">normalize_string_quotes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.strings.normalize_string_quotes" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefer double quotes but only if it doesn’t cause more escaping.</p>
<p>Adds or removes backslashes as appropriate. Doesn’t parse and fix
strings nested in f-strings.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.normalize_invisible_parens">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">normalize_invisible_parens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parens_after</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.linegen.normalize_invisible_parens" title="Permalink to this definition">¶</a></dt>
<dd><p>Make existing optional parentheses invisible or create new ones.</p>
<p><cite>parens_after</cite> is a set of string leaf values immediately after which parens
should be put.</p>
<p>Standardizes on visible parentheses for single-element tuples, and keeps
existing visible parentheses for other tuples and generator expressions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.patch_click">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">patch_click</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.patch_click" title="Permalink to this definition">¶</a></dt>
<dd><p>Make Click not crash on Python 3.6 with LANG=C.</p>
<p>On certain misconfigured environments, Python 3 selects the ASCII encoding as the
default which restricts paths that it can access during the lifetime of the
application.  Click refuses to work in this scenario by raising a RuntimeError.</p>
<p>In case of Black the likelihood that non-ASCII characters are going to be used in
file paths is minimal since it’s Python source code.  Moreover, this crash was
spurious on Python 3.7 thanks to PEP 538 and PEP 540.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.preceding_leaf">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">preceding_leaf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">,</span> </span><span class="pre">blib2to3.pytree.Node</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">blib2to3.pytree.Leaf</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.nodes.preceding_leaf" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first leaf that precedes <cite>node</cite>, if any.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.re_compile_maybe_verbose">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">re_compile_maybe_verbose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#black.re_compile_maybe_verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile a regular expression string in <cite>regex</cite>.</p>
<p>If it contains newlines, use verbose mode.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.linegen.should_split_line">
<span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">should_split_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="index.html#black.Line" title="black.lines.Line"><span class="pre">black.lines.Line</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">opening_bracket</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#black.linegen.should_split_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Should <cite>line</cite> be immediately split with <cite>delimiter_split()</cite> after RHS?</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.shutdown">
<span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loop</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">asyncio.events.AbstractEventLoop</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#black.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel all pending tasks on <cite>loop</cite>, wait for them, and close the loop.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.strings.sub_twice">
<span class="sig-prename descclassname"><span class="pre">black.strings.</span></span><span class="sig-name descname"><span class="pre">sub_twice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Pattern</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.strings.sub_twice" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace <cite>regex</cite> with <cite>replacement</cite> twice on <cite>original</cite>.</p>
<p>This is used by string normalization to perform replaces on
overlapping matches.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="black.nodes.whitespace">
<span class="sig-prename descclassname"><span class="pre">black.nodes.</span></span><span class="sig-name descname"><span class="pre">whitespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leaf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">blib2to3.pytree.Leaf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">complex_subscript</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#black.nodes.whitespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whitespace prefix if needed for the given <cite>leaf</cite>.</p>
<p><cite>complex_subscript</cite> signals whether the given leaf is part of a subscription
which has non-trivial arguments, like arithmetic expressions or function calls.</p>
</dd></dl>

</section>
</section>
<span id="document-contributing/reference/reference_exceptions"></span><section id="black-exceptions">
<h5><em>Black</em> exceptions<a class="headerlink" href="#black-exceptions" title="Permalink to this headline">¶</a></h5>
<p><em>Contents are subject to change.</em></p>
<dl class="py exception">
<dt class="sig sig-object py" id="black.linegen.CannotSplit">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">black.linegen.</span></span><span class="sig-name descname"><span class="pre">CannotSplit</span></span><a class="headerlink" href="#black.linegen.CannotSplit" title="Permalink to this definition">¶</a></dt>
<dd><p>A readable split that fits the allotted line length is impossible.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="black.NothingChanged">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">NothingChanged</span></span><a class="headerlink" href="#black.NothingChanged" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when reformatted code is the same as source.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="black.InvalidInput">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">black.</span></span><span class="sig-name descname"><span class="pre">InvalidInput</span></span><a class="headerlink" href="#black.InvalidInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when input source code fails all parse attempts.</p>
</dd></dl>

</section>
</div>
</section>
</div>
<p>Welcome! Happy to see you willing to make the project better. Have you read the entire
<a class="reference external" href="https://black.readthedocs.io/en/latest/">user documentation</a> yet?</p>
<p class="rubric">Bird’s eye view</p>
<p>In terms of inspiration, <em>Black</em> is about as configurable as <em>gofmt</em> (which is to say,
not very). This is deliberate. <em>Black</em> aims to provide a consistent style and take away
opportunities for arguing about style.</p>
<p>Bug reports and fixes are always welcome! Please follow the
<a class="reference external" href="https://github.com/psf/black/issues/new">issue template on GitHub</a> for best results.</p>
<p>Before you suggest a new feature or configuration knob, ask yourself why you want it. If
it enables better integration with some workflow, fixes an inconsistency, speeds things
up, and so on - go for it! On the other hand, if your answer is “because I don’t like a
particular formatting” then you’re not ready to embrace <em>Black</em> yet. Such changes are
unlikely to get accepted. You can still try but prepare to be disappointed.</p>
<p class="rubric">Contents</p>
<p>This section covers the following topics:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#document-contributing/the_basics"><span class="doc">The basics</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-contributing/gauging_changes"><span class="doc">Gauging changes</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-contributing/release_process"><span class="doc">Release process</span></a></p></li>
<li><p><a class="reference internal" href="index.html#document-contributing/reference/reference_summary"><span class="doc">Developer reference</span></a></p></li>
</ul>
<p>For an overview on contributing to the <em>Black</em>, please checkout <a class="reference internal" href="index.html#document-contributing/the_basics"><span class="doc">The basics</span></a>.</p>
<p>If you need a reference of the functions, classes, etc. available to you while
developing <em>Black</em>, there’s the <a class="reference internal" href="index.html#document-contributing/reference/reference_summary"><span class="doc">Developer reference</span></a> docs.</p>
</section>
<span id="document-change_log"></span><section class="tex2jax_ignore mathjax_ignore" id="change-log">
<h3>Change Log<a class="headerlink" href="#change-log" title="Permalink to this headline">¶</a></h3>
<section id="b0">
<h4>21.12b0<a class="headerlink" href="#b0" title="Permalink to this headline">¶</a></h4>
<section id="black">
<h5><em>Black</em><a class="headerlink" href="#black" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix determination of f-string expression spans (#2654)</p></li>
<li><p>Fix bad formatting of error messages about EOF in multi-line statements (#2343)</p></li>
<li><p>Functions and classes in blocks now have more consistent surrounding spacing (#2472)</p></li>
</ul>
<section id="jupyter-notebook-support">
<h6>Jupyter Notebook support<a class="headerlink" href="#jupyter-notebook-support" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>Cell magics are now only processed if they are known Python cell magics. Earlier, all
cell magics were tokenized, leading to possible indentation errors e.g. with
<code class="docutils literal notranslate"><span class="pre">%%writefile</span></code>. (#2630)</p></li>
<li><p>Fix assignment to environment variables in Jupyter Notebooks (#2642)</p></li>
</ul>
</section>
<section id="python-3-10-support">
<h6>Python 3.10 support<a class="headerlink" href="#python-3-10-support" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>Point users to using <code class="docutils literal notranslate"><span class="pre">--target-version</span> <span class="pre">py310</span></code> if we detect 3.10-only syntax (#2668)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">match</span></code> statements with open sequence subjects, like <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">a,</span> <span class="pre">b:</span></code> or
<code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">a,</span> <span class="pre">*b:</span></code> (#2639) (#2659)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">match</span></code>/<code class="docutils literal notranslate"><span class="pre">case</span></code> statements that contain <code class="docutils literal notranslate"><span class="pre">match</span></code>/<code class="docutils literal notranslate"><span class="pre">case</span></code> soft keywords multiple
times, like <code class="docutils literal notranslate"><span class="pre">match</span> <span class="pre">re.match()</span></code> (#2661)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">case</span></code> statements with an inline body (#2665)</p></li>
<li><p>Fix styling of starred expressions inside <code class="docutils literal notranslate"><span class="pre">match</span></code> subject (#2667)</p></li>
<li><p>Fix parser error location on invalid syntax in a <code class="docutils literal notranslate"><span class="pre">match</span></code> statement (#2649)</p></li>
<li><p>Fix Python 3.10 support on platforms without ProcessPoolExecutor (#2631)</p></li>
<li><p>Improve parsing performance on code that uses <code class="docutils literal notranslate"><span class="pre">match</span></code> under <code class="docutils literal notranslate"><span class="pre">--target-version</span> <span class="pre">py310</span></code>
up to ~50% (#2670)</p></li>
</ul>
</section>
</section>
<section id="packaging">
<h5>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Remove dependency on <code class="docutils literal notranslate"><span class="pre">regex</span></code> (#2644) (#2663)</p></li>
</ul>
</section>
</section>
<section id="b1">
<h4>21.11b1<a class="headerlink" href="#b1" title="Permalink to this headline">¶</a></h4>
<section id="id1">
<h5><em>Black</em><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Bumped regex version minimum to 2021.4.4 to fix Pattern class usage (#2621)</p></li>
</ul>
</section>
</section>
<section id="id2">
<h4>21.11b0<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<section id="id3">
<h5><em>Black</em><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Warn about Python 2 deprecation in more cases by improving Python 2 only syntax
detection (#2592)</p></li>
<li><p>Add experimental PyPy support (#2559)</p></li>
<li><p>Add partial support for the match statement. As it’s experimental, it’s only enabled
when <code class="docutils literal notranslate"><span class="pre">--target-version</span> <span class="pre">py310</span></code> is explicitly specified (#2586)</p></li>
<li><p>Add support for parenthesized with (#2586)</p></li>
<li><p>Declare support for Python 3.10 for running Black (#2562)</p></li>
</ul>
</section>
<section id="integrations">
<h5>Integrations<a class="headerlink" href="#integrations" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fixed vim plugin with Python 3.10 by removing deprecated distutils import (#2610)</p></li>
<li><p>The vim plugin now parses <code class="docutils literal notranslate"><span class="pre">skip_magic_trailing_comma</span></code> from pyproject.toml (#2613)</p></li>
</ul>
</section>
</section>
<section id="id4">
<h4>21.10b0<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<section id="id5">
<h5><em>Black</em><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Document stability policy, that will apply for non-beta releases (#2529)</p></li>
<li><p>Add new <code class="docutils literal notranslate"><span class="pre">--workers</span></code> parameter (#2514)</p></li>
<li><p>Fixed feature detection for positional-only arguments in lambdas (#2532)</p></li>
<li><p>Bumped typed-ast version minimum to 1.4.3 for 3.10 compatibility (#2519)</p></li>
<li><p>Fixed a Python 3.10 compatibility issue where the loop argument was still being passed
even though it has been removed (#2580)</p></li>
<li><p>Deprecate Python 2 formatting support (#2523)</p></li>
</ul>
</section>
<section id="blackd">
<h5><em>Blackd</em><a class="headerlink" href="#blackd" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Remove dependency on aiohttp-cors (#2500)</p></li>
<li><p>Bump required aiohttp version to 3.7.4 (#2509)</p></li>
</ul>
</section>
<section id="black-primer">
<h5><em>Black-Primer</em><a class="headerlink" href="#black-primer" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add primer support for –projects (#2555)</p></li>
<li><p>Print primer summary after individual failures (#2570)</p></li>
</ul>
</section>
<section id="id6">
<h5>Integrations<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Allow to pass <code class="docutils literal notranslate"><span class="pre">target_version</span></code> in the vim plugin (#1319)</p></li>
<li><p>Install build tools in docker file and use multi-stage build to keep the image size
down (#2582)</p></li>
</ul>
</section>
</section>
<section id="id7">
<h4>21.9b0<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<section id="id8">
<h5>Packaging<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix missing modules in self-contained binaries (#2466)</p></li>
<li><p>Fix missing toml extra used during installation (#2475)</p></li>
</ul>
</section>
</section>
<section id="id9">
<h4>21.8b0<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<section id="id10">
<h5><em>Black</em><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add support for formatting Jupyter Notebook files (#2357)</p></li>
<li><p>Move from <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> dependency to <code class="docutils literal notranslate"><span class="pre">platformdirs</span></code> (#2375)</p></li>
<li><p>Present a more user-friendly error if .gitignore is invalid (#2414)</p></li>
<li><p>The failsafe for accidentally added backslashes in f-string expressions has been
hardened to handle more edge cases during quote normalization (#2437)</p></li>
<li><p>Avoid changing a function return type annotation’s type to a tuple by adding a
trailing comma (#2384)</p></li>
<li><p>Parsing support has been added for unparenthesized walruses in set literals, set
comprehensions, and indices (#2447).</p></li>
<li><p>Pin <code class="docutils literal notranslate"><span class="pre">setuptools-scm</span></code> build-time dependency version (#2457)</p></li>
<li><p>Exclude typing-extensions version 3.10.0.1 due to it being broken on Python 3.10
(#2460)</p></li>
</ul>
</section>
<section id="id11">
<h5><em>Blackd</em><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Replace sys.exit(-1) with raise ImportError as it plays more nicely with tools that
scan installed packages (#2440)</p></li>
</ul>
</section>
<section id="id12">
<h5>Integrations<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>The provided pre-commit hooks no longer specify <code class="docutils literal notranslate"><span class="pre">language_version</span></code> to avoid overriding
<code class="docutils literal notranslate"><span class="pre">default_language_version</span></code> (#2430)</p></li>
</ul>
</section>
</section>
<section id="id13">
<h4>21.7b0<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<section id="id14">
<h5><em>Black</em><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Configuration files using TOML features higher than spec v0.5.0 are now supported
(#2301)</p></li>
<li><p>Add primer support and test for code piped into black via STDIN (#2315)</p></li>
<li><p>Fix internal error when <code class="docutils literal notranslate"><span class="pre">FORCE_OPTIONAL_PARENTHESES</span></code> feature is enabled (#2332)</p></li>
<li><p>Accept empty stdin (#2346)</p></li>
<li><p>Provide a more useful error when parsing fails during AST safety checks (#2304)</p></li>
</ul>
</section>
<section id="docker">
<h5>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add new <code class="docutils literal notranslate"><span class="pre">latest_release</span></code> tag automation to follow latest black release on docker
images (#2374)</p></li>
</ul>
</section>
<section id="id15">
<h5>Integrations<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>The vim plugin now searches upwards from the directory containing the current buffer
instead of the current working directory for pyproject.toml. (#1871)</p></li>
<li><p>The vim plugin now reads the correct string normalization option in pyproject.toml
(#1869)</p></li>
<li><p>The vim plugin no longer crashes Black when there’s boolean values in pyproject.toml
(#1869)</p></li>
</ul>
</section>
</section>
<section id="id16">
<h4>21.6b0<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<section id="id17">
<h5><em>Black</em><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix failure caused by <code class="docutils literal notranslate"><span class="pre">fmt:</span> <span class="pre">skip</span></code> and indentation (#2281)</p></li>
<li><p>Account for += assignment when deciding whether to split string (#2312)</p></li>
<li><p>Correct max string length calculation when there are string operators (#2292)</p></li>
<li><p>Fixed option usage when using the <code class="docutils literal notranslate"><span class="pre">--code</span></code> flag (#2259)</p></li>
<li><p>Do not call <code class="docutils literal notranslate"><span class="pre">uvloop.install()</span></code> when <em>Black</em> is used as a library (#2303)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--required-version</span></code> option to require a specific version to be running (#2300)</p></li>
<li><p>Fix incorrect custom breakpoint indices when string group contains fake f-strings
(#2311)</p></li>
<li><p>Fix regression where <code class="docutils literal notranslate"><span class="pre">R</span></code> prefixes would be lowercased for docstrings (#2285)</p></li>
<li><p>Fix handling of named escapes (<code class="docutils literal notranslate"><span class="pre">\N{...}</span></code>) when <code class="docutils literal notranslate"><span class="pre">--experimental-string-processing</span></code> is
used (#2319)</p></li>
</ul>
</section>
<section id="id18">
<h5>Integrations<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>The official Black action now supports choosing what version to use, and supports the
major 3 OSes. (#1940)</p></li>
</ul>
</section>
</section>
<section id="b2">
<h4>21.5b2<a class="headerlink" href="#b2" title="Permalink to this headline">¶</a></h4>
<section id="id19">
<h5><em>Black</em><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>A space is no longer inserted into empty docstrings (#2249)</p></li>
<li><p>Fix handling of .gitignore files containing non-ASCII characters on Windows (#2229)</p></li>
<li><p>Respect <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> files in all levels, not only <code class="docutils literal notranslate"><span class="pre">root/.gitignore</span></code> file (apply
<code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> rules like <code class="docutils literal notranslate"><span class="pre">git</span></code> does) (#2225)</p></li>
<li><p>Restored compatibility with Click 8.0 on Python 3.6 when LANG=C used (#2227)</p></li>
<li><p>Add extra uvloop install + import support if in python env (#2258)</p></li>
<li><p>Fix –experimental-string-processing crash when matching parens are not found (#2283)</p></li>
<li><p>Make sure to split lines that start with a string operator (#2286)</p></li>
<li><p>Fix regular expression that black uses to identify f-expressions (#2287)</p></li>
</ul>
</section>
<section id="id20">
<h5><em>Blackd</em><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add a lower bound for the <code class="docutils literal notranslate"><span class="pre">aiohttp-cors</span></code> dependency. Only 0.4.0 or higher is
supported. (#2231)</p></li>
</ul>
</section>
<section id="id21">
<h5>Packaging<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Release self-contained x86_64 MacOS binaries as part of the GitHub release pipeline
(#2198)</p></li>
<li><p>Always build binaries with the latest available Python (#2260)</p></li>
</ul>
</section>
<section id="documentation">
<h5>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add discussion of magic comments to FAQ page (#2272)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--experimental-string-processing</span></code> will be enabled by default in the future (#2273)</p></li>
<li><p>Fix typos discovered by codespell (#2228)</p></li>
<li><p>Fix Vim plugin installation instructions. (#2235)</p></li>
<li><p>Add new Frequently Asked Questions page (#2247)</p></li>
<li><p>Fix encoding + symlink issues preventing proper build on Windows (#2262)</p></li>
</ul>
</section>
</section>
<section id="id22">
<h4>21.5b1<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<section id="id23">
<h5><em>Black</em><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Refactor <code class="docutils literal notranslate"><span class="pre">src/black/__init__.py</span></code> into many files (#2206)</p></li>
</ul>
</section>
<section id="id24">
<h5>Documentation<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Replaced all remaining references to the
<a class="reference external" href="https://github.com/psf/black/tree/main"><code class="docutils literal notranslate"><span class="pre">master</span></code></a> branch with the
<a class="reference external" href="https://github.com/psf/black/tree/main"><code class="docutils literal notranslate"><span class="pre">main</span></code></a> branch. Some additional changes in
the source code were also made. (#2210)</p></li>
<li><p>Sigificantly reorganized the documentation to make much more sense. Check them out by
heading over to <a class="reference external" href="https://black.readthedocs.io/en/stable/">the stable docs on RTD</a>.
(#2174)</p></li>
</ul>
</section>
</section>
<section id="id25">
<h4>21.5b0<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<section id="id26">
<h5><em>Black</em><a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">--pyi</span></code> mode if <code class="docutils literal notranslate"><span class="pre">--stdin-filename</span></code> ends in <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> (#2169)</p></li>
<li><p>Stop detecting target version as Python 3.9+ with pre-PEP-614 decorators that are
being called but with no arguments (#2182)</p></li>
</ul>
</section>
<section id="id27">
<h5><em>Black-Primer</em><a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">--no-diff</span></code> to black-primer to suppress formatting changes (#2187)</p></li>
</ul>
</section>
</section>
<section id="id28">
<h4>21.4b2<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<section id="id29">
<h5><em>Black</em><a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix crash if the user configuration directory is inaccessible. (#2158)</p></li>
<li><p>Clarify
<a class="reference external" href="https://github.com/psf/black/blob/master/docs/the_black_code_style.md#pragmatism">circumstances</a>
in which <em>Black</em> may change the AST (#2159)</p></li>
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> rules to be overridden by specifying <code class="docutils literal notranslate"><span class="pre">exclude</span></code> in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>
or on the command line. (#2170)</p></li>
</ul>
</section>
<section id="id30">
<h5><em>Packaging</em><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Install <code class="docutils literal notranslate"><span class="pre">primer.json</span></code> (used by <code class="docutils literal notranslate"><span class="pre">black-primer</span></code> by default) with black. (#2154)</p></li>
</ul>
</section>
</section>
<section id="id31">
<h4>21.4b1<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<section id="id32">
<h5><em>Black</em><a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix crash on docstrings ending with “\ “. (#2142)</p></li>
<li><p>Fix crash when atypical whitespace is cleaned out of dostrings (#2120)</p></li>
<li><p>Reflect the <code class="docutils literal notranslate"><span class="pre">--skip-magic-trailing-comma</span></code> and <code class="docutils literal notranslate"><span class="pre">--experimental-string-processing</span></code> flags
in the name of the cache file. Without this fix, changes in these flags would not take
effect if the cache had already been populated. (#2131)</p></li>
<li><p>Don’t remove necessary parentheses from assignment expression containing assert /
return statements. (#2143)</p></li>
</ul>
</section>
<section id="id33">
<h5><em>Packaging</em><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Bump pathspec to &gt;= 0.8.1 to solve invalid .gitignore exclusion handling</p></li>
</ul>
</section>
</section>
<section id="id34">
<h4>21.4b0<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<section id="id35">
<h5><em>Black</em><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fixed a rare but annoying formatting instability created by the combination of
optional trailing commas inserted by <code class="docutils literal notranslate"><span class="pre">Black</span></code> and optional parentheses looking at
pre-existing “magic” trailing commas. This fixes issue #1629 and all of its many many
duplicates. (#2126)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now processes one-line docstrings by stripping leading and trailing spaces,
and adding a padding space when needed to break up “”””. (#1740)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now cleans up leading non-breaking spaces in comments (#2092)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now respects <code class="docutils literal notranslate"><span class="pre">--skip-string-normalization</span></code> when normalizing multiline
docstring quotes (#1637)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> no longer removes all empty lines between non-function code and decorators
when formatting typing stubs. Now <code class="docutils literal notranslate"><span class="pre">Black</span></code> enforces a single empty line. (#1646)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> no longer adds an incorrect space after a parenthesized assignment expression
in if/while statements (#1655)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--skip-magic-trailing-comma</span></code> / <code class="docutils literal notranslate"><span class="pre">-C</span></code> to avoid using trailing commas as a reason
to split lines (#1824)</p></li>
<li><p>fixed a crash when PWD=/ on POSIX (#1631)</p></li>
<li><p>fixed “I/O operation on closed file” when using –diff (#1664)</p></li>
<li><p>Prevent coloured diff output being interleaved with multiple files (#1673)</p></li>
<li><p>Added support for PEP 614 relaxed decorator syntax on python 3.9 (#1711)</p></li>
<li><p>Added parsing support for unparenthesized tuples and yield expressions in annotated
assignments (#1835)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--extend-exclude</span></code> argument (PR #2005)</p></li>
<li><p>speed up caching by avoiding pathlib (#1950)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--diff</span></code> correctly indicates when a file doesn’t end in a newline (#1662)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--stdin-filename</span></code> argument to allow stdin to respect <code class="docutils literal notranslate"><span class="pre">--force-exclude</span></code> rules
(#1780)</p></li>
<li><p>Lines ending with <code class="docutils literal notranslate"><span class="pre">fmt:</span> <span class="pre">skip</span></code> will now be not formatted (#1800)</p></li>
<li><p>PR #2053: Black no longer relies on typed-ast for Python 3.8 and higher</p></li>
<li><p>PR #2053: Python 2 support is now optional, install with
<code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black[python2]</span></code> to maintain support.</p></li>
<li><p>Exclude <code class="docutils literal notranslate"><span class="pre">venv</span></code> directory by default (#1683)</p></li>
<li><p>Fixed “Black produced code that is not equivalent to the source” when formatting
Python 2 docstrings (#2037)</p></li>
</ul>
</section>
<section id="id36">
<h5><em>Packaging</em><a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Self-contained native <em>Black</em> binaries are now provided for releases via GitHub
Releases (#1743)</p></li>
</ul>
</section>
</section>
<section id="id37">
<h4>20.8b1<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<section id="id38">
<h5><em>Packaging</em><a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>explicitly depend on Click 7.1.2 or newer as <code class="docutils literal notranslate"><span class="pre">Black</span></code> no longer works with versions
older than 7.0</p></li>
</ul>
</section>
</section>
<section id="id39">
<h4>20.8b0<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<section id="id40">
<h5><em>Black</em><a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>re-implemented support for explicit trailing commas: now it works consistently within
any bracket pair, including nested structures (#1288 and duplicates)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now reindents docstrings when reindenting code around it (#1053)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now shows colored diffs (#1266)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> is now packaged using ‘py3’ tagged wheels (#1388)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now supports Python 3.8 code, e.g. star expressions in return statements
(#1121)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> no longer normalizes capital R-string prefixes as those have a
community-accepted meaning (#1244)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now uses exit code 2 when specified configuration file doesn’t exit (#1361)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Black</span></code> now works on AWS Lambda (#1141)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--force-exclude</span></code> argument (#1032)</p></li>
<li><p>removed deprecated <code class="docutils literal notranslate"><span class="pre">--py36</span></code> option (#1236)</p></li>
<li><p>fixed <code class="docutils literal notranslate"><span class="pre">--diff</span></code> output when EOF is encountered (#526)</p></li>
<li><p>fixed <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> handling around decorators (#560)</p></li>
<li><p>fixed unstable formatting with some <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore</span></code> comments (#1113)</p></li>
<li><p>fixed invalid removal on organizing brackets followed by indexing (#1575)</p></li>
<li><p>introduced <code class="docutils literal notranslate"><span class="pre">black-primer</span></code>, a CI tool that allows us to run regression tests against
existing open source users of Black (#1402)</p></li>
<li><p>introduced property-based fuzzing to our test suite based on Hypothesis and
Hypothersmith (#1566)</p></li>
<li><p>implemented experimental and disabled by default long string rewrapping (#1132),
hidden under a <code class="docutils literal notranslate"><span class="pre">--experimental-string-processing</span></code> flag while it’s being worked on;
this is an undocumented and unsupported feature, you lose Internet points for
depending on it (#1609)</p></li>
</ul>
</section>
<section id="vim-plugin">
<h5>Vim plugin<a class="headerlink" href="#vim-plugin" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>prefer virtualenv packages over global packages (#1383)</p></li>
</ul>
</section>
</section>
<section id="id41">
<h4>19.10b0<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added support for PEP 572 assignment expressions (#711)</p></li>
<li><p>added support for PEP 570 positional-only arguments (#943)</p></li>
<li><p>added support for async generators (#593)</p></li>
<li><p>added support for pre-splitting collections by putting an explicit trailing comma
inside (#826)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">-c</span></code> as a way to format code passed from the command line (#761)</p></li>
<li><p>–safe now works with Python 2 code (#840)</p></li>
<li><p>fixed grammar selection for Python 2-specific code (#765)</p></li>
<li><p>fixed feature detection for trailing commas in function definitions and call sites
(#763)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code>/<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code> comment pairs placed multiple times within the same block of
code now behave correctly (#1005)</p></li>
<li><p><em>Black</em> no longer crashes on Windows machines with more than 61 cores (#838)</p></li>
<li><p><em>Black</em> no longer crashes on standalone comments prepended with a backslash (#767)</p></li>
<li><p><em>Black</em> no longer crashes on <code class="docutils literal notranslate"><span class="pre">from</span></code> … <code class="docutils literal notranslate"><span class="pre">import</span></code> blocks with comments (#829)</p></li>
<li><p><em>Black</em> no longer crashes on Python 3.7 on some platform configurations (#494)</p></li>
<li><p><em>Black</em> no longer fails on comments in from-imports (#671)</p></li>
<li><p><em>Black</em> no longer fails when the file starts with a backslash (#922)</p></li>
<li><p><em>Black</em> no longer merges regular comments with type comments (#1027)</p></li>
<li><p><em>Black</em> no longer splits long lines that contain type comments (#997)</p></li>
<li><p>removed unnecessary parentheses around <code class="docutils literal notranslate"><span class="pre">yield</span></code> expressions (#834)</p></li>
<li><p>added parentheses around long tuples in unpacking assignments (#832)</p></li>
<li><p>added parentheses around complex powers when they are prefixed by a unary operator
(#646)</p></li>
<li><p>fixed bug that led <em>Black</em> format some code with a line length target of 1 (#762)</p></li>
<li><p><em>Black</em> no longer introduces quotes in f-string subexpressions on string boundaries
(#863)</p></li>
<li><p>if <em>Black</em> puts parenthesis around a single expression, it moves comments to the
wrapped expression instead of after the brackets (#872)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> now returns the version of <em>Black</em> in the response headers (#1013)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> can now output the diff of formats on source code when the <code class="docutils literal notranslate"><span class="pre">X-Diff</span></code> header is
provided (#969)</p></li>
</ul>
</section>
<section id="id42">
<h4>19.3b0<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>new option <code class="docutils literal notranslate"><span class="pre">--target-version</span></code> to control which Python versions <em>Black</em>-formatted code
should target (#618)</p></li>
<li><p>deprecated <code class="docutils literal notranslate"><span class="pre">--py36</span></code> (use <code class="docutils literal notranslate"><span class="pre">--target-version=py36</span></code> instead) (#724)</p></li>
<li><p><em>Black</em> no longer normalizes numeric literals to include <code class="docutils literal notranslate"><span class="pre">_</span></code> separators (#696)</p></li>
<li><p>long <code class="docutils literal notranslate"><span class="pre">del</span></code> statements are now split into multiple lines (#698)</p></li>
<li><p>type comments are no longer mangled in function signatures</p></li>
<li><p>improved performance of formatting deeply nested data structures (#509)</p></li>
<li><p><em>Black</em> now properly formats multiple files in parallel on Windows (#632)</p></li>
<li><p><em>Black</em> now creates cache files atomically which allows it to be used in parallel
pipelines (like <code class="docutils literal notranslate"><span class="pre">xargs</span> <span class="pre">-P8</span></code>) (#673)</p></li>
<li><p><em>Black</em> now correctly indents comments in files that were previously formatted with
tabs (#262)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blackd</span></code> now supports CORS (#622)</p></li>
</ul>
</section>
<section id="id43">
<h4>18.9b0<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>numeric literals are now formatted by <em>Black</em> (#452, #461, #464, #469):</p>
<ul>
<li><p>numeric literals are normalized to include <code class="docutils literal notranslate"><span class="pre">_</span></code> separators on Python 3.6+ code</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--skip-numeric-underscore-normalization</span></code> to disable the above behavior and
leave numeric underscores as they were in the input</p></li>
<li><p>code with <code class="docutils literal notranslate"><span class="pre">_</span></code> in numeric literals is recognized as Python 3.6+</p></li>
<li><p>most letters in numeric literals are lowercased (e.g., in <code class="docutils literal notranslate"><span class="pre">1e10</span></code>, <code class="docutils literal notranslate"><span class="pre">0x01</span></code>)</p></li>
<li><p>hexadecimal digits are always uppercased (e.g. <code class="docutils literal notranslate"><span class="pre">0xBADC0DE</span></code>)</p></li>
</ul>
</li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">blackd</span></code>, see
<a class="reference external" href="https://github.com/psf/black/blob/18.9b0/README.md#blackd">its documentation</a> for
more info (#349)</p></li>
<li><p>adjacent string literals are now correctly split into multiple lines (#463)</p></li>
<li><p>trailing comma is now added to single imports that don’t fit on a line (#250)</p></li>
<li><p>cache is now populated when <code class="docutils literal notranslate"><span class="pre">--check</span></code> is successful for a file which speeds up
consecutive checks of properly formatted unmodified files (#448)</p></li>
<li><p>whitespace at the beginning of the file is now removed (#399)</p></li>
<li><p>fixed mangling <a class="reference external" href="http://mpastell.com/pweave/">pweave</a> and
<a class="reference external" href="https://www.spyder-ide.org/">Spyder IDE</a> special comments (#532)</p></li>
<li><p>fixed unstable formatting when unpacking big tuples (#267)</p></li>
<li><p>fixed parsing of <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports with renames (#389)</p></li>
<li><p>fixed scope of <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> when directly preceding <code class="docutils literal notranslate"><span class="pre">yield</span></code> and other nodes (#385)</p></li>
<li><p>fixed formatting of lambda expressions with default arguments (#468)</p></li>
<li><p>fixed <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> statements: <em>Black</em> no longer breaks them into separate lines (#372)</p></li>
<li><p>note: the Vim plugin stopped registering <code class="docutils literal notranslate"><span class="pre">,=</span></code> as a default chord as it turned out to
be a bad idea (#415)</p></li>
</ul>
</section>
<section id="b4">
<h4>18.6b4<a class="headerlink" href="#b4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>hotfix: don’t freeze when multiple comments directly precede <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> (#371)</p></li>
</ul>
</section>
<section id="b3">
<h4>18.6b3<a class="headerlink" href="#b3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>typing stub files (<code class="docutils literal notranslate"><span class="pre">.pyi</span></code>) now have blank lines added after constants (#340)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code> are now much more dependable:</p>
<ul>
<li><p>they now work also within bracket pairs (#329)</p></li>
<li><p>they now correctly work across function/class boundaries (#335)</p></li>
<li><p>they now work when an indentation block starts with empty lines or misaligned
comments (#334)</p></li>
</ul>
</li>
<li><p>made Click not fail on invalid environments; note that Click is right but the
likelihood we’ll need to access non-ASCII file paths when dealing with Python source
code is low (#277)</p></li>
<li><p>fixed improper formatting of f-strings with quotes inside interpolated expressions
(#322)</p></li>
<li><p>fixed unnecessary slowdown when long list literals where found in a file</p></li>
<li><p>fixed unnecessary slowdown on AST nodes with very many siblings</p></li>
<li><p>fixed cannibalizing backslashes during string normalization</p></li>
<li><p>fixed a crash due to symbolic links pointing outside of the project directory (#338)</p></li>
</ul>
</section>
<section id="id44">
<h4>18.6b2<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--config</span></code> (#65)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">-h</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">--help</span></code> (#316)</p></li>
<li><p>fixed improper unmodified file caching when <code class="docutils literal notranslate"><span class="pre">-S</span></code> was used</p></li>
<li><p>fixed extra space in string unpacking (#305)</p></li>
<li><p>fixed formatting of empty triple quoted strings (#313)</p></li>
<li><p>fixed unnecessary slowdown in comment placement calculation on lines without comments</p></li>
</ul>
</section>
<section id="id45">
<h4>18.6b1<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>hotfix: don’t output human-facing information on stdout (#299)</p></li>
<li><p>hotfix: don’t output cake emoji on non-zero return code (#300)</p></li>
</ul>
</section>
<section id="id46">
<h4>18.6b0<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--include</span></code> and <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> (#270)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--skip-string-normalization</span></code> (#118)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> (#283)</p></li>
<li><p>the header output in <code class="docutils literal notranslate"><span class="pre">--diff</span></code> now actually conforms to the unified diff spec</p></li>
<li><p>fixed long trivial assignments being wrapped in unnecessary parentheses (#273)</p></li>
<li><p>fixed unnecessary parentheses when a line contained multiline strings (#232)</p></li>
<li><p>fixed stdin handling not working correctly if an old version of Click was used (#276)</p></li>
<li><p><em>Black</em> now preserves line endings when formatting a file in place (#258)</p></li>
</ul>
</section>
<section id="id47">
<h4>18.5b1<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--pyi</span></code> (#249)</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">--py36</span></code> (#249)</p></li>
<li><p>Python grammar pickle caches are stored with the formatting caches, making <em>Black</em>
work in environments where site-packages is not user-writable (#192)</p></li>
<li><p><em>Black</em> now enforces a PEP 257 empty line after a class-level docstring (and/or
fields) and the first method</p></li>
<li><p>fixed invalid code produced when standalone comments were present in a trailer that
was omitted from line splitting on a large expression (#237)</p></li>
<li><p>fixed optional parentheses being removed within <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> sections (#224)</p></li>
<li><p>fixed invalid code produced when stars in very long imports were incorrectly wrapped
in optional parentheses (#234)</p></li>
<li><p>fixed unstable formatting when inline comments were moved around in a trailer that was
omitted from line splitting on a large expression (#238)</p></li>
<li><p>fixed extra empty line between a class declaration and the first method if no class
docstring or fields are present (#219)</p></li>
<li><p>fixed extra empty line between a function signature and an inner function or inner
class (#196)</p></li>
</ul>
</section>
<section id="id48">
<h4>18.5b0<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>call chains are now formatted according to the
<a class="reference external" href="https://en.wikipedia.org/wiki/Fluent_interface">fluent interfaces</a> style (#67)</p></li>
<li><p>data structure literals (tuples, lists, dictionaries, and sets) are now also always
exploded like imports when they don’t fit in a single line (#152)</p></li>
<li><p>slices are now formatted according to PEP 8 (#178)</p></li>
<li><p>parentheses are now also managed automatically on the right-hand side of assignments
and return statements (#140)</p></li>
<li><p>math operators now use their respective priorities for delimiting multiline
expressions (#148)</p></li>
<li><p>optional parentheses are now omitted on expressions that start or end with a bracket
and only contain a single operator (#177)</p></li>
<li><p>empty parentheses in a class definition are now removed (#145, #180)</p></li>
<li><p>string prefixes are now standardized to lowercase and <code class="docutils literal notranslate"><span class="pre">u</span></code> is removed on Python 3.6+
only code and Python 2.7+ code with the <code class="docutils literal notranslate"><span class="pre">unicode_literals</span></code> future import (#188, #198,
#199)</p></li>
<li><p>typing stub files (<code class="docutils literal notranslate"><span class="pre">.pyi</span></code>) are now formatted in a style that is consistent with PEP
484 (#207, #210)</p></li>
<li><p>progress when reformatting many files is now reported incrementally</p></li>
<li><p>fixed trailers (content with brackets) being unnecessarily exploded into their own
lines after a dedented closing bracket (#119)</p></li>
<li><p>fixed an invalid trailing comma sometimes left in imports (#185)</p></li>
<li><p>fixed non-deterministic formatting when multiple pairs of removable parentheses were
used (#183)</p></li>
<li><p>fixed multiline strings being unnecessarily wrapped in optional parentheses in long
assignments (#215)</p></li>
<li><p>fixed not splitting long from-imports with only a single name</p></li>
<li><p>fixed Python 3.6+ file discovery by also looking at function calls with unpacking.
This fixed non-deterministic formatting if trailing commas where used both in function
signatures with stars and function calls with stars but the former would be
reformatted to a single line.</p></li>
<li><p>fixed crash on dealing with optional parentheses (#193)</p></li>
<li><p>fixed “is”, “is not”, “in”, and “not in” not considered operators for splitting
purposes</p></li>
<li><p>fixed crash when dead symlinks where encountered</p></li>
</ul>
</section>
<section id="a4">
<h4>18.4a4<a class="headerlink" href="#a4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>don’t populate the cache on <code class="docutils literal notranslate"><span class="pre">--check</span></code> (#175)</p></li>
</ul>
</section>
<section id="a3">
<h4>18.4a3<a class="headerlink" href="#a3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added a “cache”; files already reformatted that haven’t changed on disk won’t be
reformatted again (#109)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--check</span></code> and <code class="docutils literal notranslate"><span class="pre">--diff</span></code> are no longer mutually exclusive (#149)</p></li>
<li><p>generalized star expression handling, including double stars; this fixes
multiplication making expressions “unsafe” for trailing commas (#132)</p></li>
<li><p><em>Black</em> no longer enforces putting empty lines behind control flow statements (#90)</p></li>
<li><p><em>Black</em> now splits imports like “Mode 3 + trailing comma” of isort (#127)</p></li>
<li><p>fixed comment indentation when a standalone comment closes a block (#16, #32)</p></li>
<li><p>fixed standalone comments receiving extra empty lines if immediately preceding a
class, def, or decorator (#56, #154)</p></li>
<li><p>fixed <code class="docutils literal notranslate"><span class="pre">--diff</span></code> not showing entire path (#130)</p></li>
<li><p>fixed parsing of complex expressions after star and double stars in function calls
(#2)</p></li>
<li><p>fixed invalid splitting on comma in lambda arguments (#133)</p></li>
<li><p>fixed missing splits of ternary expressions (#141)</p></li>
</ul>
</section>
<section id="a2">
<h4>18.4a2<a class="headerlink" href="#a2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fixed parsing of unaligned standalone comments (#99, #112)</p></li>
<li><p>fixed placement of dictionary unpacking inside dictionary literals (#111)</p></li>
<li><p>Vim plugin now works on Windows, too</p></li>
<li><p>fixed unstable formatting when encountering unnecessarily escaped quotes in a string
(#120)</p></li>
</ul>
</section>
<section id="a1">
<h4>18.4a1<a class="headerlink" href="#a1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> (#78)</p></li>
<li><p>added automatic parentheses management (#4)</p></li>
<li><p>added <a class="reference external" href="https://pre-commit.com">pre-commit</a> integration (#103, #104)</p></li>
<li><p>fixed reporting on <code class="docutils literal notranslate"><span class="pre">--check</span></code> with multiple files (#101, #102)</p></li>
<li><p>fixed removing backslash escapes from raw strings (#100, #105)</p></li>
</ul>
</section>
<section id="a0">
<h4>18.4a0<a class="headerlink" href="#a0" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--diff</span></code> (#87)</p></li>
<li><p>add line breaks before all delimiters, except in cases like commas, to better comply
with PEP 8 (#73)</p></li>
<li><p>standardize string literals to use double quotes (almost) everywhere (#75)</p></li>
<li><p>fixed handling of standalone comments within nested bracketed expressions; <em>Black</em>
will no longer produce super long lines or put all standalone comments at the end of
the expression (#22)</p></li>
<li><p>fixed 18.3a4 regression: don’t crash and burn on empty lines with trailing whitespace
(#80)</p></li>
<li><p>fixed 18.3a4 regression: <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">yapf:</span> <span class="pre">disable</span></code> usage as trailing comment would cause
<em>Black</em> to not emit the rest of the file (#95)</p></li>
<li><p>when CTRL+C is pressed while formatting many files, <em>Black</em> no longer freaks out with
a flurry of asyncio-related exceptions</p></li>
<li><p>only allow up to two empty lines on module level and only single empty lines within
functions (#74)</p></li>
</ul>
</section>
<section id="id49">
<h4>18.3a4<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code> are implemented (#5)</p></li>
<li><p>automatic detection of deprecated Python 2 forms of print statements and exec
statements in the formatted file (#49)</p></li>
<li><p>use proper spaces for complex expressions in default values of typed function
arguments (#60)</p></li>
<li><p>only return exit code 1 when –check is used (#50)</p></li>
<li><p>don’t remove single trailing commas from square bracket indexing (#59)</p></li>
<li><p>don’t omit whitespace if the previous factor leaf wasn’t a math operator (#55)</p></li>
<li><p>omit extra space in kwarg unpacking if it’s the first argument (#46)</p></li>
<li><p>omit extra space in
<a class="reference external" href="http://www.sphinx-doc.org/en/stable/ext/autodoc.html#directive-autoattribute">Sphinx auto-attribute comments</a>
(#68)</p></li>
</ul>
</section>
<section id="id50">
<h4>18.3a3<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>don’t remove single empty lines outside of bracketed expressions (#19)</p></li>
<li><p>added ability to pipe formatting from stdin to stdin (#25)</p></li>
<li><p>restored ability to format code with legacy usage of <code class="docutils literal notranslate"><span class="pre">async</span></code> as a name (#20, #42)</p></li>
<li><p>even better handling of numpy-style array indexing (#33, again)</p></li>
</ul>
</section>
<section id="id51">
<h4>18.3a2<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>changed positioning of binary operators to occur at beginning of lines instead of at
the end, following
<a class="reference external" href="https://github.com/python/peps/commit/c59c4376ad233a62ca4b3a6060c81368bd21e85b">a recent change to PEP 8</a>
(#21)</p></li>
<li><p>ignore empty bracket pairs while splitting. This avoids very weirdly looking
formattings (#34, #35)</p></li>
<li><p>remove a trailing comma if there is a single argument to a call</p></li>
<li><p>if top level functions were separated by a comment, don’t put four empty lines after
the upper function</p></li>
<li><p>fixed unstable formatting of newlines with imports</p></li>
<li><p>fixed unintentional folding of post scriptum standalone comments into last statement
if it was a simple statement (#18, #28)</p></li>
<li><p>fixed missing space in numpy-style array indexing (#33)</p></li>
<li><p>fixed spurious space after star-based unary expressions (#31)</p></li>
</ul>
</section>
<section id="id52">
<h4>18.3a1<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added <code class="docutils literal notranslate"><span class="pre">--check</span></code></p></li>
<li><p>only put trailing commas in function signatures and calls if it’s safe to do so. If
the file is Python 3.6+ it’s always safe, otherwise only safe if there are no <code class="docutils literal notranslate"><span class="pre">*args</span></code>
or <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> used in the signature or call. (#8)</p></li>
<li><p>fixed invalid spacing of dots in relative imports (#6, #13)</p></li>
<li><p>fixed invalid splitting after comma on unpacked variables in for-loops (#23)</p></li>
<li><p>fixed spurious space in parenthesized set expressions (#7)</p></li>
<li><p>fixed spurious space after opening parentheses and in default arguments (#14, #17)</p></li>
<li><p>fixed spurious space after unary operators when the operand was a complex expression
(#15)</p></li>
</ul>
</section>
<section id="id53">
<h4>18.3a0<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>first published version, Happy 🍰 Day 2018!</p></li>
<li><p>alpha quality</p></li>
<li><p>date-versioned (see: <a class="reference external" href="https://calver.org/">https://calver.org/</a>)</p></li>
</ul>
</section>
</section>
<span id="document-authors"></span><section class="tex2jax_ignore mathjax_ignore" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<p>Glued together by <a class="reference external" href="mailto:lukasz&#37;&#52;&#48;langa&#46;pl">Łukasz Langa</a>.</p>
<p>Maintained with <a class="reference external" href="mailto:carolcode&#37;&#52;&#48;willingconsulting&#46;com">Carol Willing</a>,
<a class="reference external" href="mailto:carl&#37;&#52;&#48;oddbird&#46;net">Carl Meyer</a>,
<a class="reference external" href="mailto:jelle&#46;zijlstra&#37;&#52;&#48;gmail&#46;com">Jelle Zijlstra</a>,
<a class="reference external" href="mailto:mail&#37;&#52;&#48;autophagy&#46;io">Mika Naylor</a>,
<a class="reference external" href="mailto:zsol&#46;zsol&#37;&#52;&#48;gmail&#46;com">Zsolt Dollenstein</a>,
<a class="reference external" href="mailto:me&#37;&#52;&#48;cooperlees&#46;com">Cooper Lees</a>, and Richard Si.</p>
<p>Multiple contributions by:</p>
<ul class="simple">
<li><p><a class="reference external" href="mailto:arj&#46;python&#37;&#52;&#48;gmail&#46;com">Abdur-Rahmaan Janhangeer</a></p></li>
<li><p><a class="reference external" href="mailto:me&#37;&#52;&#48;adamj&#46;eu">Adam Johnson</a></p></li>
<li><p><a class="reference external" href="mailto:adamw&#37;&#52;&#48;happyassassin&#46;net">Adam Williamson</a></p></li>
<li><p><a class="reference external" href="mailto:github&#37;&#52;&#48;grande&#46;coffee">Alexander Huynh</a></p></li>
<li><p><a class="reference external" href="mailto:github&#37;&#52;&#48;chmrr&#46;net">Alex Vandiver</a></p></li>
<li><p><a class="reference external" href="mailto:allan&#46;simon&#37;&#52;&#48;supinfo&#46;com">Allan Simon</a></p></li>
<li><p>Anders-Petter Ljungquist</p></li>
<li><p><a class="reference external" href="mailto:andrew&#46;thorp&#46;dev&#37;&#52;&#48;gmail&#46;com">Andrew Thorp</a></p></li>
<li><p><a class="reference external" href="mailto:andrewfzhou&#37;&#52;&#48;gmail&#46;com">Andrew Zhou</a></p></li>
<li><p><a class="reference external" href="mailto:dyuuus&#37;&#52;&#48;yandex&#46;ru">Andrey</a></p></li>
<li><p><a class="reference external" href="mailto:andy&#37;&#52;&#48;andyfreeland&#46;net">Andy Freeland</a></p></li>
<li><p><a class="reference external" href="mailto:asottile&#37;&#52;&#48;umich&#46;edu">Anthony Sottile</a></p></li>
<li><p><a class="reference external" href="mailto:arjaan&#46;buijk&#37;&#52;&#48;gmail&#46;com">Arjaan Buijk</a></p></li>
<li><p><a class="reference external" href="mailto:arnavborborah11&#37;&#52;&#48;gmail&#46;com">Arnav Borbornah</a></p></li>
<li><p><a class="reference external" href="mailto:proofit404&#37;&#52;&#48;gmail&#46;com">Artem Malyshev</a></p></li>
<li><p><a class="reference external" href="mailto:asgerdrewsen&#37;&#52;&#48;gmail&#46;com">Asger Hautop Drewsen</a></p></li>
<li><p><a class="reference external" href="mailto:raf&#37;&#52;&#48;durin42&#46;com">Augie Fackler</a></p></li>
<li><p><a class="reference external" href="mailto:aviskarkc10&#37;&#52;&#48;gmail&#46;com">Aviskar KC</a></p></li>
<li><p>Batuhan Taşkaya</p></li>
<li><p><a class="reference external" href="mailto:bw&#37;&#52;&#48;piquadrat&#46;ch">Benjamin Wohlwend</a></p></li>
<li><p><a class="reference external" href="mailto:github&#37;&#52;&#48;benjam&#46;info">Benjamin Woodruff</a></p></li>
<li><p><a class="reference external" href="mailto:bharatraghunthan9767&#37;&#52;&#48;gmail&#46;com">Bharat Raghunathan</a></p></li>
<li><p><a class="reference external" href="mailto:brandtbucher&#37;&#52;&#48;gmail&#46;com">Brandt Bucher</a></p></li>
<li><p><a class="reference external" href="mailto:brett&#37;&#52;&#48;python&#46;org">Brett Cannon</a></p></li>
<li><p><a class="reference external" href="mailto:bryan&#46;bugyi&#37;&#52;&#48;rutgers&#46;edu">Bryan Bugyi</a></p></li>
<li><p><a class="reference external" href="mailto:bryan&#37;&#52;&#48;reigndropsfall&#46;net">Bryan Forbes</a></p></li>
<li><p><a class="reference external" href="mailto:calumlind&#37;&#52;&#48;gmail&#46;com">Calum Lind</a></p></li>
<li><p><a class="reference external" href="mailto:peacech&#37;&#52;&#48;gmail&#46;com">Charles</a></p></li>
<li><p>Charles Reid</p></li>
<li><p><a class="reference external" href="mailto:cclauss&#37;&#52;&#48;bluewin&#46;ch">Christian Clauss</a></p></li>
<li><p><a class="reference external" href="mailto:christian&#37;&#52;&#48;python&#46;org">Christian Heimes</a></p></li>
<li><p><a class="reference external" href="mailto:chuck&#46;wooters&#37;&#52;&#48;microsoft&#46;com">Chuck Wooters</a></p></li>
<li><p><a class="reference external" href="mailto:offline&#37;&#52;&#48;offby1&#46;net">Chris Rose</a></p></li>
<li><p>Codey Oxley</p></li>
<li><p><a class="reference external" href="mailto:congusbongus&#37;&#52;&#48;gmail&#46;com">Cong</a></p></li>
<li><p><a class="reference external" href="mailto:me&#37;&#52;&#48;cooperlees&#46;com">Cooper Ry Lees</a></p></li>
<li><p><a class="reference external" href="mailto:dandavison7&#37;&#52;&#48;gmail&#46;com">Dan Davison</a></p></li>
<li><p><a class="reference external" href="mailto:github&#37;&#52;&#48;thequod&#46;de">Daniel Hahler</a></p></li>
<li><p><a class="reference external" href="mailto:polycitizen&#37;&#52;&#48;gmail&#46;com">Daniel M<span>&#46;</span> Capella</a></p></li>
<li><p>Daniele Esposti</p></li>
<li><p><a class="reference external" href="mailto:david&#46;hotham&#37;&#52;&#48;metaswitch&#46;com">David Hotham</a></p></li>
<li><p><a class="reference external" href="mailto:dafydd&#46;lukes&#37;&#52;&#48;gmail&#46;com">David Lukes</a></p></li>
<li><p><a class="reference external" href="mailto:davidszotten&#37;&#52;&#48;gmail&#46;com">David Szotten</a></p></li>
<li><p><a class="reference external" href="mailto:denis&#37;&#52;&#48;laxalde&#46;org">Denis Laxalde</a></p></li>
<li><p><a class="reference external" href="mailto:dthor&#37;&#52;&#48;transphormusa&#46;com">Douglas Thor</a></p></li>
<li><p>dylanjblack</p></li>
<li><p><a class="reference external" href="mailto:eli&#37;&#52;&#48;treuherz&#46;com">Eli Treuherz</a></p></li>
<li><p><a class="reference external" href="mailto:emil&#37;&#52;&#48;hessman&#46;se">Emil Hessman</a></p></li>
<li><p><a class="reference external" href="mailto:felix&#46;kohlgrueber&#37;&#52;&#48;gmail&#46;com">Felix Kohlgrüber</a></p></li>
<li><p><a class="reference external" href="mailto:fthiery&#37;&#52;&#48;gmail&#46;com">Florent Thiery</a></p></li>
<li><p>Francisco</p></li>
<li><p><a class="reference external" href="mailto:giacomo&#46;tag&#37;&#52;&#48;gmail&#46;com">Giacomo Tagliabue</a></p></li>
<li><p><a class="reference external" href="mailto:ggandenberger&#37;&#52;&#48;shoprunner&#46;com">Greg Gandenberger</a></p></li>
<li><p><a class="reference external" href="mailto:greg&#37;&#52;&#48;krypto&#46;org">Gregory P<span>&#46;</span> Smith</a></p></li>
<li><p>Gustavo Camargo</p></li>
<li><p>hauntsaninja</p></li>
<li><p><a class="reference external" href="mailto:alqattanhadizaki&#37;&#52;&#48;gmail&#46;com">Hadi Alqattan</a></p></li>
<li><p><a class="reference external" href="mailto:hassan&#37;&#52;&#48;hassanamr&#46;com">Hassan Abouelela</a></p></li>
<li><p><a class="reference external" href="mailto:dan&#37;&#52;&#48;heaford&#46;com">Heaford</a></p></li>
<li><p><a class="reference external" href="mailto::hugo&#37;&#52;&#48;barrera&#46;io">Hugo Barrera</a></p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p><a class="reference external" href="mailto:hs&#37;&#52;&#48;ox&#46;cx">Hynek Schlawack</a></p></li>
<li><p><a class="reference external" href="mailto:ivan&#46;katanic&#37;&#52;&#48;gmail&#46;com">Ivan Katanić</a></p></li>
<li><p><a class="reference external" href="mailto:jakub&#46;kadlubiec&#37;&#52;&#48;skyscanner&#46;net">Jakub Kadlubiec</a></p></li>
<li><p><a class="reference external" href="mailto:jakub&#46;warczarek&#37;&#52;&#48;gmail&#46;com">Jakub Warczarek</a></p></li>
<li><p><a class="reference external" href="mailto:jan&#46;hnatek&#37;&#52;&#48;gmail&#46;com">Jan Hnátek</a></p></li>
<li><p><a class="reference external" href="mailto:me&#37;&#52;&#48;jasonfried&#46;info">Jason Fried</a></p></li>
<li><p><a class="reference external" href="mailto:jason&#37;&#52;&#48;friedland&#46;id&#46;au">Jason Friedland</a></p></li>
<li><p><a class="reference external" href="mailto:ijkl&#37;&#52;&#48;netc&#46;fr">jgirardet</a></p></li>
<li><p>Jim Brännlund</p></li>
<li><p><a class="reference external" href="mailto:tesrin&#37;&#52;&#48;gmail&#46;com">Jimmy Jia</a></p></li>
<li><p><a class="reference external" href="mailto:jma353&#37;&#52;&#48;cornell&#46;edu">Joe Antonakakis</a></p></li>
<li><p><a class="reference external" href="mailto:jon&#46;dufresne&#37;&#52;&#48;gmail&#46;com">Jon Dufresne</a></p></li>
<li><p><a class="reference external" href="mailto:ojiidotch&#37;&#52;&#48;gmail&#46;com">Jonas Obrist</a></p></li>
<li><p><a class="reference external" href="mailto:jonty&#37;&#52;&#48;jonty&#46;co&#46;uk">Jonty Wareing</a></p></li>
<li><p><a class="reference external" href="mailto:jose&#46;monkey&#46;org&#37;&#52;&#48;gmail&#46;com">Jose Nazario</a></p></li>
<li><p><a class="reference external" href="mailto:larson&#46;joseph&#37;&#52;&#48;gmail&#46;com">Joseph Larson</a></p></li>
<li><p><a class="reference external" href="mailto:joshbode&#37;&#52;&#48;fastmail&#46;com">Josh Bode</a></p></li>
<li><p><a class="reference external" href="mailto:anowlcalledjosh&#37;&#52;&#48;gmail&#46;com">Josh Holland</a></p></li>
<li><p><a class="reference external" href="mailto:joshdcannon&#37;&#52;&#48;gmail&#46;com">Joshua Cannon</a></p></li>
<li><p><a class="reference external" href="mailto:jpadilla&#37;&#52;&#48;webapplicate&#46;com">José Padilla</a></p></li>
<li><p><a class="reference external" href="mailto:hello&#37;&#52;&#48;juanlu&#46;space">Juan Luis Cano Rodríguez</a></p></li>
<li><p><a class="reference external" href="mailto:kvn&#46;hou&#37;&#52;&#48;gmail&#46;com">kaiix</a></p></li>
<li><p><a class="reference external" href="mailto:katie&#37;&#52;&#48;glasnt&#46;com">Katie McLaughlin</a></p></li>
<li><p>Katrin Leinweber</p></li>
<li><p><a class="reference external" href="mailto:keithbsmiley&#37;&#52;&#48;gmail&#46;com">Keith Smiley</a></p></li>
<li><p><a class="reference external" href="mailto:kenyon&#37;&#52;&#48;kenyonralph&#46;com">Kenyon Ralph</a></p></li>
<li><p><a class="reference external" href="mailto:Kev&#46;Kirsche+GitHub&#37;&#52;&#48;gmail&#46;com">Kevin Kirsche</a></p></li>
<li><p><a class="reference external" href="mailto:kyle&#46;hausmann&#37;&#52;&#48;gmail&#46;com">Kyle Hausmann</a></p></li>
<li><p><a class="reference external" href="mailto:sunden&#37;&#52;&#48;wisc&#46;edu">Kyle Sunden</a></p></li>
<li><p>Lawrence Chan</p></li>
<li><p><a class="reference external" href="mailto:mail&#37;&#52;&#48;linusgroh&#46;de">Linus Groh</a></p></li>
<li><p><a class="reference external" href="mailto:comradeloren&#37;&#52;&#48;gmail&#46;com">Loren Carvalho</a></p></li>
<li><p><a class="reference external" href="mailto:luka&#46;sterbic&#37;&#52;&#48;gmail&#46;com">Luka Sterbic</a></p></li>
<li><p><a class="reference external" href="mailto:mail&#37;&#52;&#48;lukas-drude&#46;de">LukasDrude</a></p></li>
<li><p>Mahmoud Hossam</p></li>
<li><p>Mariatta</p></li>
<li><p><a class="reference external" href="mailto:vaneseltine&#37;&#52;&#48;gmail&#46;com">Matt VanEseltine</a></p></li>
<li><p><a class="reference external" href="mailto:itsayellow+dev&#37;&#52;&#48;gmail&#46;com">Matthew Clapp</a></p></li>
<li><p><a class="reference external" href="mailto:matthew&#37;&#52;&#48;walster&#46;org">Matthew Walster</a></p></li>
<li><p>Max Smolens</p></li>
<li><p><a class="reference external" href="mailto:michaelaquilina&#37;&#52;&#48;gmail&#46;com">Michael Aquilina</a></p></li>
<li><p><a class="reference external" href="mailto:michael&#46;flaxman&#37;&#52;&#48;gmail&#46;com">Michael Flaxman</a></p></li>
<li><p><a class="reference external" href="mailto:sully&#37;&#52;&#48;msully&#46;net">Michael J<span>&#46;</span> Sullivan</a></p></li>
<li><p><a class="reference external" href="mailto:michael&#37;&#52;&#48;mcclimon&#46;org">Michael McClimon</a></p></li>
<li><p><a class="reference external" href="mailto:miggaiowski&#37;&#52;&#48;gmail&#46;com">Miguel Gaiowski</a></p></li>
<li><p><a class="reference external" href="mailto:roshi&#37;&#52;&#48;fedoraproject&#46;org">Mike</a></p></li>
<li><p><a class="reference external" href="mailto:mikehoy&#37;&#52;&#48;gmail&#46;com">mikehoyio</a></p></li>
<li><p><a class="reference external" href="mailto:minho42&#37;&#52;&#48;gmail&#46;com">Min ho Kim</a></p></li>
<li><p><a class="reference external" href="mailto:miroslav&#37;&#52;&#48;miki725&#46;com">Miroslav Shubernetskiy</a></p></li>
<li><p>MomIsBestFriend</p></li>
<li><p><a class="reference external" href="mailto:ngoldbau&#37;&#52;&#48;illinois&#46;edu">Nathan Goldbaum</a></p></li>
<li><p><a class="reference external" href="mailto:neighthan&#46;hunt&#37;&#52;&#48;gmail&#46;com">Nathan Hunt</a></p></li>
<li><p><a class="reference external" href="mailto:neraste&#46;herr10&#37;&#52;&#48;gmail&#46;com">Neraste</a></p></li>
<li><p><a class="reference external" href="mailto:madigens&#37;&#52;&#48;gmail&#46;com">Nikolaus Waxweiler</a></p></li>
<li><p><a class="reference external" href="mailto:ofekmeister&#37;&#52;&#48;gmail&#46;com">Ofek Lev</a></p></li>
<li><p><a class="reference external" href="mailto:osaetindaniel&#37;&#52;&#48;gmail&#46;com">Osaetin Daniel</a></p></li>
<li><p><a class="reference external" href="mailto:otstrel&#37;&#52;&#48;gmail&#46;com">otstrel</a></p></li>
<li><p><a class="reference external" href="mailto:Pablogsal&#37;&#52;&#48;gmail&#46;com">Pablo Galindo</a></p></li>
<li><p><a class="reference external" href="mailto:p&#46;ganssle&#37;&#52;&#48;gmail&#46;com">Paul Ganssle</a></p></li>
<li><p><a class="reference external" href="mailto:mnhrdt&#37;&#52;&#48;gmail&#46;com">Paul Meinhardt</a></p></li>
<li><p><a class="reference external" href="mailto:mail&#37;&#52;&#48;peterbe&#46;com">Peter Bengtsson</a></p></li>
<li><p><a class="reference external" href="mailto:pete&#37;&#52;&#48;jpgrayson&#46;net">Peter Grayson</a></p></li>
<li><p><a class="reference external" href="mailto:peter&#46;stensmyr&#37;&#52;&#48;gmail&#46;com">Peter Stensmyr</a></p></li>
<li><p>pmacosta</p></li>
<li><p><a class="reference external" href="mailto:quentin&#37;&#52;&#48;pradet&#46;me">Quentin Pradet</a></p></li>
<li><p><a class="reference external" href="mailto:ralf&#37;&#52;&#48;systemexit&#46;de">Ralf Schmitt</a></p></li>
<li><p><a class="reference external" href="mailto:mroutis&#37;&#52;&#48;protonmail&#46;com">Ramón Valles</a></p></li>
<li><p><a class="reference external" href="mailto:richardfearn&#37;&#52;&#48;gmail&#46;com">Richard Fearn</a></p></li>
<li><p><a class="reference external" href="mailto:rishijha424&#37;&#52;&#48;gmail&#46;com">Rishikesh Jha</a></p></li>
<li><p><a class="reference external" href="mailto:rupert&#37;&#52;&#48;rupertb&#46;com">Rupert Bedford</a></p></li>
<li><p>Russell Davis</p></li>
<li><p><a class="reference external" href="mailto:rverschelde&#37;&#52;&#48;gmail&#46;com">Rémi Verschelde</a></p></li>
<li><p><a class="reference external" href="mailto:sakki&#37;&#52;&#48;iki&#46;fi">Sami Salonen</a></p></li>
<li><p><a class="reference external" href="mailto:samuel&#37;&#52;&#48;cormier-iijima&#46;com">Samuel Cormier-Iijima</a></p></li>
<li><p><a class="reference external" href="mailto:sanketdasgupta&#37;&#52;&#48;gmail&#46;com">Sanket Dasgupta</a></p></li>
<li><p>Sergi</p></li>
<li><p><a class="reference external" href="mailto:scott&#37;&#52;&#48;stevenson&#46;io">Scott Stevenson</a></p></li>
<li><p>Shantanu</p></li>
<li><p><a class="reference external" href="mailto:shaoran&#37;&#52;&#48;sakuranohana&#46;org">shaoran</a></p></li>
<li><p><a class="reference external" href="mailto:shf0811&#37;&#52;&#48;gmail&#46;com">Shinya Fujino</a></p></li>
<li><p>springstan</p></li>
<li><p><a class="reference external" href="mailto:hi&#37;&#52;&#48;stavros&#46;io">Stavros Korokithakis</a></p></li>
<li><p><a class="reference external" href="mailto:sirosen&#37;&#52;&#48;globus&#46;org">Stephen Rosen</a></p></li>
<li><p><a class="reference external" href="mailto:S&#46;Vascellaro&#37;&#52;&#48;gmail&#46;com">Steven M<span>&#46;</span> Vascellaro</a></p></li>
<li><p><a class="reference external" href="mailto:snlkapil&#37;&#52;&#48;gmail&#46;com">Sunil Kapil</a></p></li>
<li><p><a class="reference external" href="mailto:sebastien&#46;eustace&#37;&#52;&#48;gmail&#46;com">Sébastien Eustace</a></p></li>
<li><p><a class="reference external" href="mailto:TalAmuyal&#37;&#52;&#48;gmail&#46;com">Tal Amuyal</a></p></li>
<li><p><a class="reference external" href="mailto:git&#37;&#52;&#48;terrance&#46;allofti&#46;me">Terrance</a></p></li>
<li><p><a class="reference external" href="mailto:thomas&#46;c&#46;lu&#37;&#52;&#48;gmail&#46;com">Thom Lu</a></p></li>
<li><p><a class="reference external" href="mailto:tagrain&#37;&#52;&#48;gmail&#46;com">Thomas Grainger</a></p></li>
<li><p><a class="reference external" href="mailto:tim&#46;gates&#37;&#52;&#48;iress&#46;com">Tim Gates</a></p></li>
<li><p><a class="reference external" href="mailto:swast&#37;&#52;&#48;google&#46;com">Tim Swast</a></p></li>
<li><p><a class="reference external" href="mailto:timo_tk&#37;&#52;&#48;hotmail&#46;com">Timo</a></p></li>
<li><p>Toby Fleming</p></li>
<li><p><a class="reference external" href="mailto:tom&#37;&#52;&#48;tomchristie&#46;com">Tom Christie</a></p></li>
<li><p><a class="reference external" href="mailto:tony&#37;&#52;&#48;git-pull&#46;com">Tony Narlock</a></p></li>
<li><p><a class="reference external" href="mailto:tsuyoshi&#46;hombashi&#37;&#52;&#48;gmail&#46;com">Tsuyoshi Hombashi</a></p></li>
<li><p><a class="reference external" href="mailto:tusharchandra2018&#37;&#52;&#48;u&#46;northwestern&#46;edu">Tushar Chandra</a></p></li>
<li><p><a class="reference external" href="mailto:uranusjr&#37;&#52;&#48;gmail&#46;com">Tzu-ping Chung</a></p></li>
<li><p><a class="reference external" href="mailto:ukshah2&#37;&#52;&#48;illinois&#46;edu">Utsav Shah</a></p></li>
<li><p>utsav-dbx</p></li>
<li><p>vezeli</p></li>
<li><p><a class="reference external" href="mailto:ville&#46;skytta&#37;&#52;&#48;iki&#46;fi">Ville Skyttä</a></p></li>
<li><p><a class="reference external" href="mailto:sharma&#46;vishwas88&#37;&#52;&#48;gmail&#46;com">Vishwas B Sharma</a></p></li>
<li><p><a class="reference external" href="mailto:volshebnyi&#37;&#52;&#48;gmail&#46;com">Vlad Emelianov</a></p></li>
<li><p><a class="reference external" href="mailto:178894043&#37;&#52;&#48;qq&#46;com">williamfzc</a></p></li>
<li><p><a class="reference external" href="mailto:wouter&#37;&#52;&#48;bolsterl&#46;ee">wouter bolsterlee</a></p></li>
<li><p>Yazdan</p></li>
<li><p><a class="reference external" href="mailto:yngve&#37;&#52;&#48;hoiseth&#46;net">Yngve Høiseth</a></p></li>
<li><p><a class="reference external" href="mailto:1998uriyyo&#37;&#52;&#48;gmail&#46;com">Yurii Karabas</a></p></li>
<li><p><a class="reference external" href="mailto:zac&#37;&#52;&#48;zhd&#46;dev">Zac Hatfield-Dodds</a></p></li>
</ul>
</section>
</div>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018-Present, Łukasz Langa and contributors to Black.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>